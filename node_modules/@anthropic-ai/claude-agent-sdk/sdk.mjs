#!/usr/bin/env node
// (c) Anthropic PBC. All rights reserved. Use is subject to the Legal Agreements outlined here: https://code.claude.com/docs/en/legal-and-compliance.

// Version: 0.2.41

// Want to see the unminified source? We're hiring!
// https://job-boards.greenhouse.io/anthropic/jobs/4816199008
var BK=Object.create;var{getPrototypeOf:zK,defineProperty:W9,getOwnPropertyNames:KK}=Object;var UK=Object.prototype.hasOwnProperty;var U7=(X,Q,$)=>{$=X!=null?BK(zK(X)):{};let Y=Q||!X||!X.__esModule?W9($,"default",{value:X,enumerable:!0}):$;for(let W of KK(X))if(!UK.call(Y,W))W9(Y,W,{get:()=>X[W],enumerable:!0});return Y};var P=(X,Q)=>()=>(Q||X((Q={exports:{}}).exports,Q),Q.exports);var V7=(X,Q)=>{for(var $ in Q)W9(X,$,{get:Q[$],enumerable:!0,configurable:!0,set:(Y)=>Q[$]=()=>Y})};var VK=Symbol.dispose||Symbol.for("Symbol.dispose"),LK=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),L7=(X,Q,$)=>{if(Q!=null){if(typeof Q!=="object"&&typeof Q!=="function")throw TypeError('Object expected to be assigned to "using" declaration');var Y;if($)Y=Q[LK];if(Y===void 0)Y=Q[VK];if(typeof Y!=="function")throw TypeError("Object not disposable");X.push([$,Y,Q])}else if($)X.push([$]);return Q},q7=(X,Q,$)=>{var Y=typeof SuppressedError==="function"?SuppressedError:function(G,H,B,z){return z=Error(B),z.name="SuppressedError",z.error=G,z.suppressed=H,z},W=(G)=>Q=$?new Y(G,Q,"An error was suppressed during disposal"):($=!0,G),J=(G)=>{while(G=X.pop())try{var H=G[1]&&G[1].call(G[2]);if(G[0])return Promise.resolve(H).then(J,(B)=>(W(B),J()))}catch(B){W(B)}if($)throw Q};return J()};var fX=P((GG)=>{Object.defineProperty(GG,"__esModule",{value:!0});GG.regexpCode=GG.getEsmExportName=GG.getProperty=GG.safeStringify=GG.stringify=GG.strConcat=GG.addCodeArg=GG.str=GG._=GG.nil=GG._Code=GG.Name=GG.IDENTIFIER=GG._CodeOrName=void 0;class w8{}GG._CodeOrName=w8;GG.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class f6 extends w8{constructor(X){super();if(!GG.IDENTIFIER.test(X))throw Error("CodeGen: name must be a valid identifier");this.str=X}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}GG.Name=f6;class s0 extends w8{constructor(X){super();this._items=typeof X==="string"?[X]:X}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let X=this._items[0];return X===""||X==='""'}get str(){var X;return(X=this._str)!==null&&X!==void 0?X:this._str=this._items.reduce((Q,$)=>`${Q}${$}`,"")}get names(){var X;return(X=this._names)!==null&&X!==void 0?X:this._names=this._items.reduce((Q,$)=>{if($ instanceof f6)Q[$.str]=(Q[$.str]||0)+1;return Q},{})}}GG._Code=s0;GG.nil=new s0("");function WG(X,...Q){let $=[X[0]],Y=0;while(Y<Q.length)e$($,Q[Y]),$.push(X[++Y]);return new s0($)}GG._=WG;var s$=new s0("+");function JG(X,...Q){let $=[hX(X[0])],Y=0;while(Y<Q.length)$.push(s$),e$($,Q[Y]),$.push(s$,hX(X[++Y]));return jN($),new s0($)}GG.str=JG;function e$(X,Q){if(Q instanceof s0)X.push(...Q._items);else if(Q instanceof f6)X.push(Q);else X.push(EN(Q))}GG.addCodeArg=e$;function jN(X){let Q=1;while(Q<X.length-1){if(X[Q]===s$){let $=RN(X[Q-1],X[Q+1]);if($!==void 0){X.splice(Q-1,3,$);continue}X[Q++]="+"}Q++}}function RN(X,Q){if(Q==='""')return X;if(X==='""')return Q;if(typeof X=="string"){if(Q instanceof f6||X[X.length-1]!=='"')return;if(typeof Q!="string")return`${X.slice(0,-1)}${Q}"`;if(Q[0]==='"')return X.slice(0,-1)+Q.slice(1);return}if(typeof Q=="string"&&Q[0]==='"'&&!(X instanceof f6))return`"${X}${Q.slice(1)}`;return}function IN(X,Q){return Q.emptyStr()?X:X.emptyStr()?Q:JG`${X}${Q}`}GG.strConcat=IN;function EN(X){return typeof X=="number"||typeof X=="boolean"||X===null?X:hX(Array.isArray(X)?X.join(","):X)}function bN(X){return new s0(hX(X))}GG.stringify=bN;function hX(X){return JSON.stringify(X).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}GG.safeStringify=hX;function PN(X){return typeof X=="string"&&GG.IDENTIFIER.test(X)?new s0(`.${X}`):WG`[${X}]`}GG.getProperty=PN;function SN(X){if(typeof X=="string"&&GG.IDENTIFIER.test(X))return new s0(`${X}`);throw Error(`CodeGen: invalid export name: ${X}, use explicit $id name mapping`)}GG.getEsmExportName=SN;function ZN(X){return new s0(X.toString())}GG.regexpCode=ZN});var YY=P((KG)=>{Object.defineProperty(KG,"__esModule",{value:!0});KG.ValueScope=KG.ValueScopeName=KG.Scope=KG.varKinds=KG.UsedValueState=void 0;var x0=fX();class BG extends Error{constructor(X){super(`CodeGen: "code" for ${X} not defined`);this.value=X.value}}var M8;(function(X){X[X.Started=0]="Started",X[X.Completed=1]="Completed"})(M8||(KG.UsedValueState=M8={}));KG.varKinds={const:new x0.Name("const"),let:new x0.Name("let"),var:new x0.Name("var")};class QY{constructor({prefixes:X,parent:Q}={}){this._names={},this._prefixes=X,this._parent=Q}toName(X){return X instanceof x0.Name?X:this.name(X)}name(X){return new x0.Name(this._newName(X))}_newName(X){let Q=this._names[X]||this._nameGroup(X);return`${X}${Q.index++}`}_nameGroup(X){var Q,$;if((($=(Q=this._parent)===null||Q===void 0?void 0:Q._prefixes)===null||$===void 0?void 0:$.has(X))||this._prefixes&&!this._prefixes.has(X))throw Error(`CodeGen: prefix "${X}" is not allowed in this scope`);return this._names[X]={prefix:X,index:0}}}KG.Scope=QY;class $Y extends x0.Name{constructor(X,Q){super(Q);this.prefix=X}setValue(X,{property:Q,itemIndex:$}){this.value=X,this.scopePath=x0._`.${new x0.Name(Q)}[${$}]`}}KG.ValueScopeName=$Y;var mN=x0._`\n`;class zG extends QY{constructor(X){super(X);this._values={},this._scope=X.scope,this.opts={...X,_n:X.lines?mN:x0.nil}}get(){return this._scope}name(X){return new $Y(X,this._newName(X))}value(X,Q){var $;if(Q.ref===void 0)throw Error("CodeGen: ref must be passed in value");let Y=this.toName(X),{prefix:W}=Y,J=($=Q.key)!==null&&$!==void 0?$:Q.ref,G=this._values[W];if(G){let z=G.get(J);if(z)return z}else G=this._values[W]=new Map;G.set(J,Y);let H=this._scope[W]||(this._scope[W]=[]),B=H.length;return H[B]=Q.ref,Y.setValue(Q,{property:W,itemIndex:B}),Y}getValue(X,Q){let $=this._values[X];if(!$)return;return $.get(Q)}scopeRefs(X,Q=this._values){return this._reduceValues(Q,($)=>{if($.scopePath===void 0)throw Error(`CodeGen: name "${$}" has no value`);return x0._`${X}${$.scopePath}`})}scopeCode(X=this._values,Q,$){return this._reduceValues(X,(Y)=>{if(Y.value===void 0)throw Error(`CodeGen: name "${Y}" has no value`);return Y.value.code},Q,$)}_reduceValues(X,Q,$={},Y){let W=x0.nil;for(let J in X){let G=X[J];if(!G)continue;let H=$[J]=$[J]||new Map;G.forEach((B)=>{if(H.has(B))return;H.set(B,M8.Started);let z=Q(B);if(z){let K=this.opts.es5?KG.varKinds.var:KG.varKinds.const;W=x0._`${W}${K} ${B} = ${z};${this.opts._n}`}else if(z=Y===null||Y===void 0?void 0:Y(B))W=x0._`${W}${z}${this.opts._n}`;else throw new BG(B);H.set(B,M8.Completed)})}return W}}KG.ValueScope=zG});var p=P((y0)=>{Object.defineProperty(y0,"__esModule",{value:!0});y0.or=y0.and=y0.not=y0.CodeGen=y0.operators=y0.varKinds=y0.ValueScopeName=y0.ValueScope=y0.Scope=y0.Name=y0.regexpCode=y0.stringify=y0.getProperty=y0.nil=y0.strConcat=y0.str=y0._=void 0;var t=fX(),e0=YY(),l1=fX();Object.defineProperty(y0,"_",{enumerable:!0,get:function(){return l1._}});Object.defineProperty(y0,"str",{enumerable:!0,get:function(){return l1.str}});Object.defineProperty(y0,"strConcat",{enumerable:!0,get:function(){return l1.strConcat}});Object.defineProperty(y0,"nil",{enumerable:!0,get:function(){return l1.nil}});Object.defineProperty(y0,"getProperty",{enumerable:!0,get:function(){return l1.getProperty}});Object.defineProperty(y0,"stringify",{enumerable:!0,get:function(){return l1.stringify}});Object.defineProperty(y0,"regexpCode",{enumerable:!0,get:function(){return l1.regexpCode}});Object.defineProperty(y0,"Name",{enumerable:!0,get:function(){return l1.Name}});var P8=YY();Object.defineProperty(y0,"Scope",{enumerable:!0,get:function(){return P8.Scope}});Object.defineProperty(y0,"ValueScope",{enumerable:!0,get:function(){return P8.ValueScope}});Object.defineProperty(y0,"ValueScopeName",{enumerable:!0,get:function(){return P8.ValueScopeName}});Object.defineProperty(y0,"varKinds",{enumerable:!0,get:function(){return P8.varKinds}});y0.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class m1{optimizeNodes(){return this}optimizeNames(X,Q){return this}}class VG extends m1{constructor(X,Q,$){super();this.varKind=X,this.name=Q,this.rhs=$}render({es5:X,_n:Q}){let $=X?e0.varKinds.var:this.varKind,Y=this.rhs===void 0?"":` = ${this.rhs}`;return`${$} ${this.name}${Y};`+Q}optimizeNames(X,Q){if(!X[this.name.str])return;if(this.rhs)this.rhs=l6(this.rhs,X,Q);return this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class GY extends m1{constructor(X,Q,$){super();this.lhs=X,this.rhs=Q,this.sideEffects=$}render({_n:X}){return`${this.lhs} = ${this.rhs};`+X}optimizeNames(X,Q){if(this.lhs instanceof t.Name&&!X[this.lhs.str]&&!this.sideEffects)return;return this.rhs=l6(this.rhs,X,Q),this}get names(){let X=this.lhs instanceof t.Name?{}:{...this.lhs.names};return b8(X,this.rhs)}}class LG extends GY{constructor(X,Q,$,Y){super(X,$,Y);this.op=Q}render({_n:X}){return`${this.lhs} ${this.op}= ${this.rhs};`+X}}class qG extends m1{constructor(X){super();this.label=X,this.names={}}render({_n:X}){return`${this.label}:`+X}}class FG extends m1{constructor(X){super();this.label=X,this.names={}}render({_n:X}){return`break${this.label?` ${this.label}`:""};`+X}}class NG extends m1{constructor(X){super();this.error=X}render({_n:X}){return`throw ${this.error};`+X}get names(){return this.error.names}}class OG extends m1{constructor(X){super();this.code=X}render({_n:X}){return`${this.code};`+X}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(X,Q){return this.code=l6(this.code,X,Q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class S8 extends m1{constructor(X=[]){super();this.nodes=X}render(X){return this.nodes.reduce((Q,$)=>Q+$.render(X),"")}optimizeNodes(){let{nodes:X}=this,Q=X.length;while(Q--){let $=X[Q].optimizeNodes();if(Array.isArray($))X.splice(Q,1,...$);else if($)X[Q]=$;else X.splice(Q,1)}return X.length>0?this:void 0}optimizeNames(X,Q){let{nodes:$}=this,Y=$.length;while(Y--){let W=$[Y];if(W.optimizeNames(X,Q))continue;iN(X,W.names),$.splice(Y,1)}return $.length>0?this:void 0}get names(){return this.nodes.reduce((X,Q)=>H6(X,Q.names),{})}}class c1 extends S8{render(X){return"{"+X._n+super.render(X)+"}"+X._n}}class DG extends S8{}class uX extends c1{}uX.kind="else";class j1 extends c1{constructor(X,Q){super(Q);this.condition=X}render(X){let Q=`if(${this.condition})`+super.render(X);if(this.else)Q+="else "+this.else.render(X);return Q}optimizeNodes(){super.optimizeNodes();let X=this.condition;if(X===!0)return this.nodes;let Q=this.else;if(Q){let $=Q.optimizeNodes();Q=this.else=Array.isArray($)?new uX($):$}if(Q){if(X===!1)return Q instanceof j1?Q:Q.nodes;if(this.nodes.length)return this;return new j1(RG(X),Q instanceof j1?[Q]:Q.nodes)}if(X===!1||!this.nodes.length)return;return this}optimizeNames(X,Q){var $;if(this.else=($=this.else)===null||$===void 0?void 0:$.optimizeNames(X,Q),!(super.optimizeNames(X,Q)||this.else))return;return this.condition=l6(this.condition,X,Q),this}get names(){let X=super.names;if(b8(X,this.condition),this.else)H6(X,this.else.names);return X}}j1.kind="if";class u6 extends c1{}u6.kind="for";class wG extends u6{constructor(X){super();this.iteration=X}render(X){return`for(${this.iteration})`+super.render(X)}optimizeNames(X,Q){if(!super.optimizeNames(X,Q))return;return this.iteration=l6(this.iteration,X,Q),this}get names(){return H6(super.names,this.iteration.names)}}class AG extends u6{constructor(X,Q,$,Y){super();this.varKind=X,this.name=Q,this.from=$,this.to=Y}render(X){let Q=X.es5?e0.varKinds.var:this.varKind,{name:$,from:Y,to:W}=this;return`for(${Q} ${$}=${Y}; ${$}<${W}; ${$}++)`+super.render(X)}get names(){let X=b8(super.names,this.from);return b8(X,this.to)}}class WY extends u6{constructor(X,Q,$,Y){super();this.loop=X,this.varKind=Q,this.name=$,this.iterable=Y}render(X){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(X)}optimizeNames(X,Q){if(!super.optimizeNames(X,Q))return;return this.iterable=l6(this.iterable,X,Q),this}get names(){return H6(super.names,this.iterable.names)}}class j8 extends c1{constructor(X,Q,$){super();this.name=X,this.args=Q,this.async=$}render(X){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(X)}}j8.kind="func";class R8 extends S8{render(X){return"return "+super.render(X)}}R8.kind="return";class MG extends c1{render(X){let Q="try"+super.render(X);if(this.catch)Q+=this.catch.render(X);if(this.finally)Q+=this.finally.render(X);return Q}optimizeNodes(){var X,Q;return super.optimizeNodes(),(X=this.catch)===null||X===void 0||X.optimizeNodes(),(Q=this.finally)===null||Q===void 0||Q.optimizeNodes(),this}optimizeNames(X,Q){var $,Y;return super.optimizeNames(X,Q),($=this.catch)===null||$===void 0||$.optimizeNames(X,Q),(Y=this.finally)===null||Y===void 0||Y.optimizeNames(X,Q),this}get names(){let X=super.names;if(this.catch)H6(X,this.catch.names);if(this.finally)H6(X,this.finally.names);return X}}class I8 extends c1{constructor(X){super();this.error=X}render(X){return`catch(${this.error})`+super.render(X)}}I8.kind="catch";class E8 extends c1{render(X){return"finally"+super.render(X)}}E8.kind="finally";class jG{constructor(X,Q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Q,_n:Q.lines?`
`:""},this._extScope=X,this._scope=new e0.Scope({parent:X}),this._nodes=[new DG]}toString(){return this._root.render(this.opts)}name(X){return this._scope.name(X)}scopeName(X){return this._extScope.name(X)}scopeValue(X,Q){let $=this._extScope.value(X,Q);return(this._values[$.prefix]||(this._values[$.prefix]=new Set)).add($),$}getScopeValue(X,Q){return this._extScope.getValue(X,Q)}scopeRefs(X){return this._extScope.scopeRefs(X,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(X,Q,$,Y){let W=this._scope.toName(Q);if($!==void 0&&Y)this._constants[W.str]=$;return this._leafNode(new VG(X,W,$)),W}const(X,Q,$){return this._def(e0.varKinds.const,X,Q,$)}let(X,Q,$){return this._def(e0.varKinds.let,X,Q,$)}var(X,Q,$){return this._def(e0.varKinds.var,X,Q,$)}assign(X,Q,$){return this._leafNode(new GY(X,Q,$))}add(X,Q){return this._leafNode(new LG(X,y0.operators.ADD,Q))}code(X){if(typeof X=="function")X();else if(X!==t.nil)this._leafNode(new OG(X));return this}object(...X){let Q=["{"];for(let[$,Y]of X){if(Q.length>1)Q.push(",");if(Q.push($),$!==Y||this.opts.es5)Q.push(":"),(0,t.addCodeArg)(Q,Y)}return Q.push("}"),new t._Code(Q)}if(X,Q,$){if(this._blockNode(new j1(X)),Q&&$)this.code(Q).else().code($).endIf();else if(Q)this.code(Q).endIf();else if($)throw Error('CodeGen: "else" body without "then" body');return this}elseIf(X){return this._elseNode(new j1(X))}else(){return this._elseNode(new uX)}endIf(){return this._endBlockNode(j1,uX)}_for(X,Q){if(this._blockNode(X),Q)this.code(Q).endFor();return this}for(X,Q){return this._for(new wG(X),Q)}forRange(X,Q,$,Y,W=this.opts.es5?e0.varKinds.var:e0.varKinds.let){let J=this._scope.toName(X);return this._for(new AG(W,J,Q,$),()=>Y(J))}forOf(X,Q,$,Y=e0.varKinds.const){let W=this._scope.toName(X);if(this.opts.es5){let J=Q instanceof t.Name?Q:this.var("_arr",Q);return this.forRange("_i",0,t._`${J}.length`,(G)=>{this.var(W,t._`${J}[${G}]`),$(W)})}return this._for(new WY("of",Y,W,Q),()=>$(W))}forIn(X,Q,$,Y=this.opts.es5?e0.varKinds.var:e0.varKinds.const){if(this.opts.ownProperties)return this.forOf(X,t._`Object.keys(${Q})`,$);let W=this._scope.toName(X);return this._for(new WY("in",Y,W,Q),()=>$(W))}endFor(){return this._endBlockNode(u6)}label(X){return this._leafNode(new qG(X))}break(X){return this._leafNode(new FG(X))}return(X){let Q=new R8;if(this._blockNode(Q),this.code(X),Q.nodes.length!==1)throw Error('CodeGen: "return" should have one node');return this._endBlockNode(R8)}try(X,Q,$){if(!Q&&!$)throw Error('CodeGen: "try" without "catch" and "finally"');let Y=new MG;if(this._blockNode(Y),this.code(X),Q){let W=this.name("e");this._currNode=Y.catch=new I8(W),Q(W)}if($)this._currNode=Y.finally=new E8,this.code($);return this._endBlockNode(I8,E8)}throw(X){return this._leafNode(new NG(X))}block(X,Q){if(this._blockStarts.push(this._nodes.length),X)this.code(X).endBlock(Q);return this}endBlock(X){let Q=this._blockStarts.pop();if(Q===void 0)throw Error("CodeGen: not in self-balancing block");let $=this._nodes.length-Q;if($<0||X!==void 0&&$!==X)throw Error(`CodeGen: wrong number of nodes: ${$} vs ${X} expected`);return this._nodes.length=Q,this}func(X,Q=t.nil,$,Y){if(this._blockNode(new j8(X,Q,$)),Y)this.code(Y).endFunc();return this}endFunc(){return this._endBlockNode(j8)}optimize(X=1){while(X-- >0)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(X){return this._currNode.nodes.push(X),this}_blockNode(X){this._currNode.nodes.push(X),this._nodes.push(X)}_endBlockNode(X,Q){let $=this._currNode;if($ instanceof X||Q&&$ instanceof Q)return this._nodes.pop(),this;throw Error(`CodeGen: not in block "${Q?`${X.kind}/${Q.kind}`:X.kind}"`)}_elseNode(X){let Q=this._currNode;if(!(Q instanceof j1))throw Error('CodeGen: "else" without "if"');return this._currNode=Q.else=X,this}get _root(){return this._nodes[0]}get _currNode(){let X=this._nodes;return X[X.length-1]}set _currNode(X){let Q=this._nodes;Q[Q.length-1]=X}}y0.CodeGen=jG;function H6(X,Q){for(let $ in Q)X[$]=(X[$]||0)+(Q[$]||0);return X}function b8(X,Q){return Q instanceof t._CodeOrName?H6(X,Q.names):X}function l6(X,Q,$){if(X instanceof t.Name)return Y(X);if(!W(X))return X;return new t._Code(X._items.reduce((J,G)=>{if(G instanceof t.Name)G=Y(G);if(G instanceof t._Code)J.push(...G._items);else J.push(G);return J},[]));function Y(J){let G=$[J.str];if(G===void 0||Q[J.str]!==1)return J;return delete Q[J.str],G}function W(J){return J instanceof t._Code&&J._items.some((G)=>G instanceof t.Name&&Q[G.str]===1&&$[G.str]!==void 0)}}function iN(X,Q){for(let $ in Q)X[$]=(X[$]||0)-(Q[$]||0)}function RG(X){return typeof X=="boolean"||typeof X=="number"||X===null?!X:t._`!${JY(X)}`}y0.not=RG;var nN=IG(y0.operators.AND);function rN(...X){return X.reduce(nN)}y0.and=rN;var oN=IG(y0.operators.OR);function tN(...X){return X.reduce(oN)}y0.or=tN;function IG(X){return(Q,$)=>Q===t.nil?$:$===t.nil?Q:t._`${JY(Q)} ${X} ${JY($)}`}function JY(X){return X instanceof t.Name?X:t._`(${X})`}});var e=P((_G)=>{Object.defineProperty(_G,"__esModule",{value:!0});_G.checkStrictMode=_G.getErrorPath=_G.Type=_G.useFunc=_G.setEvaluated=_G.evaluatedPropsToName=_G.mergeEvaluated=_G.eachItem=_G.unescapeJsonPointer=_G.escapeJsonPointer=_G.escapeFragment=_G.unescapeFragment=_G.schemaRefOrVal=_G.schemaHasRulesButRef=_G.schemaHasRules=_G.checkUnknownRules=_G.alwaysValidSchema=_G.toHash=void 0;var $0=p(),XO=fX();function QO(X){let Q={};for(let $ of X)Q[$]=!0;return Q}_G.toHash=QO;function $O(X,Q){if(typeof Q=="boolean")return Q;if(Object.keys(Q).length===0)return!0;return SG(X,Q),!ZG(Q,X.self.RULES.all)}_G.alwaysValidSchema=$O;function SG(X,Q=X.schema){let{opts:$,self:Y}=X;if(!$.strictSchema)return;if(typeof Q==="boolean")return;let W=Y.RULES.keywords;for(let J in Q)if(!W[J])vG(X,`unknown keyword: "${J}"`)}_G.checkUnknownRules=SG;function ZG(X,Q){if(typeof X=="boolean")return!X;for(let $ in X)if(Q[$])return!0;return!1}_G.schemaHasRules=ZG;function YO(X,Q){if(typeof X=="boolean")return!X;for(let $ in X)if($!=="$ref"&&Q.all[$])return!0;return!1}_G.schemaHasRulesButRef=YO;function WO({topSchemaRef:X,schemaPath:Q},$,Y,W){if(!W){if(typeof $=="number"||typeof $=="boolean")return $;if(typeof $=="string")return $0._`${$}`}return $0._`${X}${Q}${(0,$0.getProperty)(Y)}`}_G.schemaRefOrVal=WO;function JO(X){return CG(decodeURIComponent(X))}_G.unescapeFragment=JO;function GO(X){return encodeURIComponent(BY(X))}_G.escapeFragment=GO;function BY(X){if(typeof X=="number")return`${X}`;return X.replace(/~/g,"~0").replace(/\//g,"~1")}_G.escapeJsonPointer=BY;function CG(X){return X.replace(/~1/g,"/").replace(/~0/g,"~")}_G.unescapeJsonPointer=CG;function HO(X,Q){if(Array.isArray(X))for(let $ of X)Q($);else Q(X)}_G.eachItem=HO;function bG({mergeNames:X,mergeToName:Q,mergeValues:$,resultToName:Y}){return(W,J,G,H)=>{let B=G===void 0?J:G instanceof $0.Name?(J instanceof $0.Name?X(W,J,G):Q(W,J,G),G):J instanceof $0.Name?(Q(W,G,J),J):$(J,G);return H===$0.Name&&!(B instanceof $0.Name)?Y(W,B):B}}_G.mergeEvaluated={props:bG({mergeNames:(X,Q,$)=>X.if($0._`${$} !== true && ${Q} !== undefined`,()=>{X.if($0._`${Q} === true`,()=>X.assign($,!0),()=>X.assign($,$0._`${$} || {}`).code($0._`Object.assign(${$}, ${Q})`))}),mergeToName:(X,Q,$)=>X.if($0._`${$} !== true`,()=>{if(Q===!0)X.assign($,!0);else X.assign($,$0._`${$} || {}`),zY(X,$,Q)}),mergeValues:(X,Q)=>X===!0?!0:{...X,...Q},resultToName:kG}),items:bG({mergeNames:(X,Q,$)=>X.if($0._`${$} !== true && ${Q} !== undefined`,()=>X.assign($,$0._`${Q} === true ? true : ${$} > ${Q} ? ${$} : ${Q}`)),mergeToName:(X,Q,$)=>X.if($0._`${$} !== true`,()=>X.assign($,Q===!0?!0:$0._`${$} > ${Q} ? ${$} : ${Q}`)),mergeValues:(X,Q)=>X===!0?!0:Math.max(X,Q),resultToName:(X,Q)=>X.var("items",Q)})};function kG(X,Q){if(Q===!0)return X.var("props",!0);let $=X.var("props",$0._`{}`);if(Q!==void 0)zY(X,$,Q);return $}_G.evaluatedPropsToName=kG;function zY(X,Q,$){Object.keys($).forEach((Y)=>X.assign($0._`${Q}${(0,$0.getProperty)(Y)}`,!0))}_G.setEvaluated=zY;var PG={};function BO(X,Q){return X.scopeValue("func",{ref:Q,code:PG[Q.code]||(PG[Q.code]=new XO._Code(Q.code))})}_G.useFunc=BO;var HY;(function(X){X[X.Num=0]="Num",X[X.Str=1]="Str"})(HY||(_G.Type=HY={}));function zO(X,Q,$){if(X instanceof $0.Name){let Y=Q===HY.Num;return $?Y?$0._`"[" + ${X} + "]"`:$0._`"['" + ${X} + "']"`:Y?$0._`"/" + ${X}`:$0._`"/" + ${X}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return $?(0,$0.getProperty)(X).toString():"/"+BY(X)}_G.getErrorPath=zO;function vG(X,Q,$=X.opts.strictSchema){if(!$)return;if(Q=`strict mode: ${Q}`,$===!0)throw Error(Q);X.self.logger.warn(Q)}_G.checkStrictMode=vG});var R1=P((xG)=>{Object.defineProperty(xG,"__esModule",{value:!0});var S0=p(),PO={data:new S0.Name("data"),valCxt:new S0.Name("valCxt"),instancePath:new S0.Name("instancePath"),parentData:new S0.Name("parentData"),parentDataProperty:new S0.Name("parentDataProperty"),rootData:new S0.Name("rootData"),dynamicAnchors:new S0.Name("dynamicAnchors"),vErrors:new S0.Name("vErrors"),errors:new S0.Name("errors"),this:new S0.Name("this"),self:new S0.Name("self"),scope:new S0.Name("scope"),json:new S0.Name("json"),jsonPos:new S0.Name("jsonPos"),jsonLen:new S0.Name("jsonLen"),jsonPart:new S0.Name("jsonPart")};xG.default=PO});var lX=P((fG)=>{Object.defineProperty(fG,"__esModule",{value:!0});fG.extendErrors=fG.resetErrorsCount=fG.reportExtraError=fG.reportError=fG.keyword$DataError=fG.keywordError=void 0;var a=p(),C8=e(),v0=R1();fG.keywordError={message:({keyword:X})=>a.str`must pass "${X}" keyword validation`};fG.keyword$DataError={message:({keyword:X,schemaType:Q})=>Q?a.str`"${X}" keyword must be ${Q} ($data)`:a.str`"${X}" keyword is invalid ($data)`};function ZO(X,Q=fG.keywordError,$,Y){let{it:W}=X,{gen:J,compositeRule:G,allErrors:H}=W,B=hG(X,Q,$);if(Y!==null&&Y!==void 0?Y:G||H)yG(J,B);else gG(W,a._`[${B}]`)}fG.reportError=ZO;function CO(X,Q=fG.keywordError,$){let{it:Y}=X,{gen:W,compositeRule:J,allErrors:G}=Y,H=hG(X,Q,$);if(yG(W,H),!(J||G))gG(Y,v0.default.vErrors)}fG.reportExtraError=CO;function kO(X,Q){X.assign(v0.default.errors,Q),X.if(a._`${v0.default.vErrors} !== null`,()=>X.if(Q,()=>X.assign(a._`${v0.default.vErrors}.length`,Q),()=>X.assign(v0.default.vErrors,null)))}fG.resetErrorsCount=kO;function vO({gen:X,keyword:Q,schemaValue:$,data:Y,errsCount:W,it:J}){if(W===void 0)throw Error("ajv implementation error");let G=X.name("err");X.forRange("i",W,v0.default.errors,(H)=>{if(X.const(G,a._`${v0.default.vErrors}[${H}]`),X.if(a._`${G}.instancePath === undefined`,()=>X.assign(a._`${G}.instancePath`,(0,a.strConcat)(v0.default.instancePath,J.errorPath))),X.assign(a._`${G}.schemaPath`,a.str`${J.errSchemaPath}/${Q}`),J.opts.verbose)X.assign(a._`${G}.schema`,$),X.assign(a._`${G}.data`,Y)})}fG.extendErrors=vO;function yG(X,Q){let $=X.const("err",Q);X.if(a._`${v0.default.vErrors} === null`,()=>X.assign(v0.default.vErrors,a._`[${$}]`),a._`${v0.default.vErrors}.push(${$})`),X.code(a._`${v0.default.errors}++`)}function gG(X,Q){let{gen:$,validateName:Y,schemaEnv:W}=X;if(W.$async)$.throw(a._`new ${X.ValidationError}(${Q})`);else $.assign(a._`${Y}.errors`,Q),$.return(!1)}var B6={keyword:new a.Name("keyword"),schemaPath:new a.Name("schemaPath"),params:new a.Name("params"),propertyName:new a.Name("propertyName"),message:new a.Name("message"),schema:new a.Name("schema"),parentSchema:new a.Name("parentSchema")};function hG(X,Q,$){let{createErrors:Y}=X.it;if(Y===!1)return a._`{}`;return _O(X,Q,$)}function _O(X,Q,$={}){let{gen:Y,it:W}=X,J=[TO(W,$),xO(X,$)];return yO(X,Q,J),Y.object(...J)}function TO({errorPath:X},{instancePath:Q}){let $=Q?a.str`${X}${(0,C8.getErrorPath)(Q,C8.Type.Str)}`:X;return[v0.default.instancePath,(0,a.strConcat)(v0.default.instancePath,$)]}function xO({keyword:X,it:{errSchemaPath:Q}},{schemaPath:$,parentSchema:Y}){let W=Y?Q:a.str`${Q}/${X}`;if($)W=a.str`${W}${(0,C8.getErrorPath)($,C8.Type.Str)}`;return[B6.schemaPath,W]}function yO(X,{params:Q,message:$},Y){let{keyword:W,data:J,schemaValue:G,it:H}=X,{opts:B,propertyName:z,topSchemaRef:K,schemaPath:V}=H;if(Y.push([B6.keyword,W],[B6.params,typeof Q=="function"?Q(X):Q||a._`{}`]),B.messages)Y.push([B6.message,typeof $=="function"?$(X):$]);if(B.verbose)Y.push([B6.schema,G],[B6.parentSchema,a._`${K}${V}`],[v0.default.data,J]);if(z)Y.push([B6.propertyName,z])}});var pG=P((mG)=>{Object.defineProperty(mG,"__esModule",{value:!0});mG.boolOrEmptySchema=mG.topBoolOrEmptySchema=void 0;var lO=lX(),mO=p(),cO=R1(),pO={message:"boolean schema is false"};function dO(X){let{gen:Q,schema:$,validateName:Y}=X;if($===!1)lG(X,!1);else if(typeof $=="object"&&$.$async===!0)Q.return(cO.default.data);else Q.assign(mO._`${Y}.errors`,null),Q.return(!0)}mG.topBoolOrEmptySchema=dO;function iO(X,Q){let{gen:$,schema:Y}=X;if(Y===!1)$.var(Q,!1),lG(X);else $.var(Q,!0)}mG.boolOrEmptySchema=iO;function lG(X,Q){let{gen:$,data:Y}=X,W={gen:$,keyword:"false schema",data:Y,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:X};(0,lO.reportError)(W,pO,void 0,Q)}});var UY=P((dG)=>{Object.defineProperty(dG,"__esModule",{value:!0});dG.getRules=dG.isJSONType=void 0;var rO=["string","number","integer","boolean","null","object","array"],oO=new Set(rO);function tO(X){return typeof X=="string"&&oO.has(X)}dG.isJSONType=tO;function aO(){let X={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...X,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},X.number,X.string,X.array,X.object],post:{rules:[]},all:{},keywords:{}}}dG.getRules=aO});var VY=P((oG)=>{Object.defineProperty(oG,"__esModule",{value:!0});oG.shouldUseRule=oG.shouldUseGroup=oG.schemaHasRulesForType=void 0;function eO({schema:X,self:Q},$){let Y=Q.RULES.types[$];return Y&&Y!==!0&&nG(X,Y)}oG.schemaHasRulesForType=eO;function nG(X,Q){return Q.rules.some(($)=>rG(X,$))}oG.shouldUseGroup=nG;function rG(X,Q){var $;return X[Q.keyword]!==void 0||(($=Q.definition.implements)===null||$===void 0?void 0:$.some((Y)=>X[Y]!==void 0))}oG.shouldUseRule=rG});var mX=P((X3)=>{Object.defineProperty(X3,"__esModule",{value:!0});X3.reportTypeError=X3.checkDataTypes=X3.checkDataType=X3.coerceAndCheckDataType=X3.getJSONTypes=X3.getSchemaTypes=X3.DataType=void 0;var $D=UY(),YD=VY(),WD=lX(),c=p(),aG=e(),m6;(function(X){X[X.Correct=0]="Correct",X[X.Wrong=1]="Wrong"})(m6||(X3.DataType=m6={}));function JD(X){let Q=sG(X.type);if(Q.includes("null")){if(X.nullable===!1)throw Error("type: null contradicts nullable: false")}else{if(!Q.length&&X.nullable!==void 0)throw Error('"nullable" cannot be used without "type"');if(X.nullable===!0)Q.push("null")}return Q}X3.getSchemaTypes=JD;function sG(X){let Q=Array.isArray(X)?X:X?[X]:[];if(Q.every($D.isJSONType))return Q;throw Error("type must be JSONType or JSONType[]: "+Q.join(","))}X3.getJSONTypes=sG;function GD(X,Q){let{gen:$,data:Y,opts:W}=X,J=HD(Q,W.coerceTypes),G=Q.length>0&&!(J.length===0&&Q.length===1&&(0,YD.schemaHasRulesForType)(X,Q[0]));if(G){let H=qY(Q,Y,W.strictNumbers,m6.Wrong);$.if(H,()=>{if(J.length)BD(X,Q,J);else FY(X)})}return G}X3.coerceAndCheckDataType=GD;var eG=new Set(["string","number","integer","boolean","null"]);function HD(X,Q){return Q?X.filter(($)=>eG.has($)||Q==="array"&&$==="array"):[]}function BD(X,Q,$){let{gen:Y,data:W,opts:J}=X,G=Y.let("dataType",c._`typeof ${W}`),H=Y.let("coerced",c._`undefined`);if(J.coerceTypes==="array")Y.if(c._`${G} == 'object' && Array.isArray(${W}) && ${W}.length == 1`,()=>Y.assign(W,c._`${W}[0]`).assign(G,c._`typeof ${W}`).if(qY(Q,W,J.strictNumbers),()=>Y.assign(H,W)));Y.if(c._`${H} !== undefined`);for(let z of $)if(eG.has(z)||z==="array"&&J.coerceTypes==="array")B(z);Y.else(),FY(X),Y.endIf(),Y.if(c._`${H} !== undefined`,()=>{Y.assign(W,H),zD(X,H)});function B(z){switch(z){case"string":Y.elseIf(c._`${G} == "number" || ${G} == "boolean"`).assign(H,c._`"" + ${W}`).elseIf(c._`${W} === null`).assign(H,c._`""`);return;case"number":Y.elseIf(c._`${G} == "boolean" || ${W} === null
              || (${G} == "string" && ${W} && ${W} == +${W})`).assign(H,c._`+${W}`);return;case"integer":Y.elseIf(c._`${G} === "boolean" || ${W} === null
              || (${G} === "string" && ${W} && ${W} == +${W} && !(${W} % 1))`).assign(H,c._`+${W}`);return;case"boolean":Y.elseIf(c._`${W} === "false" || ${W} === 0 || ${W} === null`).assign(H,!1).elseIf(c._`${W} === "true" || ${W} === 1`).assign(H,!0);return;case"null":Y.elseIf(c._`${W} === "" || ${W} === 0 || ${W} === false`),Y.assign(H,null);return;case"array":Y.elseIf(c._`${G} === "string" || ${G} === "number"
              || ${G} === "boolean" || ${W} === null`).assign(H,c._`[${W}]`)}}}function zD({gen:X,parentData:Q,parentDataProperty:$},Y){X.if(c._`${Q} !== undefined`,()=>X.assign(c._`${Q}[${$}]`,Y))}function LY(X,Q,$,Y=m6.Correct){let W=Y===m6.Correct?c.operators.EQ:c.operators.NEQ,J;switch(X){case"null":return c._`${Q} ${W} null`;case"array":J=c._`Array.isArray(${Q})`;break;case"object":J=c._`${Q} && typeof ${Q} == "object" && !Array.isArray(${Q})`;break;case"integer":J=G(c._`!(${Q} % 1) && !isNaN(${Q})`);break;case"number":J=G();break;default:return c._`typeof ${Q} ${W} ${X}`}return Y===m6.Correct?J:(0,c.not)(J);function G(H=c.nil){return(0,c.and)(c._`typeof ${Q} == "number"`,H,$?c._`isFinite(${Q})`:c.nil)}}X3.checkDataType=LY;function qY(X,Q,$,Y){if(X.length===1)return LY(X[0],Q,$,Y);let W,J=(0,aG.toHash)(X);if(J.array&&J.object){let G=c._`typeof ${Q} != "object"`;W=J.null?G:c._`!${Q} || ${G}`,delete J.null,delete J.array,delete J.object}else W=c.nil;if(J.number)delete J.integer;for(let G in J)W=(0,c.and)(W,LY(G,Q,$,Y));return W}X3.checkDataTypes=qY;var KD={message:({schema:X})=>`must be ${X}`,params:({schema:X,schemaValue:Q})=>typeof X=="string"?c._`{type: ${X}}`:c._`{type: ${Q}}`};function FY(X){let Q=UD(X);(0,WD.reportError)(Q,KD)}X3.reportTypeError=FY;function UD(X){let{gen:Q,data:$,schema:Y}=X,W=(0,aG.schemaRefOrVal)(X,Y,"type");return{gen:Q,keyword:"type",data:$,schema:Y.type,schemaCode:W,schemaValue:W,parentSchema:Y,params:{},it:X}}});var J3=P((Y3)=>{Object.defineProperty(Y3,"__esModule",{value:!0});Y3.assignDefaults=void 0;var c6=p(),DD=e();function wD(X,Q){let{properties:$,items:Y}=X.schema;if(Q==="object"&&$)for(let W in $)$3(X,W,$[W].default);else if(Q==="array"&&Array.isArray(Y))Y.forEach((W,J)=>$3(X,J,W.default))}Y3.assignDefaults=wD;function $3(X,Q,$){let{gen:Y,compositeRule:W,data:J,opts:G}=X;if($===void 0)return;let H=c6._`${J}${(0,c6.getProperty)(Q)}`;if(W){(0,DD.checkStrictMode)(X,`default is ignored for: ${H}`);return}let B=c6._`${H} === undefined`;if(G.useDefaults==="empty")B=c6._`${B} || ${H} === null || ${H} === ""`;Y.if(B,c6._`${H} = ${(0,c6.stringify)($)}`)}});var d0=P((B3)=>{Object.defineProperty(B3,"__esModule",{value:!0});B3.validateUnion=B3.validateArray=B3.usePattern=B3.callValidateCode=B3.schemaProperties=B3.allSchemaProperties=B3.noPropertyInData=B3.propertyInData=B3.isOwnProperty=B3.hasPropFunc=B3.reportMissingProp=B3.checkMissingProp=B3.checkReportMissingProp=void 0;var G0=p(),NY=e(),p1=R1(),AD=e();function MD(X,Q){let{gen:$,data:Y,it:W}=X;$.if(DY($,Y,Q,W.opts.ownProperties),()=>{X.setParams({missingProperty:G0._`${Q}`},!0),X.error()})}B3.checkReportMissingProp=MD;function jD({gen:X,data:Q,it:{opts:$}},Y,W){return(0,G0.or)(...Y.map((J)=>(0,G0.and)(DY(X,Q,J,$.ownProperties),G0._`${W} = ${J}`)))}B3.checkMissingProp=jD;function RD(X,Q){X.setParams({missingProperty:Q},!0),X.error()}B3.reportMissingProp=RD;function G3(X){return X.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:G0._`Object.prototype.hasOwnProperty`})}B3.hasPropFunc=G3;function OY(X,Q,$){return G0._`${G3(X)}.call(${Q}, ${$})`}B3.isOwnProperty=OY;function ID(X,Q,$,Y){let W=G0._`${Q}${(0,G0.getProperty)($)} !== undefined`;return Y?G0._`${W} && ${OY(X,Q,$)}`:W}B3.propertyInData=ID;function DY(X,Q,$,Y){let W=G0._`${Q}${(0,G0.getProperty)($)} === undefined`;return Y?(0,G0.or)(W,(0,G0.not)(OY(X,Q,$))):W}B3.noPropertyInData=DY;function H3(X){return X?Object.keys(X).filter((Q)=>Q!=="__proto__"):[]}B3.allSchemaProperties=H3;function ED(X,Q){return H3(Q).filter(($)=>!(0,NY.alwaysValidSchema)(X,Q[$]))}B3.schemaProperties=ED;function bD({schemaCode:X,data:Q,it:{gen:$,topSchemaRef:Y,schemaPath:W,errorPath:J},it:G},H,B,z){let K=z?G0._`${X}, ${Q}, ${Y}${W}`:Q,V=[[p1.default.instancePath,(0,G0.strConcat)(p1.default.instancePath,J)],[p1.default.parentData,G.parentData],[p1.default.parentDataProperty,G.parentDataProperty],[p1.default.rootData,p1.default.rootData]];if(G.opts.dynamicRef)V.push([p1.default.dynamicAnchors,p1.default.dynamicAnchors]);let L=G0._`${K}, ${$.object(...V)}`;return B!==G0.nil?G0._`${H}.call(${B}, ${L})`:G0._`${H}(${L})`}B3.callValidateCode=bD;var PD=G0._`new RegExp`;function SD({gen:X,it:{opts:Q}},$){let Y=Q.unicodeRegExp?"u":"",{regExp:W}=Q.code,J=W($,Y);return X.scopeValue("pattern",{key:J.toString(),ref:J,code:G0._`${W.code==="new RegExp"?PD:(0,AD.useFunc)(X,W)}(${$}, ${Y})`})}B3.usePattern=SD;function ZD(X){let{gen:Q,data:$,keyword:Y,it:W}=X,J=Q.name("valid");if(W.allErrors){let H=Q.let("valid",!0);return G(()=>Q.assign(H,!1)),H}return Q.var(J,!0),G(()=>Q.break()),J;function G(H){let B=Q.const("len",G0._`${$}.length`);Q.forRange("i",0,B,(z)=>{X.subschema({keyword:Y,dataProp:z,dataPropType:NY.Type.Num},J),Q.if((0,G0.not)(J),H)})}}B3.validateArray=ZD;function CD(X){let{gen:Q,schema:$,keyword:Y,it:W}=X;if(!Array.isArray($))throw Error("ajv implementation error");if($.some((B)=>(0,NY.alwaysValidSchema)(W,B))&&!W.opts.unevaluated)return;let G=Q.let("valid",!1),H=Q.name("_valid");Q.block(()=>$.forEach((B,z)=>{let K=X.subschema({keyword:Y,schemaProp:z,compositeRule:!0},H);if(Q.assign(G,G0._`${G} || ${H}`),!X.mergeValidEvaluated(K,H))Q.if((0,G0.not)(G))})),X.result(G,()=>X.reset(),()=>X.error(!0))}B3.validateUnion=CD});var q3=P((V3)=>{Object.defineProperty(V3,"__esModule",{value:!0});V3.validateKeywordUsage=V3.validSchemaType=V3.funcKeywordCode=V3.macroKeywordCode=void 0;var _0=p(),z6=R1(),cD=d0(),pD=lX();function dD(X,Q){let{gen:$,keyword:Y,schema:W,parentSchema:J,it:G}=X,H=Q.macro.call(G.self,W,J,G),B=U3($,Y,H);if(G.opts.validateSchema!==!1)G.self.validateSchema(H,!0);let z=$.name("valid");X.subschema({schema:H,schemaPath:_0.nil,errSchemaPath:`${G.errSchemaPath}/${Y}`,topSchemaRef:B,compositeRule:!0},z),X.pass(z,()=>X.error(!0))}V3.macroKeywordCode=dD;function iD(X,Q){var $;let{gen:Y,keyword:W,schema:J,parentSchema:G,$data:H,it:B}=X;rD(B,Q);let z=!H&&Q.compile?Q.compile.call(B.self,J,G,B):Q.validate,K=U3(Y,W,z),V=Y.let("valid");X.block$data(V,L),X.ok(($=Q.valid)!==null&&$!==void 0?$:V);function L(){if(Q.errors===!1){if(q(),Q.modifying)K3(X);N(()=>X.error())}else{let w=Q.async?U():F();if(Q.modifying)K3(X);N(()=>nD(X,w))}}function U(){let w=Y.let("ruleErrs",null);return Y.try(()=>q(_0._`await `),(M)=>Y.assign(V,!1).if(_0._`${M} instanceof ${B.ValidationError}`,()=>Y.assign(w,_0._`${M}.errors`),()=>Y.throw(M))),w}function F(){let w=_0._`${K}.errors`;return Y.assign(w,null),q(_0.nil),w}function q(w=Q.async?_0._`await `:_0.nil){let M=B.opts.passContext?z6.default.this:z6.default.self,R=!(("compile"in Q)&&!H||Q.schema===!1);Y.assign(V,_0._`${w}${(0,cD.callValidateCode)(X,K,M,R)}`,Q.modifying)}function N(w){var M;Y.if((0,_0.not)((M=Q.valid)!==null&&M!==void 0?M:V),w)}}V3.funcKeywordCode=iD;function K3(X){let{gen:Q,data:$,it:Y}=X;Q.if(Y.parentData,()=>Q.assign($,_0._`${Y.parentData}[${Y.parentDataProperty}]`))}function nD(X,Q){let{gen:$}=X;$.if(_0._`Array.isArray(${Q})`,()=>{$.assign(z6.default.vErrors,_0._`${z6.default.vErrors} === null ? ${Q} : ${z6.default.vErrors}.concat(${Q})`).assign(z6.default.errors,_0._`${z6.default.vErrors}.length`),(0,pD.extendErrors)(X)},()=>X.error())}function rD({schemaEnv:X},Q){if(Q.async&&!X.$async)throw Error("async keyword in sync schema")}function U3(X,Q,$){if($===void 0)throw Error(`keyword "${Q}" failed to compile`);return X.scopeValue("keyword",typeof $=="function"?{ref:$}:{ref:$,code:(0,_0.stringify)($)})}function oD(X,Q,$=!1){return!Q.length||Q.some((Y)=>Y==="array"?Array.isArray(X):Y==="object"?X&&typeof X=="object"&&!Array.isArray(X):typeof X==Y||$&&typeof X>"u")}V3.validSchemaType=oD;function tD({schema:X,opts:Q,self:$,errSchemaPath:Y},W,J){if(Array.isArray(W.keyword)?!W.keyword.includes(J):W.keyword!==J)throw Error("ajv implementation error");let G=W.dependencies;if(G===null||G===void 0?void 0:G.some((H)=>!Object.prototype.hasOwnProperty.call(X,H)))throw Error(`parent schema must have dependencies of ${J}: ${G.join(",")}`);if(W.validateSchema){if(!W.validateSchema(X[J])){let B=`keyword "${J}" value is invalid at path "${Y}": `+$.errorsText(W.validateSchema.errors);if(Q.validateSchema==="log")$.logger.error(B);else throw Error(B)}}}V3.validateKeywordUsage=tD});var D3=P((N3)=>{Object.defineProperty(N3,"__esModule",{value:!0});N3.extendSubschemaMode=N3.extendSubschemaData=N3.getSubschema=void 0;var K1=p(),F3=e();function Xw(X,{keyword:Q,schemaProp:$,schema:Y,schemaPath:W,errSchemaPath:J,topSchemaRef:G}){if(Q!==void 0&&Y!==void 0)throw Error('both "keyword" and "schema" passed, only one allowed');if(Q!==void 0){let H=X.schema[Q];return $===void 0?{schema:H,schemaPath:K1._`${X.schemaPath}${(0,K1.getProperty)(Q)}`,errSchemaPath:`${X.errSchemaPath}/${Q}`}:{schema:H[$],schemaPath:K1._`${X.schemaPath}${(0,K1.getProperty)(Q)}${(0,K1.getProperty)($)}`,errSchemaPath:`${X.errSchemaPath}/${Q}/${(0,F3.escapeFragment)($)}`}}if(Y!==void 0){if(W===void 0||J===void 0||G===void 0)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:Y,schemaPath:W,topSchemaRef:G,errSchemaPath:J}}throw Error('either "keyword" or "schema" must be passed')}N3.getSubschema=Xw;function Qw(X,Q,{dataProp:$,dataPropType:Y,data:W,dataTypes:J,propertyName:G}){if(W!==void 0&&$!==void 0)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:H}=Q;if($!==void 0){let{errorPath:z,dataPathArr:K,opts:V}=Q,L=H.let("data",K1._`${Q.data}${(0,K1.getProperty)($)}`,!0);B(L),X.errorPath=K1.str`${z}${(0,F3.getErrorPath)($,Y,V.jsPropertySyntax)}`,X.parentDataProperty=K1._`${$}`,X.dataPathArr=[...K,X.parentDataProperty]}if(W!==void 0){let z=W instanceof K1.Name?W:H.let("data",W,!0);if(B(z),G!==void 0)X.propertyName=G}if(J)X.dataTypes=J;function B(z){X.data=z,X.dataLevel=Q.dataLevel+1,X.dataTypes=[],Q.definedProperties=new Set,X.parentData=Q.data,X.dataNames=[...Q.dataNames,z]}}N3.extendSubschemaData=Qw;function $w(X,{jtdDiscriminator:Q,jtdMetadata:$,compositeRule:Y,createErrors:W,allErrors:J}){if(Y!==void 0)X.compositeRule=Y;if(W!==void 0)X.createErrors=W;if(J!==void 0)X.allErrors=J;X.jtdDiscriminator=Q,X.jtdMetadata=$}N3.extendSubschemaMode=$w});var wY=P((G_,w3)=>{w3.exports=function X(Q,$){if(Q===$)return!0;if(Q&&$&&typeof Q=="object"&&typeof $=="object"){if(Q.constructor!==$.constructor)return!1;var Y,W,J;if(Array.isArray(Q)){if(Y=Q.length,Y!=$.length)return!1;for(W=Y;W--!==0;)if(!X(Q[W],$[W]))return!1;return!0}if(Q.constructor===RegExp)return Q.source===$.source&&Q.flags===$.flags;if(Q.valueOf!==Object.prototype.valueOf)return Q.valueOf()===$.valueOf();if(Q.toString!==Object.prototype.toString)return Q.toString()===$.toString();if(J=Object.keys(Q),Y=J.length,Y!==Object.keys($).length)return!1;for(W=Y;W--!==0;)if(!Object.prototype.hasOwnProperty.call($,J[W]))return!1;for(W=Y;W--!==0;){var G=J[W];if(!X(Q[G],$[G]))return!1}return!0}return Q!==Q&&$!==$}});var M3=P((H_,A3)=>{var d1=A3.exports=function(X,Q,$){if(typeof Q=="function")$=Q,Q={};$=Q.cb||$;var Y=typeof $=="function"?$:$.pre||function(){},W=$.post||function(){};k8(Q,Y,W,X,"",X)};d1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};d1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};d1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};d1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function k8(X,Q,$,Y,W,J,G,H,B,z){if(Y&&typeof Y=="object"&&!Array.isArray(Y)){Q(Y,W,J,G,H,B,z);for(var K in Y){var V=Y[K];if(Array.isArray(V)){if(K in d1.arrayKeywords)for(var L=0;L<V.length;L++)k8(X,Q,$,V[L],W+"/"+K+"/"+L,J,W,K,Y,L)}else if(K in d1.propsKeywords){if(V&&typeof V=="object")for(var U in V)k8(X,Q,$,V[U],W+"/"+K+"/"+Jw(U),J,W,K,Y,U)}else if(K in d1.keywords||X.allKeys&&!(K in d1.skipKeywords))k8(X,Q,$,V,W+"/"+K,J,W,K,Y)}$(Y,W,J,G,H,B,z)}}function Jw(X){return X.replace(/~/g,"~0").replace(/\//g,"~1")}});var cX=P((E3)=>{Object.defineProperty(E3,"__esModule",{value:!0});E3.getSchemaRefs=E3.resolveUrl=E3.normalizeId=E3._getFullPath=E3.getFullPath=E3.inlineRef=void 0;var Gw=e(),Hw=wY(),Bw=M3(),zw=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Kw(X,Q=!0){if(typeof X=="boolean")return!0;if(Q===!0)return!AY(X);if(!Q)return!1;return j3(X)<=Q}E3.inlineRef=Kw;var Uw=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function AY(X){for(let Q in X){if(Uw.has(Q))return!0;let $=X[Q];if(Array.isArray($)&&$.some(AY))return!0;if(typeof $=="object"&&AY($))return!0}return!1}function j3(X){let Q=0;for(let $ in X){if($==="$ref")return 1/0;if(Q++,zw.has($))continue;if(typeof X[$]=="object")(0,Gw.eachItem)(X[$],(Y)=>Q+=j3(Y));if(Q===1/0)return 1/0}return Q}function R3(X,Q="",$){if($!==!1)Q=p6(Q);let Y=X.parse(Q);return I3(X,Y)}E3.getFullPath=R3;function I3(X,Q){return X.serialize(Q).split("#")[0]+"#"}E3._getFullPath=I3;var Vw=/#\/?$/;function p6(X){return X?X.replace(Vw,""):""}E3.normalizeId=p6;function Lw(X,Q,$){return $=p6($),X.resolve(Q,$)}E3.resolveUrl=Lw;var qw=/^[a-z_][-a-z0-9._]*$/i;function Fw(X,Q){if(typeof X=="boolean")return{};let{schemaId:$,uriResolver:Y}=this.opts,W=p6(X[$]||Q),J={"":W},G=R3(Y,W,!1),H={},B=new Set;return Bw(X,{allKeys:!0},(V,L,U,F)=>{if(F===void 0)return;let q=G+L,N=J[F];if(typeof V[$]=="string")N=w.call(this,V[$]);M.call(this,V.$anchor),M.call(this,V.$dynamicAnchor),J[L]=N;function w(R){let S=this.opts.uriResolver.resolve;if(R=p6(N?S(N,R):R),B.has(R))throw K(R);B.add(R);let C=this.refs[R];if(typeof C=="string")C=this.refs[C];if(typeof C=="object")z(V,C.schema,R);else if(R!==p6(q))if(R[0]==="#")z(V,H[R],R),H[R]=V;else this.refs[R]=q;return R}function M(R){if(typeof R=="string"){if(!qw.test(R))throw Error(`invalid anchor "${R}"`);w.call(this,`#${R}`)}}}),H;function z(V,L,U){if(L!==void 0&&!Hw(V,L))throw K(U)}function K(V){return Error(`reference "${V}" resolves to more than one schema`)}}E3.getSchemaRefs=Fw});var iX=P((l3)=>{Object.defineProperty(l3,"__esModule",{value:!0});l3.getData=l3.KeywordCxt=l3.validateFunctionCode=void 0;var k3=pG(),P3=mX(),jY=VY(),v8=mX(),Mw=J3(),dX=q3(),MY=D3(),T=p(),u=R1(),jw=cX(),I1=e(),pX=lX();function Rw(X){if(T3(X)){if(x3(X),_3(X)){bw(X);return}}v3(X,()=>(0,k3.topBoolOrEmptySchema)(X))}l3.validateFunctionCode=Rw;function v3({gen:X,validateName:Q,schema:$,schemaEnv:Y,opts:W},J){if(W.code.es5)X.func(Q,T._`${u.default.data}, ${u.default.valCxt}`,Y.$async,()=>{X.code(T._`"use strict"; ${S3($,W)}`),Ew(X,W),X.code(J)});else X.func(Q,T._`${u.default.data}, ${Iw(W)}`,Y.$async,()=>X.code(S3($,W)).code(J))}function Iw(X){return T._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${X.dynamicRef?T._`, ${u.default.dynamicAnchors}={}`:T.nil}}={}`}function Ew(X,Q){X.if(u.default.valCxt,()=>{if(X.var(u.default.instancePath,T._`${u.default.valCxt}.${u.default.instancePath}`),X.var(u.default.parentData,T._`${u.default.valCxt}.${u.default.parentData}`),X.var(u.default.parentDataProperty,T._`${u.default.valCxt}.${u.default.parentDataProperty}`),X.var(u.default.rootData,T._`${u.default.valCxt}.${u.default.rootData}`),Q.dynamicRef)X.var(u.default.dynamicAnchors,T._`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{if(X.var(u.default.instancePath,T._`""`),X.var(u.default.parentData,T._`undefined`),X.var(u.default.parentDataProperty,T._`undefined`),X.var(u.default.rootData,u.default.data),Q.dynamicRef)X.var(u.default.dynamicAnchors,T._`{}`)})}function bw(X){let{schema:Q,opts:$,gen:Y}=X;v3(X,()=>{if($.$comment&&Q.$comment)g3(X);if(kw(X),Y.let(u.default.vErrors,null),Y.let(u.default.errors,0),$.unevaluated)Pw(X);y3(X),Tw(X)});return}function Pw(X){let{gen:Q,validateName:$}=X;X.evaluated=Q.const("evaluated",T._`${$}.evaluated`),Q.if(T._`${X.evaluated}.dynamicProps`,()=>Q.assign(T._`${X.evaluated}.props`,T._`undefined`)),Q.if(T._`${X.evaluated}.dynamicItems`,()=>Q.assign(T._`${X.evaluated}.items`,T._`undefined`))}function S3(X,Q){let $=typeof X=="object"&&X[Q.schemaId];return $&&(Q.code.source||Q.code.process)?T._`/*# sourceURL=${$} */`:T.nil}function Sw(X,Q){if(T3(X)){if(x3(X),_3(X)){Zw(X,Q);return}}(0,k3.boolOrEmptySchema)(X,Q)}function _3({schema:X,self:Q}){if(typeof X=="boolean")return!X;for(let $ in X)if(Q.RULES.all[$])return!0;return!1}function T3(X){return typeof X.schema!="boolean"}function Zw(X,Q){let{schema:$,gen:Y,opts:W}=X;if(W.$comment&&$.$comment)g3(X);vw(X),_w(X);let J=Y.const("_errs",u.default.errors);y3(X,J),Y.var(Q,T._`${J} === ${u.default.errors}`)}function x3(X){(0,I1.checkUnknownRules)(X),Cw(X)}function y3(X,Q){if(X.opts.jtd)return Z3(X,[],!1,Q);let $=(0,P3.getSchemaTypes)(X.schema),Y=(0,P3.coerceAndCheckDataType)(X,$);Z3(X,$,!Y,Q)}function Cw(X){let{schema:Q,errSchemaPath:$,opts:Y,self:W}=X;if(Q.$ref&&Y.ignoreKeywordsWithRef&&(0,I1.schemaHasRulesButRef)(Q,W.RULES))W.logger.warn(`$ref: keywords ignored in schema at path "${$}"`)}function kw(X){let{schema:Q,opts:$}=X;if(Q.default!==void 0&&$.useDefaults&&$.strictSchema)(0,I1.checkStrictMode)(X,"default is ignored in the schema root")}function vw(X){let Q=X.schema[X.opts.schemaId];if(Q)X.baseId=(0,jw.resolveUrl)(X.opts.uriResolver,X.baseId,Q)}function _w(X){if(X.schema.$async&&!X.schemaEnv.$async)throw Error("async schema in sync schema")}function g3({gen:X,schemaEnv:Q,schema:$,errSchemaPath:Y,opts:W}){let J=$.$comment;if(W.$comment===!0)X.code(T._`${u.default.self}.logger.log(${J})`);else if(typeof W.$comment=="function"){let G=T.str`${Y}/$comment`,H=X.scopeValue("root",{ref:Q.root});X.code(T._`${u.default.self}.opts.$comment(${J}, ${G}, ${H}.schema)`)}}function Tw(X){let{gen:Q,schemaEnv:$,validateName:Y,ValidationError:W,opts:J}=X;if($.$async)Q.if(T._`${u.default.errors} === 0`,()=>Q.return(u.default.data),()=>Q.throw(T._`new ${W}(${u.default.vErrors})`));else{if(Q.assign(T._`${Y}.errors`,u.default.vErrors),J.unevaluated)xw(X);Q.return(T._`${u.default.errors} === 0`)}}function xw({gen:X,evaluated:Q,props:$,items:Y}){if($ instanceof T.Name)X.assign(T._`${Q}.props`,$);if(Y instanceof T.Name)X.assign(T._`${Q}.items`,Y)}function Z3(X,Q,$,Y){let{gen:W,schema:J,data:G,allErrors:H,opts:B,self:z}=X,{RULES:K}=z;if(J.$ref&&(B.ignoreKeywordsWithRef||!(0,I1.schemaHasRulesButRef)(J,K))){W.block(()=>f3(X,"$ref",K.all.$ref.definition));return}if(!B.jtd)yw(X,Q);W.block(()=>{for(let L of K.rules)V(L);V(K.post)});function V(L){if(!(0,jY.shouldUseGroup)(J,L))return;if(L.type){if(W.if((0,v8.checkDataType)(L.type,G,B.strictNumbers)),C3(X,L),Q.length===1&&Q[0]===L.type&&$)W.else(),(0,v8.reportTypeError)(X);W.endIf()}else C3(X,L);if(!H)W.if(T._`${u.default.errors} === ${Y||0}`)}}function C3(X,Q){let{gen:$,schema:Y,opts:{useDefaults:W}}=X;if(W)(0,Mw.assignDefaults)(X,Q.type);$.block(()=>{for(let J of Q.rules)if((0,jY.shouldUseRule)(Y,J))f3(X,J.keyword,J.definition,Q.type)})}function yw(X,Q){if(X.schemaEnv.meta||!X.opts.strictTypes)return;if(gw(X,Q),!X.opts.allowUnionTypes)hw(X,Q);fw(X,X.dataTypes)}function gw(X,Q){if(!Q.length)return;if(!X.dataTypes.length){X.dataTypes=Q;return}Q.forEach(($)=>{if(!h3(X.dataTypes,$))RY(X,`type "${$}" not allowed by context "${X.dataTypes.join(",")}"`)}),lw(X,Q)}function hw(X,Q){if(Q.length>1&&!(Q.length===2&&Q.includes("null")))RY(X,"use allowUnionTypes to allow union type keyword")}function fw(X,Q){let $=X.self.RULES.all;for(let Y in $){let W=$[Y];if(typeof W=="object"&&(0,jY.shouldUseRule)(X.schema,W)){let{type:J}=W.definition;if(J.length&&!J.some((G)=>uw(Q,G)))RY(X,`missing type "${J.join(",")}" for keyword "${Y}"`)}}}function uw(X,Q){return X.includes(Q)||Q==="number"&&X.includes("integer")}function h3(X,Q){return X.includes(Q)||Q==="integer"&&X.includes("number")}function lw(X,Q){let $=[];for(let Y of X.dataTypes)if(h3(Q,Y))$.push(Y);else if(Q.includes("integer")&&Y==="number")$.push("integer");X.dataTypes=$}function RY(X,Q){let $=X.schemaEnv.baseId+X.errSchemaPath;Q+=` at "${$}" (strictTypes)`,(0,I1.checkStrictMode)(X,Q,X.opts.strictTypes)}class IY{constructor(X,Q,$){if((0,dX.validateKeywordUsage)(X,Q,$),this.gen=X.gen,this.allErrors=X.allErrors,this.keyword=$,this.data=X.data,this.schema=X.schema[$],this.$data=Q.$data&&X.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,I1.schemaRefOrVal)(X,this.schema,$,this.$data),this.schemaType=Q.schemaType,this.parentSchema=X.schema,this.params={},this.it=X,this.def=Q,this.$data)this.schemaCode=X.gen.const("vSchema",u3(this.$data,X));else if(this.schemaCode=this.schemaValue,!(0,dX.validSchemaType)(this.schema,Q.schemaType,Q.allowUndefined))throw Error(`${$} value must be ${JSON.stringify(Q.schemaType)}`);if("code"in Q?Q.trackErrors:Q.errors!==!1)this.errsCount=X.gen.const("_errs",u.default.errors)}result(X,Q,$){this.failResult((0,T.not)(X),Q,$)}failResult(X,Q,$){if(this.gen.if(X),$)$();else this.error();if(Q){if(this.gen.else(),Q(),this.allErrors)this.gen.endIf()}else if(this.allErrors)this.gen.endIf();else this.gen.else()}pass(X,Q){this.failResult((0,T.not)(X),void 0,Q)}fail(X){if(X===void 0){if(this.error(),!this.allErrors)this.gen.if(!1);return}if(this.gen.if(X),this.error(),this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(X){if(!this.$data)return this.fail(X);let{schemaCode:Q}=this;this.fail(T._`${Q} !== undefined && (${(0,T.or)(this.invalid$data(),X)})`)}error(X,Q,$){if(Q){this.setParams(Q),this._error(X,$),this.setParams({});return}this._error(X,$)}_error(X,Q){(X?pX.reportExtraError:pX.reportError)(this,this.def.error,Q)}$dataError(){(0,pX.reportError)(this,this.def.$dataError||pX.keyword$DataError)}reset(){if(this.errsCount===void 0)throw Error('add "trackErrors" to keyword definition');(0,pX.resetErrorsCount)(this.gen,this.errsCount)}ok(X){if(!this.allErrors)this.gen.if(X)}setParams(X,Q){if(Q)Object.assign(this.params,X);else this.params=X}block$data(X,Q,$=T.nil){this.gen.block(()=>{this.check$data(X,$),Q()})}check$data(X=T.nil,Q=T.nil){if(!this.$data)return;let{gen:$,schemaCode:Y,schemaType:W,def:J}=this;if($.if((0,T.or)(T._`${Y} === undefined`,Q)),X!==T.nil)$.assign(X,!0);if(W.length||J.validateSchema){if($.elseIf(this.invalid$data()),this.$dataError(),X!==T.nil)$.assign(X,!1)}$.else()}invalid$data(){let{gen:X,schemaCode:Q,schemaType:$,def:Y,it:W}=this;return(0,T.or)(J(),G());function J(){if($.length){if(!(Q instanceof T.Name))throw Error("ajv implementation error");let H=Array.isArray($)?$:[$];return T._`${(0,v8.checkDataTypes)(H,Q,W.opts.strictNumbers,v8.DataType.Wrong)}`}return T.nil}function G(){if(Y.validateSchema){let H=X.scopeValue("validate$data",{ref:Y.validateSchema});return T._`!${H}(${Q})`}return T.nil}}subschema(X,Q){let $=(0,MY.getSubschema)(this.it,X);(0,MY.extendSubschemaData)($,this.it,X),(0,MY.extendSubschemaMode)($,X);let Y={...this.it,...$,items:void 0,props:void 0};return Sw(Y,Q),Y}mergeEvaluated(X,Q){let{it:$,gen:Y}=this;if(!$.opts.unevaluated)return;if($.props!==!0&&X.props!==void 0)$.props=I1.mergeEvaluated.props(Y,X.props,$.props,Q);if($.items!==!0&&X.items!==void 0)$.items=I1.mergeEvaluated.items(Y,X.items,$.items,Q)}mergeValidEvaluated(X,Q){let{it:$,gen:Y}=this;if($.opts.unevaluated&&($.props!==!0||$.items!==!0))return Y.if(Q,()=>this.mergeEvaluated(X,T.Name)),!0}}l3.KeywordCxt=IY;function f3(X,Q,$,Y){let W=new IY(X,$,Q);if("code"in $)$.code(W,Y);else if(W.$data&&$.validate)(0,dX.funcKeywordCode)(W,$);else if("macro"in $)(0,dX.macroKeywordCode)(W,$);else if($.compile||$.validate)(0,dX.funcKeywordCode)(W,$)}var mw=/^\/(?:[^~]|~0|~1)*$/,cw=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function u3(X,{dataLevel:Q,dataNames:$,dataPathArr:Y}){let W,J;if(X==="")return u.default.rootData;if(X[0]==="/"){if(!mw.test(X))throw Error(`Invalid JSON-pointer: ${X}`);W=X,J=u.default.rootData}else{let z=cw.exec(X);if(!z)throw Error(`Invalid JSON-pointer: ${X}`);let K=+z[1];if(W=z[2],W==="#"){if(K>=Q)throw Error(B("property/index",K));return Y[Q-K]}if(K>Q)throw Error(B("data",K));if(J=$[Q-K],!W)return J}let G=J,H=W.split("/");for(let z of H)if(z)J=T._`${J}${(0,T.getProperty)((0,I1.unescapeJsonPointer)(z))}`,G=T._`${G} && ${J}`;return G;function B(z,K){return`Cannot access ${z} ${K} levels up, current level is ${Q}`}}l3.getData=u3});var _8=P((p3)=>{Object.defineProperty(p3,"__esModule",{value:!0});class c3 extends Error{constructor(X){super("validation failed");this.errors=X,this.ajv=this.validation=!0}}p3.default=c3});var nX=P((i3)=>{Object.defineProperty(i3,"__esModule",{value:!0});var EY=cX();class d3 extends Error{constructor(X,Q,$,Y){super(Y||`can't resolve reference ${$} from id ${Q}`);this.missingRef=(0,EY.resolveUrl)(X,Q,$),this.missingSchema=(0,EY.normalizeId)((0,EY.getFullPath)(X,this.missingRef))}}i3.default=d3});var x8=P((o3)=>{Object.defineProperty(o3,"__esModule",{value:!0});o3.resolveSchema=o3.getCompilingSchema=o3.resolveRef=o3.compileSchema=o3.SchemaEnv=void 0;var X1=p(),rw=_8(),K6=R1(),Q1=cX(),n3=e(),ow=iX();class rX{constructor(X){var Q;this.refs={},this.dynamicAnchors={};let $;if(typeof X.schema=="object")$=X.schema;this.schema=X.schema,this.schemaId=X.schemaId,this.root=X.root||this,this.baseId=(Q=X.baseId)!==null&&Q!==void 0?Q:(0,Q1.normalizeId)($===null||$===void 0?void 0:$[X.schemaId||"$id"]),this.schemaPath=X.schemaPath,this.localRefs=X.localRefs,this.meta=X.meta,this.$async=$===null||$===void 0?void 0:$.$async,this.refs={}}}o3.SchemaEnv=rX;function PY(X){let Q=r3.call(this,X);if(Q)return Q;let $=(0,Q1.getFullPath)(this.opts.uriResolver,X.root.baseId),{es5:Y,lines:W}=this.opts.code,{ownProperties:J}=this.opts,G=new X1.CodeGen(this.scope,{es5:Y,lines:W,ownProperties:J}),H;if(X.$async)H=G.scopeValue("Error",{ref:rw.default,code:X1._`require("ajv/dist/runtime/validation_error").default`});let B=G.scopeName("validate");X.validateName=B;let z={gen:G,allErrors:this.opts.allErrors,data:K6.default.data,parentData:K6.default.parentData,parentDataProperty:K6.default.parentDataProperty,dataNames:[K6.default.data],dataPathArr:[X1.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:G.scopeValue("schema",this.opts.code.source===!0?{ref:X.schema,code:(0,X1.stringify)(X.schema)}:{ref:X.schema}),validateName:B,ValidationError:H,schema:X.schema,schemaEnv:X,rootId:$,baseId:X.baseId||$,schemaPath:X1.nil,errSchemaPath:X.schemaPath||(this.opts.jtd?"":"#"),errorPath:X1._`""`,opts:this.opts,self:this},K;try{this._compilations.add(X),(0,ow.validateFunctionCode)(z),G.optimize(this.opts.code.optimize);let V=G.toString();if(K=`${G.scopeRefs(K6.default.scope)}return ${V}`,this.opts.code.process)K=this.opts.code.process(K,X);let U=Function(`${K6.default.self}`,`${K6.default.scope}`,K)(this,this.scope.get());if(this.scope.value(B,{ref:U}),U.errors=null,U.schema=X.schema,U.schemaEnv=X,X.$async)U.$async=!0;if(this.opts.code.source===!0)U.source={validateName:B,validateCode:V,scopeValues:G._values};if(this.opts.unevaluated){let{props:F,items:q}=z;if(U.evaluated={props:F instanceof X1.Name?void 0:F,items:q instanceof X1.Name?void 0:q,dynamicProps:F instanceof X1.Name,dynamicItems:q instanceof X1.Name},U.source)U.source.evaluated=(0,X1.stringify)(U.evaluated)}return X.validate=U,X}catch(V){if(delete X.validate,delete X.validateName,K)this.logger.error("Error compiling schema, function code:",K);throw V}finally{this._compilations.delete(X)}}o3.compileSchema=PY;function tw(X,Q,$){var Y;$=(0,Q1.resolveUrl)(this.opts.uriResolver,Q,$);let W=X.refs[$];if(W)return W;let J=ew.call(this,X,$);if(J===void 0){let G=(Y=X.localRefs)===null||Y===void 0?void 0:Y[$],{schemaId:H}=this.opts;if(G)J=new rX({schema:G,schemaId:H,root:X,baseId:Q})}if(J===void 0)return;return X.refs[$]=aw.call(this,J)}o3.resolveRef=tw;function aw(X){if((0,Q1.inlineRef)(X.schema,this.opts.inlineRefs))return X.schema;return X.validate?X:PY.call(this,X)}function r3(X){for(let Q of this._compilations)if(sw(Q,X))return Q}o3.getCompilingSchema=r3;function sw(X,Q){return X.schema===Q.schema&&X.root===Q.root&&X.baseId===Q.baseId}function ew(X,Q){let $;while(typeof($=this.refs[Q])=="string")Q=$;return $||this.schemas[Q]||T8.call(this,X,Q)}function T8(X,Q){let $=this.opts.uriResolver.parse(Q),Y=(0,Q1._getFullPath)(this.opts.uriResolver,$),W=(0,Q1.getFullPath)(this.opts.uriResolver,X.baseId,void 0);if(Object.keys(X.schema).length>0&&Y===W)return bY.call(this,$,X);let J=(0,Q1.normalizeId)(Y),G=this.refs[J]||this.schemas[J];if(typeof G=="string"){let H=T8.call(this,X,G);if(typeof(H===null||H===void 0?void 0:H.schema)!=="object")return;return bY.call(this,$,H)}if(typeof(G===null||G===void 0?void 0:G.schema)!=="object")return;if(!G.validate)PY.call(this,G);if(J===(0,Q1.normalizeId)(Q)){let{schema:H}=G,{schemaId:B}=this.opts,z=H[B];if(z)W=(0,Q1.resolveUrl)(this.opts.uriResolver,W,z);return new rX({schema:H,schemaId:B,root:X,baseId:W})}return bY.call(this,$,G)}o3.resolveSchema=T8;var XA=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function bY(X,{baseId:Q,schema:$,root:Y}){var W;if(((W=X.fragment)===null||W===void 0?void 0:W[0])!=="/")return;for(let H of X.fragment.slice(1).split("/")){if(typeof $==="boolean")return;let B=$[(0,n3.unescapeFragment)(H)];if(B===void 0)return;$=B;let z=typeof $==="object"&&$[this.opts.schemaId];if(!XA.has(H)&&z)Q=(0,Q1.resolveUrl)(this.opts.uriResolver,Q,z)}let J;if(typeof $!="boolean"&&$.$ref&&!(0,n3.schemaHasRulesButRef)($,this.RULES)){let H=(0,Q1.resolveUrl)(this.opts.uriResolver,Q,$.$ref);J=T8.call(this,Y,H)}let{schemaId:G}=this.opts;if(J=J||new rX({schema:$,schemaId:G,root:Y,baseId:Q}),J.schema!==J.root.schema)return J;return}});var a3=P((L_,JA)=>{JA.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var e3=P((q_,s3)=>{var GA={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};s3.exports={HEX:GA}});var HH=P((F_,GH)=>{var{HEX:HA}=e3(),BA=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function YH(X){if(JH(X,".")<3)return{host:X,isIPV4:!1};let Q=X.match(BA)||[],[$]=Q;if($)return{host:KA($,"."),isIPV4:!0};else return{host:X,isIPV4:!1}}function SY(X,Q=!1){let $="",Y=!0;for(let W of X){if(HA[W]===void 0)return;if(W!=="0"&&Y===!0)Y=!1;if(!Y)$+=W}if(Q&&$.length===0)$="0";return $}function zA(X){let Q=0,$={error:!1,address:"",zone:""},Y=[],W=[],J=!1,G=!1,H=!1;function B(){if(W.length){if(J===!1){let z=SY(W);if(z!==void 0)Y.push(z);else return $.error=!0,!1}W.length=0}return!0}for(let z=0;z<X.length;z++){let K=X[z];if(K==="["||K==="]")continue;if(K===":"){if(G===!0)H=!0;if(!B())break;if(Q++,Y.push(":"),Q>7){$.error=!0;break}if(z-1>=0&&X[z-1]===":")G=!0;continue}else if(K==="%"){if(!B())break;J=!0}else{W.push(K);continue}}if(W.length)if(J)$.zone=W.join("");else if(H)Y.push(W.join(""));else Y.push(SY(W));return $.address=Y.join(""),$}function WH(X){if(JH(X,":")<2)return{host:X,isIPV6:!1};let Q=zA(X);if(!Q.error){let{address:$,address:Y}=Q;if(Q.zone)$+="%"+Q.zone,Y+="%25"+Q.zone;return{host:$,escapedHost:Y,isIPV6:!0}}else return{host:X,isIPV6:!1}}function KA(X,Q){let $="",Y=!0,W=X.length;for(let J=0;J<W;J++){let G=X[J];if(G==="0"&&Y){if(J+1<=W&&X[J+1]===Q||J+1===W)$+=G,Y=!1}else{if(G===Q)Y=!0;else Y=!1;$+=G}}return $}function JH(X,Q){let $=0;for(let Y=0;Y<X.length;Y++)if(X[Y]===Q)$++;return $}var XH=/^\.\.?\//u,QH=/^\/\.(?:\/|$)/u,$H=/^\/\.\.(?:\/|$)/u,UA=/^\/?(?:.|\n)*?(?=\/|$)/u;function VA(X){let Q=[];while(X.length)if(X.match(XH))X=X.replace(XH,"");else if(X.match(QH))X=X.replace(QH,"/");else if(X.match($H))X=X.replace($H,"/"),Q.pop();else if(X==="."||X==="..")X="";else{let $=X.match(UA);if($){let Y=$[0];X=X.slice(Y.length),Q.push(Y)}else throw Error("Unexpected dot segment condition")}return Q.join("")}function LA(X,Q){let $=Q!==!0?escape:unescape;if(X.scheme!==void 0)X.scheme=$(X.scheme);if(X.userinfo!==void 0)X.userinfo=$(X.userinfo);if(X.host!==void 0)X.host=$(X.host);if(X.path!==void 0)X.path=$(X.path);if(X.query!==void 0)X.query=$(X.query);if(X.fragment!==void 0)X.fragment=$(X.fragment);return X}function qA(X){let Q=[];if(X.userinfo!==void 0)Q.push(X.userinfo),Q.push("@");if(X.host!==void 0){let $=unescape(X.host),Y=YH($);if(Y.isIPV4)$=Y.host;else{let W=WH(Y.host);if(W.isIPV6===!0)$=`[${W.escapedHost}]`;else $=X.host}Q.push($)}if(typeof X.port==="number"||typeof X.port==="string")Q.push(":"),Q.push(String(X.port));return Q.length?Q.join(""):void 0}GH.exports={recomposeAuthority:qA,normalizeComponentEncoding:LA,removeDotSegments:VA,normalizeIPv4:YH,normalizeIPv6:WH,stringArrayToHexStripped:SY}});var LH=P((N_,VH)=>{var FA=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,NA=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function BH(X){return typeof X.secure==="boolean"?X.secure:String(X.scheme).toLowerCase()==="wss"}function zH(X){if(!X.host)X.error=X.error||"HTTP URIs must have a host.";return X}function KH(X){let Q=String(X.scheme).toLowerCase()==="https";if(X.port===(Q?443:80)||X.port==="")X.port=void 0;if(!X.path)X.path="/";return X}function OA(X){return X.secure=BH(X),X.resourceName=(X.path||"/")+(X.query?"?"+X.query:""),X.path=void 0,X.query=void 0,X}function DA(X){if(X.port===(BH(X)?443:80)||X.port==="")X.port=void 0;if(typeof X.secure==="boolean")X.scheme=X.secure?"wss":"ws",X.secure=void 0;if(X.resourceName){let[Q,$]=X.resourceName.split("?");X.path=Q&&Q!=="/"?Q:void 0,X.query=$,X.resourceName=void 0}return X.fragment=void 0,X}function wA(X,Q){if(!X.path)return X.error="URN can not be parsed",X;let $=X.path.match(NA);if($){let Y=Q.scheme||X.scheme||"urn";X.nid=$[1].toLowerCase(),X.nss=$[2];let W=`${Y}:${Q.nid||X.nid}`,J=ZY[W];if(X.path=void 0,J)X=J.parse(X,Q)}else X.error=X.error||"URN can not be parsed.";return X}function AA(X,Q){let $=Q.scheme||X.scheme||"urn",Y=X.nid.toLowerCase(),W=`${$}:${Q.nid||Y}`,J=ZY[W];if(J)X=J.serialize(X,Q);let G=X,H=X.nss;return G.path=`${Y||Q.nid}:${H}`,Q.skipEscape=!0,G}function MA(X,Q){let $=X;if($.uuid=$.nss,$.nss=void 0,!Q.tolerant&&(!$.uuid||!FA.test($.uuid)))$.error=$.error||"UUID is not valid.";return $}function jA(X){let Q=X;return Q.nss=(X.uuid||"").toLowerCase(),Q}var UH={scheme:"http",domainHost:!0,parse:zH,serialize:KH},RA={scheme:"https",domainHost:UH.domainHost,parse:zH,serialize:KH},y8={scheme:"ws",domainHost:!0,parse:OA,serialize:DA},IA={scheme:"wss",domainHost:y8.domainHost,parse:y8.parse,serialize:y8.serialize},EA={scheme:"urn",parse:wA,serialize:AA,skipNormalize:!0},bA={scheme:"urn:uuid",parse:MA,serialize:jA,skipNormalize:!0},ZY={http:UH,https:RA,ws:y8,wss:IA,urn:EA,"urn:uuid":bA};VH.exports=ZY});var FH=P((O_,h8)=>{var{normalizeIPv6:PA,normalizeIPv4:SA,removeDotSegments:oX,recomposeAuthority:ZA,normalizeComponentEncoding:g8}=HH(),CY=LH();function CA(X,Q){if(typeof X==="string")X=U1(E1(X,Q),Q);else if(typeof X==="object")X=E1(U1(X,Q),Q);return X}function kA(X,Q,$){let Y=Object.assign({scheme:"null"},$),W=qH(E1(X,Y),E1(Q,Y),Y,!0);return U1(W,{...Y,skipEscape:!0})}function qH(X,Q,$,Y){let W={};if(!Y)X=E1(U1(X,$),$),Q=E1(U1(Q,$),$);if($=$||{},!$.tolerant&&Q.scheme)W.scheme=Q.scheme,W.userinfo=Q.userinfo,W.host=Q.host,W.port=Q.port,W.path=oX(Q.path||""),W.query=Q.query;else{if(Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)W.userinfo=Q.userinfo,W.host=Q.host,W.port=Q.port,W.path=oX(Q.path||""),W.query=Q.query;else{if(!Q.path)if(W.path=X.path,Q.query!==void 0)W.query=Q.query;else W.query=X.query;else{if(Q.path.charAt(0)==="/")W.path=oX(Q.path);else{if((X.userinfo!==void 0||X.host!==void 0||X.port!==void 0)&&!X.path)W.path="/"+Q.path;else if(!X.path)W.path=Q.path;else W.path=X.path.slice(0,X.path.lastIndexOf("/")+1)+Q.path;W.path=oX(W.path)}W.query=Q.query}W.userinfo=X.userinfo,W.host=X.host,W.port=X.port}W.scheme=X.scheme}return W.fragment=Q.fragment,W}function vA(X,Q,$){if(typeof X==="string")X=unescape(X),X=U1(g8(E1(X,$),!0),{...$,skipEscape:!0});else if(typeof X==="object")X=U1(g8(X,!0),{...$,skipEscape:!0});if(typeof Q==="string")Q=unescape(Q),Q=U1(g8(E1(Q,$),!0),{...$,skipEscape:!0});else if(typeof Q==="object")Q=U1(g8(Q,!0),{...$,skipEscape:!0});return X.toLowerCase()===Q.toLowerCase()}function U1(X,Q){let $={host:X.host,scheme:X.scheme,userinfo:X.userinfo,port:X.port,path:X.path,query:X.query,nid:X.nid,nss:X.nss,uuid:X.uuid,fragment:X.fragment,reference:X.reference,resourceName:X.resourceName,secure:X.secure,error:""},Y=Object.assign({},Q),W=[],J=CY[(Y.scheme||$.scheme||"").toLowerCase()];if(J&&J.serialize)J.serialize($,Y);if($.path!==void 0)if(!Y.skipEscape){if($.path=escape($.path),$.scheme!==void 0)$.path=$.path.split("%3A").join(":")}else $.path=unescape($.path);if(Y.reference!=="suffix"&&$.scheme)W.push($.scheme,":");let G=ZA($);if(G!==void 0){if(Y.reference!=="suffix")W.push("//");if(W.push(G),$.path&&$.path.charAt(0)!=="/")W.push("/")}if($.path!==void 0){let H=$.path;if(!Y.absolutePath&&(!J||!J.absolutePath))H=oX(H);if(G===void 0)H=H.replace(/^\/\//u,"/%2F");W.push(H)}if($.query!==void 0)W.push("?",$.query);if($.fragment!==void 0)W.push("#",$.fragment);return W.join("")}var _A=Array.from({length:127},(X,Q)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(Q)));function TA(X){let Q=0;for(let $=0,Y=X.length;$<Y;++$)if(Q=X.charCodeAt($),Q>126||_A[Q])return!0;return!1}var xA=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function E1(X,Q){let $=Object.assign({},Q),Y={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},W=X.indexOf("%")!==-1,J=!1;if($.reference==="suffix")X=($.scheme?$.scheme+":":"")+"//"+X;let G=X.match(xA);if(G){if(Y.scheme=G[1],Y.userinfo=G[3],Y.host=G[4],Y.port=parseInt(G[5],10),Y.path=G[6]||"",Y.query=G[7],Y.fragment=G[8],isNaN(Y.port))Y.port=G[5];if(Y.host){let B=SA(Y.host);if(B.isIPV4===!1){let z=PA(B.host);Y.host=z.host.toLowerCase(),J=z.isIPV6}else Y.host=B.host,J=!0}if(Y.scheme===void 0&&Y.userinfo===void 0&&Y.host===void 0&&Y.port===void 0&&Y.query===void 0&&!Y.path)Y.reference="same-document";else if(Y.scheme===void 0)Y.reference="relative";else if(Y.fragment===void 0)Y.reference="absolute";else Y.reference="uri";if($.reference&&$.reference!=="suffix"&&$.reference!==Y.reference)Y.error=Y.error||"URI is not a "+$.reference+" reference.";let H=CY[($.scheme||Y.scheme||"").toLowerCase()];if(!$.unicodeSupport&&(!H||!H.unicodeSupport)){if(Y.host&&($.domainHost||H&&H.domainHost)&&J===!1&&TA(Y.host))try{Y.host=URL.domainToASCII(Y.host.toLowerCase())}catch(B){Y.error=Y.error||"Host's domain name can not be converted to ASCII: "+B}}if(!H||H&&!H.skipNormalize){if(W&&Y.scheme!==void 0)Y.scheme=unescape(Y.scheme);if(W&&Y.host!==void 0)Y.host=unescape(Y.host);if(Y.path)Y.path=escape(unescape(Y.path));if(Y.fragment)Y.fragment=encodeURI(decodeURIComponent(Y.fragment))}if(H&&H.parse)H.parse(Y,$)}else Y.error=Y.error||"URI can not be parsed.";return Y}var kY={SCHEMES:CY,normalize:CA,resolve:kA,resolveComponents:qH,equal:vA,serialize:U1,parse:E1};h8.exports=kY;h8.exports.default=kY;h8.exports.fastUri=kY});var DH=P((OH)=>{Object.defineProperty(OH,"__esModule",{value:!0});var NH=FH();NH.code='require("ajv/dist/runtime/uri").default';OH.default=NH});var bH=P((b1)=>{Object.defineProperty(b1,"__esModule",{value:!0});b1.CodeGen=b1.Name=b1.nil=b1.stringify=b1.str=b1._=b1.KeywordCxt=void 0;var gA=iX();Object.defineProperty(b1,"KeywordCxt",{enumerable:!0,get:function(){return gA.KeywordCxt}});var d6=p();Object.defineProperty(b1,"_",{enumerable:!0,get:function(){return d6._}});Object.defineProperty(b1,"str",{enumerable:!0,get:function(){return d6.str}});Object.defineProperty(b1,"stringify",{enumerable:!0,get:function(){return d6.stringify}});Object.defineProperty(b1,"nil",{enumerable:!0,get:function(){return d6.nil}});Object.defineProperty(b1,"Name",{enumerable:!0,get:function(){return d6.Name}});Object.defineProperty(b1,"CodeGen",{enumerable:!0,get:function(){return d6.CodeGen}});var hA=_8(),RH=nX(),fA=UY(),tX=x8(),uA=p(),aX=cX(),f8=mX(),_Y=e(),wH=a3(),lA=DH(),IH=(X,Q)=>new RegExp(X,Q);IH.code="new RegExp";var mA=["removeAdditional","useDefaults","coerceTypes"],cA=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),pA={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},dA={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},AH=200;function iA(X){var Q,$,Y,W,J,G,H,B,z,K,V,L,U,F,q,N,w,M,R,S,C,K0,U0,s,D0;let q0=X.strict,L1=(Q=X.code)===null||Q===void 0?void 0:Q.optimize,P1=L1===!0||L1===void 0?1:L1||0,o1=(Y=($=X.code)===null||$===void 0?void 0:$.regExp)!==null&&Y!==void 0?Y:IH,m=(W=X.uriResolver)!==null&&W!==void 0?W:lA.default;return{strictSchema:(G=(J=X.strictSchema)!==null&&J!==void 0?J:q0)!==null&&G!==void 0?G:!0,strictNumbers:(B=(H=X.strictNumbers)!==null&&H!==void 0?H:q0)!==null&&B!==void 0?B:!0,strictTypes:(K=(z=X.strictTypes)!==null&&z!==void 0?z:q0)!==null&&K!==void 0?K:"log",strictTuples:(L=(V=X.strictTuples)!==null&&V!==void 0?V:q0)!==null&&L!==void 0?L:"log",strictRequired:(F=(U=X.strictRequired)!==null&&U!==void 0?U:q0)!==null&&F!==void 0?F:!1,code:X.code?{...X.code,optimize:P1,regExp:o1}:{optimize:P1,regExp:o1},loopRequired:(q=X.loopRequired)!==null&&q!==void 0?q:AH,loopEnum:(N=X.loopEnum)!==null&&N!==void 0?N:AH,meta:(w=X.meta)!==null&&w!==void 0?w:!0,messages:(M=X.messages)!==null&&M!==void 0?M:!0,inlineRefs:(R=X.inlineRefs)!==null&&R!==void 0?R:!0,schemaId:(S=X.schemaId)!==null&&S!==void 0?S:"$id",addUsedSchema:(C=X.addUsedSchema)!==null&&C!==void 0?C:!0,validateSchema:(K0=X.validateSchema)!==null&&K0!==void 0?K0:!0,validateFormats:(U0=X.validateFormats)!==null&&U0!==void 0?U0:!0,unicodeRegExp:(s=X.unicodeRegExp)!==null&&s!==void 0?s:!0,int32range:(D0=X.int32range)!==null&&D0!==void 0?D0:!0,uriResolver:m}}class u8{constructor(X={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,X=this.opts={...X,...iA(X)};let{es5:Q,lines:$}=this.opts.code;this.scope=new uA.ValueScope({scope:{},prefixes:cA,es5:Q,lines:$}),this.logger=sA(X.logger);let Y=X.validateFormats;if(X.validateFormats=!1,this.RULES=(0,fA.getRules)(),MH.call(this,pA,X,"NOT SUPPORTED"),MH.call(this,dA,X,"DEPRECATED","warn"),this._metaOpts=tA.call(this),X.formats)rA.call(this);if(this._addVocabularies(),this._addDefaultMetaSchema(),X.keywords)oA.call(this,X.keywords);if(typeof X.meta=="object")this.addMetaSchema(X.meta);nA.call(this),X.validateFormats=Y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:X,meta:Q,schemaId:$}=this.opts,Y=wH;if($==="id")Y={...wH},Y.id=Y.$id,delete Y.$id;if(Q&&X)this.addMetaSchema(Y,Y[$],!1)}defaultMeta(){let{meta:X,schemaId:Q}=this.opts;return this.opts.defaultMeta=typeof X=="object"?X[Q]||X:void 0}validate(X,Q){let $;if(typeof X=="string"){if($=this.getSchema(X),!$)throw Error(`no schema with key or ref "${X}"`)}else $=this.compile(X);let Y=$(Q);if(!("$async"in $))this.errors=$.errors;return Y}compile(X,Q){let $=this._addSchema(X,Q);return $.validate||this._compileSchemaEnv($)}compileAsync(X,Q){if(typeof this.opts.loadSchema!="function")throw Error("options.loadSchema should be a function");let{loadSchema:$}=this.opts;return Y.call(this,X,Q);async function Y(z,K){await W.call(this,z.$schema);let V=this._addSchema(z,K);return V.validate||J.call(this,V)}async function W(z){if(z&&!this.getSchema(z))await Y.call(this,{$ref:z},!0)}async function J(z){try{return this._compileSchemaEnv(z)}catch(K){if(!(K instanceof RH.default))throw K;return G.call(this,K),await H.call(this,K.missingSchema),J.call(this,z)}}function G({missingSchema:z,missingRef:K}){if(this.refs[z])throw Error(`AnySchema ${z} is loaded but ${K} cannot be resolved`)}async function H(z){let K=await B.call(this,z);if(!this.refs[z])await W.call(this,K.$schema);if(!this.refs[z])this.addSchema(K,z,Q)}async function B(z){let K=this._loading[z];if(K)return K;try{return await(this._loading[z]=$(z))}finally{delete this._loading[z]}}}addSchema(X,Q,$,Y=this.opts.validateSchema){if(Array.isArray(X)){for(let J of X)this.addSchema(J,void 0,$,Y);return this}let W;if(typeof X==="object"){let{schemaId:J}=this.opts;if(W=X[J],W!==void 0&&typeof W!="string")throw Error(`schema ${J} must be string`)}return Q=(0,aX.normalizeId)(Q||W),this._checkUnique(Q),this.schemas[Q]=this._addSchema(X,$,Q,Y,!0),this}addMetaSchema(X,Q,$=this.opts.validateSchema){return this.addSchema(X,Q,!0,$),this}validateSchema(X,Q){if(typeof X=="boolean")return!0;let $;if($=X.$schema,$!==void 0&&typeof $!="string")throw Error("$schema must be a string");if($=$||this.opts.defaultMeta||this.defaultMeta(),!$)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let Y=this.validate($,X);if(!Y&&Q){let W="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(W);else throw Error(W)}return Y}getSchema(X){let Q;while(typeof(Q=jH.call(this,X))=="string")X=Q;if(Q===void 0){let{schemaId:$}=this.opts,Y=new tX.SchemaEnv({schema:{},schemaId:$});if(Q=tX.resolveSchema.call(this,Y,X),!Q)return;this.refs[X]=Q}return Q.validate||this._compileSchemaEnv(Q)}removeSchema(X){if(X instanceof RegExp)return this._removeAllSchemas(this.schemas,X),this._removeAllSchemas(this.refs,X),this;switch(typeof X){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let Q=jH.call(this,X);if(typeof Q=="object")this._cache.delete(Q.schema);return delete this.schemas[X],delete this.refs[X],this}case"object":{let Q=X;this._cache.delete(Q);let $=X[this.opts.schemaId];if($)$=(0,aX.normalizeId)($),delete this.schemas[$],delete this.refs[$];return this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(X){for(let Q of X)this.addKeyword(Q);return this}addKeyword(X,Q){let $;if(typeof X=="string"){if($=X,typeof Q=="object")this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Q.keyword=$}else if(typeof X=="object"&&Q===void 0){if(Q=X,$=Q.keyword,Array.isArray($)&&!$.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(XM.call(this,$,Q),!Q)return(0,_Y.eachItem)($,(W)=>vY.call(this,W)),this;$M.call(this,Q);let Y={...Q,type:(0,f8.getJSONTypes)(Q.type),schemaType:(0,f8.getJSONTypes)(Q.schemaType)};return(0,_Y.eachItem)($,Y.type.length===0?(W)=>vY.call(this,W,Y):(W)=>Y.type.forEach((J)=>vY.call(this,W,Y,J))),this}getKeyword(X){let Q=this.RULES.all[X];return typeof Q=="object"?Q.definition:!!Q}removeKeyword(X){let{RULES:Q}=this;delete Q.keywords[X],delete Q.all[X];for(let $ of Q.rules){let Y=$.rules.findIndex((W)=>W.keyword===X);if(Y>=0)$.rules.splice(Y,1)}return this}addFormat(X,Q){if(typeof Q=="string")Q=new RegExp(Q);return this.formats[X]=Q,this}errorsText(X=this.errors,{separator:Q=", ",dataVar:$="data"}={}){if(!X||X.length===0)return"No errors";return X.map((Y)=>`${$}${Y.instancePath} ${Y.message}`).reduce((Y,W)=>Y+Q+W)}$dataMetaSchema(X,Q){let $=this.RULES.all;X=JSON.parse(JSON.stringify(X));for(let Y of Q){let W=Y.split("/").slice(1),J=X;for(let G of W)J=J[G];for(let G in $){let H=$[G];if(typeof H!="object")continue;let{$data:B}=H.definition,z=J[G];if(B&&z)J[G]=EH(z)}}return X}_removeAllSchemas(X,Q){for(let $ in X){let Y=X[$];if(!Q||Q.test($)){if(typeof Y=="string")delete X[$];else if(Y&&!Y.meta)this._cache.delete(Y.schema),delete X[$]}}}_addSchema(X,Q,$,Y=this.opts.validateSchema,W=this.opts.addUsedSchema){let J,{schemaId:G}=this.opts;if(typeof X=="object")J=X[G];else if(this.opts.jtd)throw Error("schema must be object");else if(typeof X!="boolean")throw Error("schema must be object or boolean");let H=this._cache.get(X);if(H!==void 0)return H;$=(0,aX.normalizeId)(J||$);let B=aX.getSchemaRefs.call(this,X,$);if(H=new tX.SchemaEnv({schema:X,schemaId:G,meta:Q,baseId:$,localRefs:B}),this._cache.set(H.schema,H),W&&!$.startsWith("#")){if($)this._checkUnique($);this.refs[$]=H}if(Y)this.validateSchema(X,!0);return H}_checkUnique(X){if(this.schemas[X]||this.refs[X])throw Error(`schema with key or id "${X}" already exists`)}_compileSchemaEnv(X){if(X.meta)this._compileMetaSchema(X);else tX.compileSchema.call(this,X);if(!X.validate)throw Error("ajv implementation error");return X.validate}_compileMetaSchema(X){let Q=this.opts;this.opts=this._metaOpts;try{tX.compileSchema.call(this,X)}finally{this.opts=Q}}}u8.ValidationError=hA.default;u8.MissingRefError=RH.default;b1.default=u8;function MH(X,Q,$,Y="error"){for(let W in X){let J=W;if(J in Q)this.logger[Y](`${$}: option ${W}. ${X[J]}`)}}function jH(X){return X=(0,aX.normalizeId)(X),this.schemas[X]||this.refs[X]}function nA(){let X=this.opts.schemas;if(!X)return;if(Array.isArray(X))this.addSchema(X);else for(let Q in X)this.addSchema(X[Q],Q)}function rA(){for(let X in this.opts.formats){let Q=this.opts.formats[X];if(Q)this.addFormat(X,Q)}}function oA(X){if(Array.isArray(X)){this.addVocabulary(X);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let Q in X){let $=X[Q];if(!$.keyword)$.keyword=Q;this.addKeyword($)}}function tA(){let X={...this.opts};for(let Q of mA)delete X[Q];return X}var aA={log(){},warn(){},error(){}};function sA(X){if(X===!1)return aA;if(X===void 0)return console;if(X.log&&X.warn&&X.error)return X;throw Error("logger must implement log, warn and error methods")}var eA=/^[a-z_$][a-z0-9_$:-]*$/i;function XM(X,Q){let{RULES:$}=this;if((0,_Y.eachItem)(X,(Y)=>{if($.keywords[Y])throw Error(`Keyword ${Y} is already defined`);if(!eA.test(Y))throw Error(`Keyword ${Y} has invalid name`)}),!Q)return;if(Q.$data&&!(("code"in Q)||("validate"in Q)))throw Error('$data keyword must have "code" or "validate" function')}function vY(X,Q,$){var Y;let W=Q===null||Q===void 0?void 0:Q.post;if($&&W)throw Error('keyword with "post" flag cannot have "type"');let{RULES:J}=this,G=W?J.post:J.rules.find(({type:B})=>B===$);if(!G)G={type:$,rules:[]},J.rules.push(G);if(J.keywords[X]=!0,!Q)return;let H={keyword:X,definition:{...Q,type:(0,f8.getJSONTypes)(Q.type),schemaType:(0,f8.getJSONTypes)(Q.schemaType)}};if(Q.before)QM.call(this,G,H,Q.before);else G.rules.push(H);J.all[X]=H,(Y=Q.implements)===null||Y===void 0||Y.forEach((B)=>this.addKeyword(B))}function QM(X,Q,$){let Y=X.rules.findIndex((W)=>W.keyword===$);if(Y>=0)X.rules.splice(Y,0,Q);else X.rules.push(Q),this.logger.warn(`rule ${$} is not defined`)}function $M(X){let{metaSchema:Q}=X;if(Q===void 0)return;if(X.$data&&this.opts.$data)Q=EH(Q);X.validateSchema=this.compile(Q,!0)}var YM={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function EH(X){return{anyOf:[X,YM]}}});var SH=P((PH)=>{Object.defineProperty(PH,"__esModule",{value:!0});var GM={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};PH.default=GM});var TH=P((vH)=>{Object.defineProperty(vH,"__esModule",{value:!0});vH.callRef=vH.getValidate=void 0;var BM=nX(),ZH=d0(),g0=p(),i6=R1(),CH=x8(),l8=e(),zM={keyword:"$ref",schemaType:"string",code(X){let{gen:Q,schema:$,it:Y}=X,{baseId:W,schemaEnv:J,validateName:G,opts:H,self:B}=Y,{root:z}=J;if(($==="#"||$==="#/")&&W===z.baseId)return V();let K=CH.resolveRef.call(B,z,W,$);if(K===void 0)throw new BM.default(Y.opts.uriResolver,W,$);if(K instanceof CH.SchemaEnv)return L(K);return U(K);function V(){if(J===z)return m8(X,G,J,J.$async);let F=Q.scopeValue("root",{ref:z});return m8(X,g0._`${F}.validate`,z,z.$async)}function L(F){let q=kH(X,F);m8(X,q,F,F.$async)}function U(F){let q=Q.scopeValue("schema",H.code.source===!0?{ref:F,code:(0,g0.stringify)(F)}:{ref:F}),N=Q.name("valid"),w=X.subschema({schema:F,dataTypes:[],schemaPath:g0.nil,topSchemaRef:q,errSchemaPath:$},N);X.mergeEvaluated(w),X.ok(N)}}};function kH(X,Q){let{gen:$}=X;return Q.validate?$.scopeValue("validate",{ref:Q.validate}):g0._`${$.scopeValue("wrapper",{ref:Q})}.validate`}vH.getValidate=kH;function m8(X,Q,$,Y){let{gen:W,it:J}=X,{allErrors:G,schemaEnv:H,opts:B}=J,z=B.passContext?i6.default.this:g0.nil;if(Y)K();else V();function K(){if(!H.$async)throw Error("async schema referenced by sync schema");let F=W.let("valid");W.try(()=>{if(W.code(g0._`await ${(0,ZH.callValidateCode)(X,Q,z)}`),U(Q),!G)W.assign(F,!0)},(q)=>{if(W.if(g0._`!(${q} instanceof ${J.ValidationError})`,()=>W.throw(q)),L(q),!G)W.assign(F,!1)}),X.ok(F)}function V(){X.result((0,ZH.callValidateCode)(X,Q,z),()=>U(Q),()=>L(Q))}function L(F){let q=g0._`${F}.errors`;W.assign(i6.default.vErrors,g0._`${i6.default.vErrors} === null ? ${q} : ${i6.default.vErrors}.concat(${q})`),W.assign(i6.default.errors,g0._`${i6.default.vErrors}.length`)}function U(F){var q;if(!J.opts.unevaluated)return;let N=(q=$===null||$===void 0?void 0:$.validate)===null||q===void 0?void 0:q.evaluated;if(J.props!==!0)if(N&&!N.dynamicProps){if(N.props!==void 0)J.props=l8.mergeEvaluated.props(W,N.props,J.props)}else{let w=W.var("props",g0._`${F}.evaluated.props`);J.props=l8.mergeEvaluated.props(W,w,J.props,g0.Name)}if(J.items!==!0)if(N&&!N.dynamicItems){if(N.items!==void 0)J.items=l8.mergeEvaluated.items(W,N.items,J.items)}else{let w=W.var("items",g0._`${F}.evaluated.items`);J.items=l8.mergeEvaluated.items(W,w,J.items,g0.Name)}}}vH.callRef=m8;vH.default=zM});var yH=P((xH)=>{Object.defineProperty(xH,"__esModule",{value:!0});var VM=SH(),LM=TH(),qM=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",VM.default,LM.default];xH.default=qM});var hH=P((gH)=>{Object.defineProperty(gH,"__esModule",{value:!0});var c8=p(),i1=c8.operators,p8={maximum:{okStr:"<=",ok:i1.LTE,fail:i1.GT},minimum:{okStr:">=",ok:i1.GTE,fail:i1.LT},exclusiveMaximum:{okStr:"<",ok:i1.LT,fail:i1.GTE},exclusiveMinimum:{okStr:">",ok:i1.GT,fail:i1.LTE}},NM={message:({keyword:X,schemaCode:Q})=>c8.str`must be ${p8[X].okStr} ${Q}`,params:({keyword:X,schemaCode:Q})=>c8._`{comparison: ${p8[X].okStr}, limit: ${Q}}`},OM={keyword:Object.keys(p8),type:"number",schemaType:"number",$data:!0,error:NM,code(X){let{keyword:Q,data:$,schemaCode:Y}=X;X.fail$data(c8._`${$} ${p8[Q].fail} ${Y} || isNaN(${$})`)}};gH.default=OM});var uH=P((fH)=>{Object.defineProperty(fH,"__esModule",{value:!0});var sX=p(),wM={message:({schemaCode:X})=>sX.str`must be multiple of ${X}`,params:({schemaCode:X})=>sX._`{multipleOf: ${X}}`},AM={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:wM,code(X){let{gen:Q,data:$,schemaCode:Y,it:W}=X,J=W.opts.multipleOfPrecision,G=Q.let("res"),H=J?sX._`Math.abs(Math.round(${G}) - ${G}) > 1e-${J}`:sX._`${G} !== parseInt(${G})`;X.fail$data(sX._`(${Y} === 0 || (${G} = ${$}/${Y}, ${H}))`)}};fH.default=AM});var cH=P((mH)=>{Object.defineProperty(mH,"__esModule",{value:!0});function lH(X){let Q=X.length,$=0,Y=0,W;while(Y<Q)if($++,W=X.charCodeAt(Y++),W>=55296&&W<=56319&&Y<Q){if(W=X.charCodeAt(Y),(W&64512)===56320)Y++}return $}mH.default=lH;lH.code='require("ajv/dist/runtime/ucs2length").default'});var dH=P((pH)=>{Object.defineProperty(pH,"__esModule",{value:!0});var U6=p(),RM=e(),IM=cH(),EM={message({keyword:X,schemaCode:Q}){let $=X==="maxLength"?"more":"fewer";return U6.str`must NOT have ${$} than ${Q} characters`},params:({schemaCode:X})=>U6._`{limit: ${X}}`},bM={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:EM,code(X){let{keyword:Q,data:$,schemaCode:Y,it:W}=X,J=Q==="maxLength"?U6.operators.GT:U6.operators.LT,G=W.opts.unicode===!1?U6._`${$}.length`:U6._`${(0,RM.useFunc)(X.gen,IM.default)}(${$})`;X.fail$data(U6._`${G} ${J} ${Y}`)}};pH.default=bM});var nH=P((iH)=>{Object.defineProperty(iH,"__esModule",{value:!0});var SM=d0(),d8=p(),ZM={message:({schemaCode:X})=>d8.str`must match pattern "${X}"`,params:({schemaCode:X})=>d8._`{pattern: ${X}}`},CM={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:ZM,code(X){let{data:Q,$data:$,schema:Y,schemaCode:W,it:J}=X,G=J.opts.unicodeRegExp?"u":"",H=$?d8._`(new RegExp(${W}, ${G}))`:(0,SM.usePattern)(X,Y);X.fail$data(d8._`!${H}.test(${Q})`)}};iH.default=CM});var oH=P((rH)=>{Object.defineProperty(rH,"__esModule",{value:!0});var eX=p(),vM={message({keyword:X,schemaCode:Q}){let $=X==="maxProperties"?"more":"fewer";return eX.str`must NOT have ${$} than ${Q} properties`},params:({schemaCode:X})=>eX._`{limit: ${X}}`},_M={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:vM,code(X){let{keyword:Q,data:$,schemaCode:Y}=X,W=Q==="maxProperties"?eX.operators.GT:eX.operators.LT;X.fail$data(eX._`Object.keys(${$}).length ${W} ${Y}`)}};rH.default=_M});var aH=P((tH)=>{Object.defineProperty(tH,"__esModule",{value:!0});var X4=d0(),Q4=p(),xM=e(),yM={message:({params:{missingProperty:X}})=>Q4.str`must have required property '${X}'`,params:({params:{missingProperty:X}})=>Q4._`{missingProperty: ${X}}`},gM={keyword:"required",type:"object",schemaType:"array",$data:!0,error:yM,code(X){let{gen:Q,schema:$,schemaCode:Y,data:W,$data:J,it:G}=X,{opts:H}=G;if(!J&&$.length===0)return;let B=$.length>=H.loopRequired;if(G.allErrors)z();else K();if(H.strictRequired){let U=X.parentSchema.properties,{definedProperties:F}=X.it;for(let q of $)if((U===null||U===void 0?void 0:U[q])===void 0&&!F.has(q)){let N=G.schemaEnv.baseId+G.errSchemaPath,w=`required property "${q}" is not defined at "${N}" (strictRequired)`;(0,xM.checkStrictMode)(G,w,G.opts.strictRequired)}}function z(){if(B||J)X.block$data(Q4.nil,V);else for(let U of $)(0,X4.checkReportMissingProp)(X,U)}function K(){let U=Q.let("missing");if(B||J){let F=Q.let("valid",!0);X.block$data(F,()=>L(U,F)),X.ok(F)}else Q.if((0,X4.checkMissingProp)(X,$,U)),(0,X4.reportMissingProp)(X,U),Q.else()}function V(){Q.forOf("prop",Y,(U)=>{X.setParams({missingProperty:U}),Q.if((0,X4.noPropertyInData)(Q,W,U,H.ownProperties),()=>X.error())})}function L(U,F){X.setParams({missingProperty:U}),Q.forOf(U,Y,()=>{Q.assign(F,(0,X4.propertyInData)(Q,W,U,H.ownProperties)),Q.if((0,Q4.not)(F),()=>{X.error(),Q.break()})},Q4.nil)}}};tH.default=gM});var eH=P((sH)=>{Object.defineProperty(sH,"__esModule",{value:!0});var $4=p(),fM={message({keyword:X,schemaCode:Q}){let $=X==="maxItems"?"more":"fewer";return $4.str`must NOT have ${$} than ${Q} items`},params:({schemaCode:X})=>$4._`{limit: ${X}}`},uM={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:fM,code(X){let{keyword:Q,data:$,schemaCode:Y}=X,W=Q==="maxItems"?$4.operators.GT:$4.operators.LT;X.fail$data($4._`${$}.length ${W} ${Y}`)}};sH.default=uM});var i8=P((QB)=>{Object.defineProperty(QB,"__esModule",{value:!0});var XB=wY();XB.code='require("ajv/dist/runtime/equal").default';QB.default=XB});var YB=P(($B)=>{Object.defineProperty($B,"__esModule",{value:!0});var TY=mX(),I0=p(),cM=e(),pM=i8(),dM={message:({params:{i:X,j:Q}})=>I0.str`must NOT have duplicate items (items ## ${Q} and ${X} are identical)`,params:({params:{i:X,j:Q}})=>I0._`{i: ${X}, j: ${Q}}`},iM={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:dM,code(X){let{gen:Q,data:$,$data:Y,schema:W,parentSchema:J,schemaCode:G,it:H}=X;if(!Y&&!W)return;let B=Q.let("valid"),z=J.items?(0,TY.getSchemaTypes)(J.items):[];X.block$data(B,K,I0._`${G} === false`),X.ok(B);function K(){let F=Q.let("i",I0._`${$}.length`),q=Q.let("j");X.setParams({i:F,j:q}),Q.assign(B,!0),Q.if(I0._`${F} > 1`,()=>(V()?L:U)(F,q))}function V(){return z.length>0&&!z.some((F)=>F==="object"||F==="array")}function L(F,q){let N=Q.name("item"),w=(0,TY.checkDataTypes)(z,N,H.opts.strictNumbers,TY.DataType.Wrong),M=Q.const("indices",I0._`{}`);Q.for(I0._`;${F}--;`,()=>{if(Q.let(N,I0._`${$}[${F}]`),Q.if(w,I0._`continue`),z.length>1)Q.if(I0._`typeof ${N} == "string"`,I0._`${N} += "_"`);Q.if(I0._`typeof ${M}[${N}] == "number"`,()=>{Q.assign(q,I0._`${M}[${N}]`),X.error(),Q.assign(B,!1).break()}).code(I0._`${M}[${N}] = ${F}`)})}function U(F,q){let N=(0,cM.useFunc)(Q,pM.default),w=Q.name("outer");Q.label(w).for(I0._`;${F}--;`,()=>Q.for(I0._`${q} = ${F}; ${q}--;`,()=>Q.if(I0._`${N}(${$}[${F}], ${$}[${q}])`,()=>{X.error(),Q.assign(B,!1).break(w)})))}}};$B.default=iM});var JB=P((WB)=>{Object.defineProperty(WB,"__esModule",{value:!0});var xY=p(),rM=e(),oM=i8(),tM={message:"must be equal to constant",params:({schemaCode:X})=>xY._`{allowedValue: ${X}}`},aM={keyword:"const",$data:!0,error:tM,code(X){let{gen:Q,data:$,$data:Y,schemaCode:W,schema:J}=X;if(Y||J&&typeof J=="object")X.fail$data(xY._`!${(0,rM.useFunc)(Q,oM.default)}(${$}, ${W})`);else X.fail(xY._`${J} !== ${$}`)}};WB.default=aM});var HB=P((GB)=>{Object.defineProperty(GB,"__esModule",{value:!0});var Y4=p(),eM=e(),Xj=i8(),Qj={message:"must be equal to one of the allowed values",params:({schemaCode:X})=>Y4._`{allowedValues: ${X}}`},$j={keyword:"enum",schemaType:"array",$data:!0,error:Qj,code(X){let{gen:Q,data:$,$data:Y,schema:W,schemaCode:J,it:G}=X;if(!Y&&W.length===0)throw Error("enum must have non-empty array");let H=W.length>=G.opts.loopEnum,B,z=()=>B!==null&&B!==void 0?B:B=(0,eM.useFunc)(Q,Xj.default),K;if(H||Y)K=Q.let("valid"),X.block$data(K,V);else{if(!Array.isArray(W))throw Error("ajv implementation error");let U=Q.const("vSchema",J);K=(0,Y4.or)(...W.map((F,q)=>L(U,q)))}X.pass(K);function V(){Q.assign(K,!1),Q.forOf("v",J,(U)=>Q.if(Y4._`${z()}(${$}, ${U})`,()=>Q.assign(K,!0).break()))}function L(U,F){let q=W[F];return typeof q==="object"&&q!==null?Y4._`${z()}(${$}, ${U}[${F}])`:Y4._`${$} === ${q}`}}};GB.default=$j});var zB=P((BB)=>{Object.defineProperty(BB,"__esModule",{value:!0});var Wj=hH(),Jj=uH(),Gj=dH(),Hj=nH(),Bj=oH(),zj=aH(),Kj=eH(),Uj=YB(),Vj=JB(),Lj=HB(),qj=[Wj.default,Jj.default,Gj.default,Hj.default,Bj.default,zj.default,Kj.default,Uj.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Vj.default,Lj.default];BB.default=qj});var gY=P((UB)=>{Object.defineProperty(UB,"__esModule",{value:!0});UB.validateAdditionalItems=void 0;var V6=p(),yY=e(),Nj={message:({params:{len:X}})=>V6.str`must NOT have more than ${X} items`,params:({params:{len:X}})=>V6._`{limit: ${X}}`},Oj={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Nj,code(X){let{parentSchema:Q,it:$}=X,{items:Y}=Q;if(!Array.isArray(Y)){(0,yY.checkStrictMode)($,'"additionalItems" is ignored when "items" is not an array of schemas');return}KB(X,Y)}};function KB(X,Q){let{gen:$,schema:Y,data:W,keyword:J,it:G}=X;G.items=!0;let H=$.const("len",V6._`${W}.length`);if(Y===!1)X.setParams({len:Q.length}),X.pass(V6._`${H} <= ${Q.length}`);else if(typeof Y=="object"&&!(0,yY.alwaysValidSchema)(G,Y)){let z=$.var("valid",V6._`${H} <= ${Q.length}`);$.if((0,V6.not)(z),()=>B(z)),X.ok(z)}function B(z){$.forRange("i",Q.length,H,(K)=>{if(X.subschema({keyword:J,dataProp:K,dataPropType:yY.Type.Num},z),!G.allErrors)$.if((0,V6.not)(z),()=>$.break())})}}UB.validateAdditionalItems=KB;UB.default=Oj});var hY=P((FB)=>{Object.defineProperty(FB,"__esModule",{value:!0});FB.validateTuple=void 0;var LB=p(),n8=e(),wj=d0(),Aj={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(X){let{schema:Q,it:$}=X;if(Array.isArray(Q))return qB(X,"additionalItems",Q);if($.items=!0,(0,n8.alwaysValidSchema)($,Q))return;X.ok((0,wj.validateArray)(X))}};function qB(X,Q,$=X.schema){let{gen:Y,parentSchema:W,data:J,keyword:G,it:H}=X;if(K(W),H.opts.unevaluated&&$.length&&H.items!==!0)H.items=n8.mergeEvaluated.items(Y,$.length,H.items);let B=Y.name("valid"),z=Y.const("len",LB._`${J}.length`);$.forEach((V,L)=>{if((0,n8.alwaysValidSchema)(H,V))return;Y.if(LB._`${z} > ${L}`,()=>X.subschema({keyword:G,schemaProp:L,dataProp:L},B)),X.ok(B)});function K(V){let{opts:L,errSchemaPath:U}=H,F=$.length,q=F===V.minItems&&(F===V.maxItems||V[Q]===!1);if(L.strictTuples&&!q){let N=`"${G}" is ${F}-tuple, but minItems or maxItems/${Q} are not specified or different at path "${U}"`;(0,n8.checkStrictMode)(H,N,L.strictTuples)}}}FB.validateTuple=qB;FB.default=Aj});var DB=P((OB)=>{Object.defineProperty(OB,"__esModule",{value:!0});var jj=hY(),Rj={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:(X)=>(0,jj.validateTuple)(X,"items")};OB.default=Rj});var MB=P((AB)=>{Object.defineProperty(AB,"__esModule",{value:!0});var wB=p(),Ej=e(),bj=d0(),Pj=gY(),Sj={message:({params:{len:X}})=>wB.str`must NOT have more than ${X} items`,params:({params:{len:X}})=>wB._`{limit: ${X}}`},Zj={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Sj,code(X){let{schema:Q,parentSchema:$,it:Y}=X,{prefixItems:W}=$;if(Y.items=!0,(0,Ej.alwaysValidSchema)(Y,Q))return;if(W)(0,Pj.validateAdditionalItems)(X,W);else X.ok((0,bj.validateArray)(X))}};AB.default=Zj});var RB=P((jB)=>{Object.defineProperty(jB,"__esModule",{value:!0});var i0=p(),r8=e(),kj={message:({params:{min:X,max:Q}})=>Q===void 0?i0.str`must contain at least ${X} valid item(s)`:i0.str`must contain at least ${X} and no more than ${Q} valid item(s)`,params:({params:{min:X,max:Q}})=>Q===void 0?i0._`{minContains: ${X}}`:i0._`{minContains: ${X}, maxContains: ${Q}}`},vj={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:kj,code(X){let{gen:Q,schema:$,parentSchema:Y,data:W,it:J}=X,G,H,{minContains:B,maxContains:z}=Y;if(J.opts.next)G=B===void 0?1:B,H=z;else G=1;let K=Q.const("len",i0._`${W}.length`);if(X.setParams({min:G,max:H}),H===void 0&&G===0){(0,r8.checkStrictMode)(J,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(H!==void 0&&G>H){(0,r8.checkStrictMode)(J,'"minContains" > "maxContains" is always invalid'),X.fail();return}if((0,r8.alwaysValidSchema)(J,$)){let q=i0._`${K} >= ${G}`;if(H!==void 0)q=i0._`${q} && ${K} <= ${H}`;X.pass(q);return}J.items=!0;let V=Q.name("valid");if(H===void 0&&G===1)U(V,()=>Q.if(V,()=>Q.break()));else if(G===0){if(Q.let(V,!0),H!==void 0)Q.if(i0._`${W}.length > 0`,L)}else Q.let(V,!1),L();X.result(V,()=>X.reset());function L(){let q=Q.name("_valid"),N=Q.let("count",0);U(q,()=>Q.if(q,()=>F(N)))}function U(q,N){Q.forRange("i",0,K,(w)=>{X.subschema({keyword:"contains",dataProp:w,dataPropType:r8.Type.Num,compositeRule:!0},q),N()})}function F(q){if(Q.code(i0._`${q}++`),H===void 0)Q.if(i0._`${q} >= ${G}`,()=>Q.assign(V,!0).break());else if(Q.if(i0._`${q} > ${H}`,()=>Q.assign(V,!1).break()),G===1)Q.assign(V,!0);else Q.if(i0._`${q} >= ${G}`,()=>Q.assign(V,!0))}}};jB.default=vj});var ZB=P((bB)=>{Object.defineProperty(bB,"__esModule",{value:!0});bB.validateSchemaDeps=bB.validatePropertyDeps=bB.error=void 0;var fY=p(),Tj=e(),W4=d0();bB.error={message:({params:{property:X,depsCount:Q,deps:$}})=>{let Y=Q===1?"property":"properties";return fY.str`must have ${Y} ${$} when property ${X} is present`},params:({params:{property:X,depsCount:Q,deps:$,missingProperty:Y}})=>fY._`{property: ${X},
    missingProperty: ${Y},
    depsCount: ${Q},
    deps: ${$}}`};var xj={keyword:"dependencies",type:"object",schemaType:"object",error:bB.error,code(X){let[Q,$]=yj(X);IB(X,Q),EB(X,$)}};function yj({schema:X}){let Q={},$={};for(let Y in X){if(Y==="__proto__")continue;let W=Array.isArray(X[Y])?Q:$;W[Y]=X[Y]}return[Q,$]}function IB(X,Q=X.schema){let{gen:$,data:Y,it:W}=X;if(Object.keys(Q).length===0)return;let J=$.let("missing");for(let G in Q){let H=Q[G];if(H.length===0)continue;let B=(0,W4.propertyInData)($,Y,G,W.opts.ownProperties);if(X.setParams({property:G,depsCount:H.length,deps:H.join(", ")}),W.allErrors)$.if(B,()=>{for(let z of H)(0,W4.checkReportMissingProp)(X,z)});else $.if(fY._`${B} && (${(0,W4.checkMissingProp)(X,H,J)})`),(0,W4.reportMissingProp)(X,J),$.else()}}bB.validatePropertyDeps=IB;function EB(X,Q=X.schema){let{gen:$,data:Y,keyword:W,it:J}=X,G=$.name("valid");for(let H in Q){if((0,Tj.alwaysValidSchema)(J,Q[H]))continue;$.if((0,W4.propertyInData)($,Y,H,J.opts.ownProperties),()=>{let B=X.subschema({keyword:W,schemaProp:H},G);X.mergeValidEvaluated(B,G)},()=>$.var(G,!0)),X.ok(G)}}bB.validateSchemaDeps=EB;bB.default=xj});var vB=P((kB)=>{Object.defineProperty(kB,"__esModule",{value:!0});var CB=p(),fj=e(),uj={message:"property name must be valid",params:({params:X})=>CB._`{propertyName: ${X.propertyName}}`},lj={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:uj,code(X){let{gen:Q,schema:$,data:Y,it:W}=X;if((0,fj.alwaysValidSchema)(W,$))return;let J=Q.name("valid");Q.forIn("key",Y,(G)=>{X.setParams({propertyName:G}),X.subschema({keyword:"propertyNames",data:G,dataTypes:["string"],propertyName:G,compositeRule:!0},J),Q.if((0,CB.not)(J),()=>{if(X.error(!0),!W.allErrors)Q.break()})}),X.ok(J)}};kB.default=lj});var uY=P((_B)=>{Object.defineProperty(_B,"__esModule",{value:!0});var o8=d0(),$1=p(),cj=R1(),t8=e(),pj={message:"must NOT have additional properties",params:({params:X})=>$1._`{additionalProperty: ${X.additionalProperty}}`},dj={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:pj,code(X){let{gen:Q,schema:$,parentSchema:Y,data:W,errsCount:J,it:G}=X;if(!J)throw Error("ajv implementation error");let{allErrors:H,opts:B}=G;if(G.props=!0,B.removeAdditional!=="all"&&(0,t8.alwaysValidSchema)(G,$))return;let z=(0,o8.allSchemaProperties)(Y.properties),K=(0,o8.allSchemaProperties)(Y.patternProperties);V(),X.ok($1._`${J} === ${cj.default.errors}`);function V(){Q.forIn("key",W,(N)=>{if(!z.length&&!K.length)F(N);else Q.if(L(N),()=>F(N))})}function L(N){let w;if(z.length>8){let M=(0,t8.schemaRefOrVal)(G,Y.properties,"properties");w=(0,o8.isOwnProperty)(Q,M,N)}else if(z.length)w=(0,$1.or)(...z.map((M)=>$1._`${N} === ${M}`));else w=$1.nil;if(K.length)w=(0,$1.or)(w,...K.map((M)=>$1._`${(0,o8.usePattern)(X,M)}.test(${N})`));return(0,$1.not)(w)}function U(N){Q.code($1._`delete ${W}[${N}]`)}function F(N){if(B.removeAdditional==="all"||B.removeAdditional&&$===!1){U(N);return}if($===!1){if(X.setParams({additionalProperty:N}),X.error(),!H)Q.break();return}if(typeof $=="object"&&!(0,t8.alwaysValidSchema)(G,$)){let w=Q.name("valid");if(B.removeAdditional==="failing")q(N,w,!1),Q.if((0,$1.not)(w),()=>{X.reset(),U(N)});else if(q(N,w),!H)Q.if((0,$1.not)(w),()=>Q.break())}}function q(N,w,M){let R={keyword:"additionalProperties",dataProp:N,dataPropType:t8.Type.Str};if(M===!1)Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1});X.subschema(R,w)}}};_B.default=dj});var gB=P((yB)=>{Object.defineProperty(yB,"__esModule",{value:!0});var nj=iX(),TB=d0(),lY=e(),xB=uY(),rj={keyword:"properties",type:"object",schemaType:"object",code(X){let{gen:Q,schema:$,parentSchema:Y,data:W,it:J}=X;if(J.opts.removeAdditional==="all"&&Y.additionalProperties===void 0)xB.default.code(new nj.KeywordCxt(J,xB.default,"additionalProperties"));let G=(0,TB.allSchemaProperties)($);for(let V of G)J.definedProperties.add(V);if(J.opts.unevaluated&&G.length&&J.props!==!0)J.props=lY.mergeEvaluated.props(Q,(0,lY.toHash)(G),J.props);let H=G.filter((V)=>!(0,lY.alwaysValidSchema)(J,$[V]));if(H.length===0)return;let B=Q.name("valid");for(let V of H){if(z(V))K(V);else{if(Q.if((0,TB.propertyInData)(Q,W,V,J.opts.ownProperties)),K(V),!J.allErrors)Q.else().var(B,!0);Q.endIf()}X.it.definedProperties.add(V),X.ok(B)}function z(V){return J.opts.useDefaults&&!J.compositeRule&&$[V].default!==void 0}function K(V){X.subschema({keyword:"properties",schemaProp:V,dataProp:V},B)}}};yB.default=rj});var mB=P((lB)=>{Object.defineProperty(lB,"__esModule",{value:!0});var hB=d0(),a8=p(),fB=e(),uB=e(),tj={keyword:"patternProperties",type:"object",schemaType:"object",code(X){let{gen:Q,schema:$,data:Y,parentSchema:W,it:J}=X,{opts:G}=J,H=(0,hB.allSchemaProperties)($),B=H.filter((q)=>(0,fB.alwaysValidSchema)(J,$[q]));if(H.length===0||B.length===H.length&&(!J.opts.unevaluated||J.props===!0))return;let z=G.strictSchema&&!G.allowMatchingProperties&&W.properties,K=Q.name("valid");if(J.props!==!0&&!(J.props instanceof a8.Name))J.props=(0,uB.evaluatedPropsToName)(Q,J.props);let{props:V}=J;L();function L(){for(let q of H){if(z)U(q);if(J.allErrors)F(q);else Q.var(K,!0),F(q),Q.if(K)}}function U(q){for(let N in z)if(new RegExp(q).test(N))(0,fB.checkStrictMode)(J,`property ${N} matches pattern ${q} (use allowMatchingProperties)`)}function F(q){Q.forIn("key",Y,(N)=>{Q.if(a8._`${(0,hB.usePattern)(X,q)}.test(${N})`,()=>{let w=B.includes(q);if(!w)X.subschema({keyword:"patternProperties",schemaProp:q,dataProp:N,dataPropType:uB.Type.Str},K);if(J.opts.unevaluated&&V!==!0)Q.assign(a8._`${V}[${N}]`,!0);else if(!w&&!J.allErrors)Q.if((0,a8.not)(K),()=>Q.break())})})}}};lB.default=tj});var pB=P((cB)=>{Object.defineProperty(cB,"__esModule",{value:!0});var sj=e(),ej={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(X){let{gen:Q,schema:$,it:Y}=X;if((0,sj.alwaysValidSchema)(Y,$)){X.fail();return}let W=Q.name("valid");X.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},W),X.failResult(W,()=>X.reset(),()=>X.error())},error:{message:"must NOT be valid"}};cB.default=ej});var iB=P((dB)=>{Object.defineProperty(dB,"__esModule",{value:!0});var QR=d0(),$R={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:QR.validateUnion,error:{message:"must match a schema in anyOf"}};dB.default=$R});var rB=P((nB)=>{Object.defineProperty(nB,"__esModule",{value:!0});var s8=p(),WR=e(),JR={message:"must match exactly one schema in oneOf",params:({params:X})=>s8._`{passingSchemas: ${X.passing}}`},GR={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:JR,code(X){let{gen:Q,schema:$,parentSchema:Y,it:W}=X;if(!Array.isArray($))throw Error("ajv implementation error");if(W.opts.discriminator&&Y.discriminator)return;let J=$,G=Q.let("valid",!1),H=Q.let("passing",null),B=Q.name("_valid");X.setParams({passing:H}),Q.block(z),X.result(G,()=>X.reset(),()=>X.error(!0));function z(){J.forEach((K,V)=>{let L;if((0,WR.alwaysValidSchema)(W,K))Q.var(B,!0);else L=X.subschema({keyword:"oneOf",schemaProp:V,compositeRule:!0},B);if(V>0)Q.if(s8._`${B} && ${G}`).assign(G,!1).assign(H,s8._`[${H}, ${V}]`).else();Q.if(B,()=>{if(Q.assign(G,!0),Q.assign(H,V),L)X.mergeEvaluated(L,s8.Name)})})}}};nB.default=GR});var tB=P((oB)=>{Object.defineProperty(oB,"__esModule",{value:!0});var BR=e(),zR={keyword:"allOf",schemaType:"array",code(X){let{gen:Q,schema:$,it:Y}=X;if(!Array.isArray($))throw Error("ajv implementation error");let W=Q.name("valid");$.forEach((J,G)=>{if((0,BR.alwaysValidSchema)(Y,J))return;let H=X.subschema({keyword:"allOf",schemaProp:G},W);X.ok(W),X.mergeEvaluated(H)})}};oB.default=zR});var Xz=P((eB)=>{Object.defineProperty(eB,"__esModule",{value:!0});var e8=p(),sB=e(),UR={message:({params:X})=>e8.str`must match "${X.ifClause}" schema`,params:({params:X})=>e8._`{failingKeyword: ${X.ifClause}}`},VR={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:UR,code(X){let{gen:Q,parentSchema:$,it:Y}=X;if($.then===void 0&&$.else===void 0)(0,sB.checkStrictMode)(Y,'"if" without "then" and "else" is ignored');let W=aB(Y,"then"),J=aB(Y,"else");if(!W&&!J)return;let G=Q.let("valid",!0),H=Q.name("_valid");if(B(),X.reset(),W&&J){let K=Q.let("ifClause");X.setParams({ifClause:K}),Q.if(H,z("then",K),z("else",K))}else if(W)Q.if(H,z("then"));else Q.if((0,e8.not)(H),z("else"));X.pass(G,()=>X.error(!0));function B(){let K=X.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},H);X.mergeEvaluated(K)}function z(K,V){return()=>{let L=X.subschema({keyword:K},H);if(Q.assign(G,H),X.mergeValidEvaluated(L,G),V)Q.assign(V,e8._`${K}`);else X.setParams({ifClause:K})}}}};function aB(X,Q){let $=X.schema[Q];return $!==void 0&&!(0,sB.alwaysValidSchema)(X,$)}eB.default=VR});var $z=P((Qz)=>{Object.defineProperty(Qz,"__esModule",{value:!0});var qR=e(),FR={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:X,parentSchema:Q,it:$}){if(Q.if===void 0)(0,qR.checkStrictMode)($,`"${X}" without "if" is ignored`)}};Qz.default=FR});var Wz=P((Yz)=>{Object.defineProperty(Yz,"__esModule",{value:!0});var OR=gY(),DR=DB(),wR=hY(),AR=MB(),MR=RB(),jR=ZB(),RR=vB(),IR=uY(),ER=gB(),bR=mB(),PR=pB(),SR=iB(),ZR=rB(),CR=tB(),kR=Xz(),vR=$z();function _R(X=!1){let Q=[PR.default,SR.default,ZR.default,CR.default,kR.default,vR.default,RR.default,IR.default,jR.default,ER.default,bR.default];if(X)Q.push(DR.default,AR.default);else Q.push(OR.default,wR.default);return Q.push(MR.default),Q}Yz.default=_R});var Gz=P((Jz)=>{Object.defineProperty(Jz,"__esModule",{value:!0});var L0=p(),xR={message:({schemaCode:X})=>L0.str`must match format "${X}"`,params:({schemaCode:X})=>L0._`{format: ${X}}`},yR={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:xR,code(X,Q){let{gen:$,data:Y,$data:W,schema:J,schemaCode:G,it:H}=X,{opts:B,errSchemaPath:z,schemaEnv:K,self:V}=H;if(!B.validateFormats)return;if(W)L();else U();function L(){let F=$.scopeValue("formats",{ref:V.formats,code:B.code.formats}),q=$.const("fDef",L0._`${F}[${G}]`),N=$.let("fType"),w=$.let("format");$.if(L0._`typeof ${q} == "object" && !(${q} instanceof RegExp)`,()=>$.assign(N,L0._`${q}.type || "string"`).assign(w,L0._`${q}.validate`),()=>$.assign(N,L0._`"string"`).assign(w,q)),X.fail$data((0,L0.or)(M(),R()));function M(){if(B.strictSchema===!1)return L0.nil;return L0._`${G} && !${w}`}function R(){let S=K.$async?L0._`(${q}.async ? await ${w}(${Y}) : ${w}(${Y}))`:L0._`${w}(${Y})`,C=L0._`(typeof ${w} == "function" ? ${S} : ${w}.test(${Y}))`;return L0._`${w} && ${w} !== true && ${N} === ${Q} && !${C}`}}function U(){let F=V.formats[J];if(!F){M();return}if(F===!0)return;let[q,N,w]=R(F);if(q===Q)X.pass(S());function M(){if(B.strictSchema===!1){V.logger.warn(C());return}throw Error(C());function C(){return`unknown format "${J}" ignored in schema at path "${z}"`}}function R(C){let K0=C instanceof RegExp?(0,L0.regexpCode)(C):B.code.formats?L0._`${B.code.formats}${(0,L0.getProperty)(J)}`:void 0,U0=$.scopeValue("formats",{key:J,ref:C,code:K0});if(typeof C=="object"&&!(C instanceof RegExp))return[C.type||"string",C.validate,L0._`${U0}.validate`];return["string",C,U0]}function S(){if(typeof F=="object"&&!(F instanceof RegExp)&&F.async){if(!K.$async)throw Error("async format in sync schema");return L0._`await ${w}(${Y})`}return typeof N=="function"?L0._`${w}(${Y})`:L0._`${w}.test(${Y})`}}}};Jz.default=yR});var Bz=P((Hz)=>{Object.defineProperty(Hz,"__esModule",{value:!0});var hR=Gz(),fR=[hR.default];Hz.default=fR});var Uz=P((zz)=>{Object.defineProperty(zz,"__esModule",{value:!0});zz.contentVocabulary=zz.metadataVocabulary=void 0;zz.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];zz.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var qz=P((Lz)=>{Object.defineProperty(Lz,"__esModule",{value:!0});var mR=yH(),cR=zB(),pR=Wz(),dR=Bz(),Vz=Uz(),iR=[mR.default,cR.default,(0,pR.default)(),dR.default,Vz.metadataVocabulary,Vz.contentVocabulary];Lz.default=iR});var Dz=P((Nz)=>{Object.defineProperty(Nz,"__esModule",{value:!0});Nz.DiscrError=void 0;var Fz;(function(X){X.Tag="tag",X.Mapping="mapping"})(Fz||(Nz.DiscrError=Fz={}))});var Mz=P((Az)=>{Object.defineProperty(Az,"__esModule",{value:!0});var n6=p(),mY=Dz(),wz=x8(),rR=nX(),oR=e(),tR={message:({params:{discrError:X,tagName:Q}})=>X===mY.DiscrError.Tag?`tag "${Q}" must be string`:`value of tag "${Q}" must be in oneOf`,params:({params:{discrError:X,tag:Q,tagName:$}})=>n6._`{error: ${X}, tag: ${$}, tagValue: ${Q}}`},aR={keyword:"discriminator",type:"object",schemaType:"object",error:tR,code(X){let{gen:Q,data:$,schema:Y,parentSchema:W,it:J}=X,{oneOf:G}=W;if(!J.opts.discriminator)throw Error("discriminator: requires discriminator option");let H=Y.propertyName;if(typeof H!="string")throw Error("discriminator: requires propertyName");if(Y.mapping)throw Error("discriminator: mapping is not supported");if(!G)throw Error("discriminator: requires oneOf keyword");let B=Q.let("valid",!1),z=Q.const("tag",n6._`${$}${(0,n6.getProperty)(H)}`);Q.if(n6._`typeof ${z} == "string"`,()=>K(),()=>X.error(!1,{discrError:mY.DiscrError.Tag,tag:z,tagName:H})),X.ok(B);function K(){let U=L();Q.if(!1);for(let F in U)Q.elseIf(n6._`${z} === ${F}`),Q.assign(B,V(U[F]));Q.else(),X.error(!1,{discrError:mY.DiscrError.Mapping,tag:z,tagName:H}),Q.endIf()}function V(U){let F=Q.name("valid"),q=X.subschema({keyword:"oneOf",schemaProp:U},F);return X.mergeEvaluated(q,n6.Name),F}function L(){var U;let F={},q=w(W),N=!0;for(let S=0;S<G.length;S++){let C=G[S];if((C===null||C===void 0?void 0:C.$ref)&&!(0,oR.schemaHasRulesButRef)(C,J.self.RULES)){let U0=C.$ref;if(C=wz.resolveRef.call(J.self,J.schemaEnv.root,J.baseId,U0),C instanceof wz.SchemaEnv)C=C.schema;if(C===void 0)throw new rR.default(J.opts.uriResolver,J.baseId,U0)}let K0=(U=C===null||C===void 0?void 0:C.properties)===null||U===void 0?void 0:U[H];if(typeof K0!="object")throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${H}"`);N=N&&(q||w(C)),M(K0,S)}if(!N)throw Error(`discriminator: "${H}" must be required`);return F;function w({required:S}){return Array.isArray(S)&&S.includes(H)}function M(S,C){if(S.const)R(S.const,C);else if(S.enum)for(let K0 of S.enum)R(K0,C);else throw Error(`discriminator: "properties/${H}" must have "const" or "enum"`)}function R(S,C){if(typeof S!="string"||S in F)throw Error(`discriminator: "${H}" values must be unique strings`);F[S]=C}}}};Az.default=aR});var jz=P((UT,eR)=>{eR.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var pY=P((h0,cY)=>{Object.defineProperty(h0,"__esModule",{value:!0});h0.MissingRefError=h0.ValidationError=h0.CodeGen=h0.Name=h0.nil=h0.stringify=h0.str=h0._=h0.KeywordCxt=h0.Ajv=void 0;var XI=bH(),QI=qz(),$I=Mz(),Rz=jz(),YI=["/properties"],X9="http://json-schema.org/draft-07/schema";class J4 extends XI.default{_addVocabularies(){if(super._addVocabularies(),QI.default.forEach((X)=>this.addVocabulary(X)),this.opts.discriminator)this.addKeyword($I.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let X=this.opts.$data?this.$dataMetaSchema(Rz,YI):Rz;this.addMetaSchema(X,X9,!1),this.refs["http://json-schema.org/schema"]=X9}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(X9)?X9:void 0)}}h0.Ajv=J4;cY.exports=h0=J4;cY.exports.Ajv=J4;Object.defineProperty(h0,"__esModule",{value:!0});h0.default=J4;var WI=iX();Object.defineProperty(h0,"KeywordCxt",{enumerable:!0,get:function(){return WI.KeywordCxt}});var r6=p();Object.defineProperty(h0,"_",{enumerable:!0,get:function(){return r6._}});Object.defineProperty(h0,"str",{enumerable:!0,get:function(){return r6.str}});Object.defineProperty(h0,"stringify",{enumerable:!0,get:function(){return r6.stringify}});Object.defineProperty(h0,"nil",{enumerable:!0,get:function(){return r6.nil}});Object.defineProperty(h0,"Name",{enumerable:!0,get:function(){return r6.Name}});Object.defineProperty(h0,"CodeGen",{enumerable:!0,get:function(){return r6.CodeGen}});var JI=_8();Object.defineProperty(h0,"ValidationError",{enumerable:!0,get:function(){return JI.default}});var GI=nX();Object.defineProperty(h0,"MissingRefError",{enumerable:!0,get:function(){return GI.default}})});var _z=P((kz)=>{Object.defineProperty(kz,"__esModule",{value:!0});kz.formatNames=kz.fastFormats=kz.fullFormats=void 0;function V1(X,Q){return{validate:X,compare:Q}}kz.fullFormats={date:V1(Pz,rY),time:V1(iY(!0),oY),"date-time":V1(Iz(!0),Zz),"iso-time":V1(iY(),Sz),"iso-date-time":V1(Iz(),Cz),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:qI,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:MI,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:FI,int32:{type:"number",validate:DI},int64:{type:"number",validate:wI},float:{type:"number",validate:bz},double:{type:"number",validate:bz},password:!0,binary:!0};kz.fastFormats={...kz.fullFormats,date:V1(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,rY),time:V1(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,oY),"date-time":V1(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Zz),"iso-time":V1(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Sz),"iso-date-time":V1(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Cz),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};kz.formatNames=Object.keys(kz.fullFormats);function zI(X){return X%4===0&&(X%100!==0||X%400===0)}var KI=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,UI=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Pz(X){let Q=KI.exec(X);if(!Q)return!1;let $=+Q[1],Y=+Q[2],W=+Q[3];return Y>=1&&Y<=12&&W>=1&&W<=(Y===2&&zI($)?29:UI[Y])}function rY(X,Q){if(!(X&&Q))return;if(X>Q)return 1;if(X<Q)return-1;return 0}var dY=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function iY(X){return function($){let Y=dY.exec($);if(!Y)return!1;let W=+Y[1],J=+Y[2],G=+Y[3],H=Y[4],B=Y[5]==="-"?-1:1,z=+(Y[6]||0),K=+(Y[7]||0);if(z>23||K>59||X&&!H)return!1;if(W<=23&&J<=59&&G<60)return!0;let V=J-K*B,L=W-z*B-(V<0?1:0);return(L===23||L===-1)&&(V===59||V===-1)&&G<61}}function oY(X,Q){if(!(X&&Q))return;let $=new Date("2020-01-01T"+X).valueOf(),Y=new Date("2020-01-01T"+Q).valueOf();if(!($&&Y))return;return $-Y}function Sz(X,Q){if(!(X&&Q))return;let $=dY.exec(X),Y=dY.exec(Q);if(!($&&Y))return;if(X=$[1]+$[2]+$[3],Q=Y[1]+Y[2]+Y[3],X>Q)return 1;if(X<Q)return-1;return 0}var nY=/t|\s/i;function Iz(X){let Q=iY(X);return function(Y){let W=Y.split(nY);return W.length===2&&Pz(W[0])&&Q(W[1])}}function Zz(X,Q){if(!(X&&Q))return;let $=new Date(X).valueOf(),Y=new Date(Q).valueOf();if(!($&&Y))return;return $-Y}function Cz(X,Q){if(!(X&&Q))return;let[$,Y]=X.split(nY),[W,J]=Q.split(nY),G=rY($,W);if(G===void 0)return;return G||oY(Y,J)}var VI=/\/|:/,LI=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function qI(X){return VI.test(X)&&LI.test(X)}var Ez=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function FI(X){return Ez.lastIndex=0,Ez.test(X)}var NI=-2147483648,OI=2147483647;function DI(X){return Number.isInteger(X)&&X<=OI&&X>=NI}function wI(X){return Number.isInteger(X)}function bz(){return!0}var AI=/[^\\]\\Z/;function MI(X){if(AI.test(X))return!1;try{return new RegExp(X),!0}catch(Q){return!1}}});var xz=P((Tz)=>{Object.defineProperty(Tz,"__esModule",{value:!0});Tz.formatLimitDefinition=void 0;var RI=pY(),Y1=p(),n1=Y1.operators,Q9={formatMaximum:{okStr:"<=",ok:n1.LTE,fail:n1.GT},formatMinimum:{okStr:">=",ok:n1.GTE,fail:n1.LT},formatExclusiveMaximum:{okStr:"<",ok:n1.LT,fail:n1.GTE},formatExclusiveMinimum:{okStr:">",ok:n1.GT,fail:n1.LTE}},II={message:({keyword:X,schemaCode:Q})=>Y1.str`should be ${Q9[X].okStr} ${Q}`,params:({keyword:X,schemaCode:Q})=>Y1._`{comparison: ${Q9[X].okStr}, limit: ${Q}}`};Tz.formatLimitDefinition={keyword:Object.keys(Q9),type:"string",schemaType:"string",$data:!0,error:II,code(X){let{gen:Q,data:$,schemaCode:Y,keyword:W,it:J}=X,{opts:G,self:H}=J;if(!G.validateFormats)return;let B=new RI.KeywordCxt(J,H.RULES.all.format.definition,"format");if(B.$data)z();else K();function z(){let L=Q.scopeValue("formats",{ref:H.formats,code:G.code.formats}),U=Q.const("fmt",Y1._`${L}[${B.schemaCode}]`);X.fail$data((0,Y1.or)(Y1._`typeof ${U} != "object"`,Y1._`${U} instanceof RegExp`,Y1._`typeof ${U}.compare != "function"`,V(U)))}function K(){let L=B.schema,U=H.formats[L];if(!U||U===!0)return;if(typeof U!="object"||U instanceof RegExp||typeof U.compare!="function")throw Error(`"${W}": format "${L}" does not define "compare" function`);let F=Q.scopeValue("formats",{key:L,ref:U,code:G.code.formats?Y1._`${G.code.formats}${(0,Y1.getProperty)(L)}`:void 0});X.fail$data(V(F))}function V(L){return Y1._`${L}.compare(${$}, ${Y}) ${Q9[W].fail} 0`}},dependencies:["format"]};var EI=(X)=>{return X.addKeyword(Tz.formatLimitDefinition),X};Tz.default=EI});var fz=P((G4,hz)=>{Object.defineProperty(G4,"__esModule",{value:!0});var o6=_z(),PI=xz(),sY=p(),yz=new sY.Name("fullFormats"),SI=new sY.Name("fastFormats"),eY=(X,Q={keywords:!0})=>{if(Array.isArray(Q))return gz(X,Q,o6.fullFormats,yz),X;let[$,Y]=Q.mode==="fast"?[o6.fastFormats,SI]:[o6.fullFormats,yz],W=Q.formats||o6.formatNames;if(gz(X,W,$,Y),Q.keywords)(0,PI.default)(X);return X};eY.get=(X,Q="full")=>{let Y=(Q==="fast"?o6.fastFormats:o6.fullFormats)[X];if(!Y)throw Error(`Unknown format "${X}"`);return Y};function gz(X,Q,$,Y){var W,J;(W=(J=X.opts.code).formats)!==null&&W!==void 0||(J.formats=sY._`require("ajv-formats/dist/formats").${Y}`);for(let G of Q)X.addFormat(G,$[G])}hz.exports=G4=eY;Object.defineProperty(G4,"__esModule",{value:!0});G4.default=eY});import{join as az}from"path";import{fileURLToPath as hI}from"url";import{setMaxListeners as qK}from"events";var FK=50;function O6(X=FK){let Q=new AbortController;return qK(X,Q.signal),Q}import{spawn as JV}from"child_process";import{createInterface as GV}from"readline";import*as f from"fs";import{stat as mU,readdir as cU,readFile as pU,unlink as dU,rmdir as iU,rm as nU,open as rU}from"fs/promises";var NK=typeof global=="object"&&global&&global.Object===Object&&global,F7=NK;var OK=typeof self=="object"&&self&&self.Object===Object&&self,DK=F7||OK||Function("return this")(),D6=DK;var wK=D6.Symbol,w6=wK;var N7=Object.prototype,AK=N7.hasOwnProperty,MK=N7.toString,e6=w6?w6.toStringTag:void 0;function jK(X){var Q=AK.call(X,e6),$=X[e6];try{X[e6]=void 0;var Y=!0}catch(J){}var W=MK.call(X);if(Y)if(Q)X[e6]=$;else delete X[e6];return W}var O7=jK;var RK=Object.prototype,IK=RK.toString;function EK(X){return IK.call(X)}var D7=EK;var bK="[object Null]",PK="[object Undefined]",w7=w6?w6.toStringTag:void 0;function SK(X){if(X==null)return X===void 0?PK:bK;return w7&&w7 in Object(X)?O7(X):D7(X)}var A7=SK;function ZK(X){var Q=typeof X;return X!=null&&(Q=="object"||Q=="function")}var K4=ZK;var CK="[object AsyncFunction]",kK="[object Function]",vK="[object GeneratorFunction]",_K="[object Proxy]";function TK(X){if(!K4(X))return!1;var Q=A7(X);return Q==kK||Q==vK||Q==CK||Q==_K}var M7=TK;var xK=D6["__core-js_shared__"],U4=xK;var j7=function(){var X=/[^.]+$/.exec(U4&&U4.keys&&U4.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}();function yK(X){return!!j7&&j7 in X}var R7=yK;var gK=Function.prototype,hK=gK.toString;function fK(X){if(X!=null){try{return hK.call(X)}catch(Q){}try{return X+""}catch(Q){}}return""}var I7=fK;var uK=/[\\^$.*+?()[\]{}|]/g,lK=/^\[object .+?Constructor\]$/,mK=Function.prototype,cK=Object.prototype,pK=mK.toString,dK=cK.hasOwnProperty,iK=RegExp("^"+pK.call(dK).replace(uK,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nK(X){if(!K4(X)||R7(X))return!1;var Q=M7(X)?iK:lK;return Q.test(I7(X))}var E7=nK;function rK(X,Q){return X==null?void 0:X[Q]}var b7=rK;function oK(X,Q){var $=b7(X,Q);return E7($)?$:void 0}var V4=oK;var tK=V4(Object,"create"),q1=tK;function aK(){this.__data__=q1?q1(null):{},this.size=0}var P7=aK;function sK(X){var Q=this.has(X)&&delete this.__data__[X];return this.size-=Q?1:0,Q}var S7=sK;var eK="__lodash_hash_undefined__",XU=Object.prototype,QU=XU.hasOwnProperty;function $U(X){var Q=this.__data__;if(q1){var $=Q[X];return $===eK?void 0:$}return QU.call(Q,X)?Q[X]:void 0}var Z7=$U;var YU=Object.prototype,WU=YU.hasOwnProperty;function JU(X){var Q=this.__data__;return q1?Q[X]!==void 0:WU.call(Q,X)}var C7=JU;var GU="__lodash_hash_undefined__";function HU(X,Q){var $=this.__data__;return this.size+=this.has(X)?0:1,$[X]=q1&&Q===void 0?GU:Q,this}var k7=HU;function A6(X){var Q=-1,$=X==null?0:X.length;this.clear();while(++Q<$){var Y=X[Q];this.set(Y[0],Y[1])}}A6.prototype.clear=P7;A6.prototype.delete=S7;A6.prototype.get=Z7;A6.prototype.has=C7;A6.prototype.set=k7;var J9=A6;function BU(){this.__data__=[],this.size=0}var v7=BU;function zU(X,Q){return X===Q||X!==X&&Q!==Q}var _7=zU;function KU(X,Q){var $=X.length;while($--)if(_7(X[$][0],Q))return $;return-1}var Z1=KU;var UU=Array.prototype,VU=UU.splice;function LU(X){var Q=this.__data__,$=Z1(Q,X);if($<0)return!1;var Y=Q.length-1;if($==Y)Q.pop();else VU.call(Q,$,1);return--this.size,!0}var T7=LU;function qU(X){var Q=this.__data__,$=Z1(Q,X);return $<0?void 0:Q[$][1]}var x7=qU;function FU(X){return Z1(this.__data__,X)>-1}var y7=FU;function NU(X,Q){var $=this.__data__,Y=Z1($,X);if(Y<0)++this.size,$.push([X,Q]);else $[Y][1]=Q;return this}var g7=NU;function M6(X){var Q=-1,$=X==null?0:X.length;this.clear();while(++Q<$){var Y=X[Q];this.set(Y[0],Y[1])}}M6.prototype.clear=v7;M6.prototype.delete=T7;M6.prototype.get=x7;M6.prototype.has=y7;M6.prototype.set=g7;var h7=M6;var OU=V4(D6,"Map"),f7=OU;function DU(){this.size=0,this.__data__={hash:new J9,map:new(f7||h7),string:new J9}}var u7=DU;function wU(X){var Q=typeof X;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?X!=="__proto__":X===null}var l7=wU;function AU(X,Q){var $=X.__data__;return l7(Q)?$[typeof Q=="string"?"string":"hash"]:$.map}var C1=AU;function MU(X){var Q=C1(this,X).delete(X);return this.size-=Q?1:0,Q}var m7=MU;function jU(X){return C1(this,X).get(X)}var c7=jU;function RU(X){return C1(this,X).has(X)}var p7=RU;function IU(X,Q){var $=C1(this,X),Y=$.size;return $.set(X,Q),this.size+=$.size==Y?0:1,this}var d7=IU;function j6(X){var Q=-1,$=X==null?0:X.length;this.clear();while(++Q<$){var Y=X[Q];this.set(Y[0],Y[1])}}j6.prototype.clear=u7;j6.prototype.delete=m7;j6.prototype.get=c7;j6.prototype.has=p7;j6.prototype.set=d7;var G9=j6;var EU="Expected a function";function H9(X,Q){if(typeof X!="function"||Q!=null&&typeof Q!="function")throw TypeError(EU);var $=function(){var Y=arguments,W=Q?Q.apply(this,Y):Y[0],J=$.cache;if(J.has(W))return J.get(W);var G=X.apply(this,Y);return $.cache=J.set(W,G)||J,G};return $.cache=new(H9.Cache||G9),$}H9.Cache=G9;var k1=H9;function bU(X,Q){if(X.destroyed)return;X.write(Q)}function i7(X){bU(process.stderr,X)}var n7=k1((X)=>{if(!X||X.trim()==="")return null;let Q=X.split(",").map((J)=>J.trim()).filter(Boolean);if(Q.length===0)return null;let $=Q.some((J)=>J.startsWith("!")),Y=Q.some((J)=>!J.startsWith("!"));if($&&Y)return null;let W=Q.map((J)=>J.replace(/^!/,"").toLowerCase());return{include:$?[]:W,exclude:$?W:[],isExclusive:$}});function PU(X){let Q=[],$=X.match(/^MCP server ["']([^"']+)["']/);if($&&$[1])Q.push("mcp"),Q.push($[1].toLowerCase());else{let J=X.match(/^([^:[]+):/);if(J&&J[1])Q.push(J[1].trim().toLowerCase())}let Y=X.match(/^\[([^\]]+)]/);if(Y&&Y[1])Q.push(Y[1].trim().toLowerCase());if(X.toLowerCase().includes("1p event:"))Q.push("1p");let W=X.match(/:\s*([^:]+?)(?:\s+(?:type|mode|status|event))?:/);if(W&&W[1]){let J=W[1].trim().toLowerCase();if(J.length<30&&!J.includes(" "))Q.push(J)}return Array.from(new Set(Q))}function SU(X,Q){if(!Q)return!0;if(X.length===0)return!1;if(Q.isExclusive)return!X.some(($)=>Q.exclude.includes($));else return X.some(($)=>Q.include.includes($))}function r7(X,Q){if(!Q)return!0;let $=PU(X);return SU($,Q)}import{join as ZU}from"path";import{homedir as CU}from"os";function L4(){return(process.env.CLAUDE_CONFIG_DIR??ZU(CU(),".claude")).normalize("NFC")}function B9(X){if(!X)return!1;if(typeof X==="boolean")return X;let Q=X.toLowerCase().trim();return["1","true","yes","on"].includes(Q)}import{dirname as K9,join as WW}from"path";import{cwd as kU}from"process";import{realpathSync as s7}from"fs";import{randomUUID as vU}from"crypto";function o7(X){return{name:X,default:30000,validate:(Q)=>{if(!Q)return{effective:30000,status:"valid"};let $=parseInt(Q,10);if(isNaN($)||$<=0)return{effective:30000,status:"invalid",message:`Invalid value "${Q}" (using default: 30000)`};if($>150000)return{effective:150000,status:"capped",message:`Capped from ${$} to 150000`};return{effective:$,status:"valid"}}}}var t7=o7("BASH_MAX_OUTPUT_LENGTH"),vb=o7("TASK_MAX_OUTPUT_LENGTH"),a7={name:"CLAUDE_CODE_MAX_OUTPUT_TOKENS",default:32000,validate:(X)=>{if(!X)return{effective:32000,status:"valid"};let Y=parseInt(X,10);if(isNaN(Y)||Y<=0)return{effective:32000,status:"invalid",message:`Invalid value "${X}" (using default: 32000)`};if(Y>64000)return{effective:64000,status:"capped",message:`Capped from ${Y} to 64000`};return{effective:Y,status:"valid"}}};function _U(){let X="";if(typeof process<"u"&&typeof process.cwd==="function"&&typeof s7==="function")X=s7(kU()).normalize("NFC");return{originalCwd:X,projectRoot:X,totalCostUSD:0,totalAPIDuration:0,totalAPIDurationWithoutRetries:0,totalToolDuration:0,startTime:Date.now(),lastInteractionTime:Date.now(),totalLinesAdded:0,totalLinesRemoved:0,hasUnknownModelCost:!1,cwd:X,modelUsage:{},mainLoopModelOverride:void 0,initialMainLoopModel:null,modelStrings:null,isInteractive:!1,clientType:"cli",sessionIngressToken:void 0,oauthTokenFromFd:void 0,apiKeyFromFd:void 0,flagSettingsPath:void 0,allowedSettingSources:["userSettings","projectSettings","localSettings","flagSettings","policySettings"],meter:null,sessionCounter:null,locCounter:null,prCounter:null,commitCounter:null,costCounter:null,tokenCounter:null,codeEditToolDecisionCounter:null,activeTimeCounter:null,sessionId:vU(),parentSessionId:void 0,loggerProvider:null,eventLogger:null,meterProvider:null,tracerProvider:null,agentColorMap:new Map,agentColorIndex:0,envVarValidators:[t7,a7],lastAPIRequest:null,inMemoryErrorLog:[],inlinePlugins:[],useCoworkPlugins:!1,sessionBypassPermissionsMode:!1,sessionTrustAccepted:!1,sessionPersistenceDisabled:!1,hasExitedPlanMode:!1,needsPlanModeExitAttachment:!1,hasExitedDelegateMode:!1,needsDelegateModeExitAttachment:!1,lspRecommendationShownThisSession:!1,initJsonSchema:null,registeredHooks:null,planSlugCache:new Map,teleportedSessionInfo:null,invokedSkills:new Map,slowOperations:[],promptCacheBreaks:[],sdkBetas:void 0,mainThreadAgentType:void 0,isRemoteMode:!1,directConnectServerUrl:void 0,systemPromptSectionCache:new Map,additionalDirectoriesForClaudeMd:[],resumedTranscriptPath:null,promptCache1hAllowlist:null}}var TU=_U();function e7(){return TU.sessionId}function XW({writeFn:X,flushIntervalMs:Q=1000,maxBufferSize:$=100,immediateMode:Y=!1}){let W=[],J=null;function G(){if(J)clearTimeout(J),J=null}function H(){if(W.length===0)return;X(W.join("")),W=[],G()}function B(){if(!J)J=setTimeout(H,Q)}return{write(z){if(Y){X(z);return}if(W.push(z),B(),W.length>=$)H()},flush:H,dispose(){H()}}}var QW=new Set;function $W(X){return QW.add(X),()=>QW.delete(X)}var z9=(()=>{let X=process.env.CLAUDE_CODE_SLOW_OPERATION_THRESHOLD_MS;if(X!==void 0){let Q=Number(X);if(!Number.isNaN(Q)&&Q>=0)return Q}return 1/0})();function xU(X){if(X===null)return"null";if(X===void 0)return"undefined";if(Array.isArray(X))return`Array[${X.length}]`;if(typeof X==="object")return`Object{${Object.keys(X).length} keys}`;if(typeof X==="string")return`string(${X.length} chars)`;return typeof X}function YW(X,Q){let $=performance.now();try{return Q()}finally{performance.now()-$>z9}}function Z0(X,Q,$){let Y=xU(X);return YW(`JSON.stringify(${Y})`,()=>JSON.stringify(X,Q,$))}var q4=(X,Q)=>{let $=typeof X==="string"?X.length:0;return YW(`JSON.parse(${$} chars)`,()=>JSON.parse(X,Q))};var yU=k1(()=>{return B9(process.env.DEBUG)||B9(process.env.DEBUG_SDK)||process.argv.includes("--debug")||process.argv.includes("-d")||JW()||process.argv.some((X)=>X.startsWith("--debug="))||GW()!==null}),gU=k1(()=>{let X=process.argv.find(($)=>$.startsWith("--debug="));if(!X)return null;let Q=X.substring(8);return n7(Q)}),JW=k1(()=>{return process.argv.includes("--debug-to-stderr")||process.argv.includes("-d2e")}),GW=k1(()=>{for(let X=0;X<process.argv.length;X++){let Q=process.argv[X];if(Q.startsWith("--debug-file="))return Q.substring(13);if(Q==="--debug-file"&&X+1<process.argv.length)return process.argv[X+1]}return null});function hU(X){if(typeof process>"u"||typeof process.versions>"u"||typeof process.versions.node>"u")return!1;let Q=gU();return r7(X,Q)}var fU=!1;var F4=null;function uU(){if(!F4)F4=XW({writeFn:(X)=>{let Q=HW();if(!n0().existsSync(K9(Q)))n0().mkdirSync(K9(Q));n0().appendFileSync(Q,X),lU()},flushIntervalMs:1000,maxBufferSize:100,immediateMode:yU()}),$W(async()=>F4?.dispose());return F4}function v1(X,{level:Q}={level:"debug"}){if(!hU(X))return;if(fU&&X.includes(`
`))X=Z0(X);let Y=`${new Date().toISOString()} [${Q.toUpperCase()}] ${X.trim()}
`;if(JW()){i7(Y);return}uU().write(Y)}function HW(){return GW()??process.env.CLAUDE_CODE_DEBUG_LOGS_DIR??WW(L4(),"debug",`${e7()}.txt`)}var lU=k1(()=>{if(process.argv[2]==="--ripgrep")return;try{let X=HW(),Q=K9(X),$=WW(Q,"latest");if(!n0().existsSync(Q))n0().mkdirSync(Q);if(n0().existsSync($))try{n0().unlinkSync($)}catch{}n0().symlinkSync(X,$)}catch{}});var oU=!1;function F0(X,Q){let $=performance.now();try{return Q()}finally{performance.now()-$>z9}}var tU={cwd(){return process.cwd()},existsSync(X){return F0(`existsSync(${X})`,()=>f.existsSync(X))},async stat(X){return mU(X)},async readdir(X){return cU(X,{withFileTypes:!0})},async unlink(X){return dU(X)},async rmdir(X){return iU(X)},async rm(X,Q){return nU(X,Q)},statSync(X){return F0(`statSync(${X})`,()=>f.statSync(X))},lstatSync(X){return F0(`lstatSync(${X})`,()=>f.lstatSync(X))},readFileSync(X,Q){return F0(`readFileSync(${X})`,()=>f.readFileSync(X,{encoding:Q.encoding}))},readFileBytesSync(X){return F0(`readFileBytesSync(${X})`,()=>f.readFileSync(X))},readSync(X,Q){return F0(`readSync(${X}, ${Q.length} bytes)`,()=>{let $=void 0;try{$=f.openSync(X,"r");let Y=Buffer.alloc(Q.length),W=f.readSync($,Y,0,Q.length,0);return{buffer:Y,bytesRead:W}}finally{if($)f.closeSync($)}})},appendFileSync(X,Q,$){return F0(`appendFileSync(${X}, ${Q.length} chars)`,()=>{if(!f.existsSync(X)&&$?.mode!==void 0){let Y=f.openSync(X,"a",$.mode);try{f.appendFileSync(Y,Q)}finally{f.closeSync(Y)}}else f.appendFileSync(X,Q)})},copyFileSync(X,Q){return F0(`copyFileSync(${X}  ${Q})`,()=>f.copyFileSync(X,Q))},unlinkSync(X){return F0(`unlinkSync(${X})`,()=>f.unlinkSync(X))},renameSync(X,Q){return F0(`renameSync(${X}  ${Q})`,()=>f.renameSync(X,Q))},linkSync(X,Q){return F0(`linkSync(${X}  ${Q})`,()=>f.linkSync(X,Q))},symlinkSync(X,Q,$){return F0(`symlinkSync(${X}  ${Q})`,()=>f.symlinkSync(X,Q,$))},readlinkSync(X){return F0(`readlinkSync(${X})`,()=>f.readlinkSync(X))},realpathSync(X){return F0(`realpathSync(${X})`,()=>f.realpathSync(X).normalize("NFC"))},mkdirSync(X,Q){return F0(`mkdirSync(${X})`,()=>{if(!f.existsSync(X)){let $={recursive:!0};if(Q?.mode!==void 0)$.mode=Q.mode;f.mkdirSync(X,$)}})},readdirSync(X){return F0(`readdirSync(${X})`,()=>f.readdirSync(X,{withFileTypes:!0}))},readdirStringSync(X){return F0(`readdirStringSync(${X})`,()=>f.readdirSync(X))},isDirEmptySync(X){return F0(`isDirEmptySync(${X})`,()=>{return this.readdirSync(X).length===0})},rmdirSync(X){return F0(`rmdirSync(${X})`,()=>f.rmdirSync(X))},rmSync(X,Q){return F0(`rmSync(${X})`,()=>f.rmSync(X,Q))},createWriteStream(X){return f.createWriteStream(X)},async readFileBytes(X,Q){if(Q===void 0)return pU(X);let $=await rU(X,"r");try{let{size:Y}=await $.stat(),W=Math.min(Y,Q),J=Buffer.allocUnsafe(W),G=0;while(G<W){let{bytesRead:H}=await $.read(J,G,W-G,G);if(H===0)break;G+=H}return G<W?J.subarray(0,G):J}finally{await $.close()}}},aU=tU;function n0(){return aU}var sU=["PreToolUse","PostToolUse","PostToolUseFailure","Notification","UserPromptSubmit","SessionStart","SessionEnd","Stop","SubagentStart","SubagentStop","PreCompact","PermissionRequest","Setup","TeammateIdle","TaskCompleted"],eU=["clear","logout","prompt_input_exit","other","bypass_permissions_disabled"];class F1 extends Error{}function R6(){return process.versions.bun!==void 0}import{randomUUID as XV}from"crypto";import{appendFileSync as QV,existsSync as $V,mkdirSync as YV}from"fs";import{join as BW}from"path";var N4=null,zW=!1;function WV(){if(zW)return N4;if(zW=!0,!process.env.DEBUG_CLAUDE_AGENT_SDK)return null;let X=BW(L4(),"debug");if(N4=BW(X,`sdk-${XV()}.txt`),!$V(X))YV(X,{recursive:!0});return process.stderr.write(`SDK debug logs: ${N4}
`),N4}function N1(X){let Q=WV();if(!Q)return;let Y=`${new Date().toISOString()} ${X}
`;QV(Q,Y)}function KW(X,Q){let $={...X};if(Q){let Y={sandbox:Q};if($.settings)try{Y={...q4($.settings),sandbox:Q}}catch{}$.settings=Z0(Y)}return $}class XX{options;process;processStdin;processStdout;ready=!1;abortController;exitError;exitListeners=[];processExitHandler;abortHandler;constructor(X){this.options=X;this.abortController=X.abortController||O6(),this.initialize()}getDefaultExecutable(){return R6()?"bun":"node"}spawnLocalProcess(X){let{command:Q,args:$,cwd:Y,env:W,signal:J}=X,G=W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr?"pipe":"ignore",H=JV(Q,$,{cwd:Y,stdio:["pipe","pipe",G],signal:J,env:W,windowsHide:!0});if(W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr)H.stderr.on("data",(z)=>{let K=z.toString();if(N1(K),this.options.stderr)this.options.stderr(K)});return{stdin:H.stdin,stdout:H.stdout,get killed(){return H.killed},get exitCode(){return H.exitCode},kill:H.kill.bind(H),on:H.on.bind(H),once:H.once.bind(H),off:H.off.bind(H)}}initialize(){try{let{additionalDirectories:X=[],agent:Q,betas:$,cwd:Y,executable:W=this.getDefaultExecutable(),executableArgs:J=[],extraArgs:G={},pathToClaudeCodeExecutable:H,env:B={...process.env},maxThinkingTokens:z,maxTurns:K,maxBudgetUsd:V,model:L,fallbackModel:U,jsonSchema:F,permissionMode:q,allowDangerouslySkipPermissions:N,permissionPromptToolName:w,continueConversation:M,resume:R,settingSources:S,allowedTools:C=[],disallowedTools:K0=[],tools:U0,mcpServers:s,strictMcpConfig:D0,canUseTool:q0,includePartialMessages:L1,plugins:P1,sandbox:o1}=this.options,m=["--output-format","stream-json","--verbose","--input-format","stream-json"];if(z!==void 0)m.push("--max-thinking-tokens",z.toString());if(this.options.effort)m.push("--effort",this.options.effort);if(K)m.push("--max-turns",K.toString());if(V!==void 0)m.push("--max-budget-usd",V.toString());if(L)m.push("--model",L);if(Q)m.push("--agent",Q);if($&&$.length>0)m.push("--betas",$.join(","));if(F)m.push("--json-schema",Z0(F));if(this.options.debugFile)m.push("--debug-file",this.options.debugFile);else if(this.options.debug)m.push("--debug");if(B.DEBUG_CLAUDE_AGENT_SDK)m.push("--debug-to-stderr");if(q0){if(w)throw Error("canUseTool callback cannot be used with permissionPromptToolName. Please use one or the other.");m.push("--permission-prompt-tool","stdio")}else if(w)m.push("--permission-prompt-tool",w);if(M)m.push("--continue");if(R)m.push("--resume",R);if(C.length>0)m.push("--allowedTools",C.join(","));if(K0.length>0)m.push("--disallowedTools",K0.join(","));if(U0!==void 0)if(Array.isArray(U0))if(U0.length===0)m.push("--tools","");else m.push("--tools",U0.join(","));else m.push("--tools","default");if(s&&Object.keys(s).length>0)m.push("--mcp-config",Z0({mcpServers:s}));if(S)m.push("--setting-sources",S.join(","));if(D0)m.push("--strict-mcp-config");if(q)m.push("--permission-mode",q);if(N)m.push("--allow-dangerously-skip-permissions");if(U){if(L&&U===L)throw Error("Fallback model cannot be the same as the main model. Please specify a different model for fallbackModel option.");m.push("--fallback-model",U)}if(L1)m.push("--include-partial-messages");for(let E0 of X)m.push("--add-dir",E0);if(P1&&P1.length>0)for(let E0 of P1)if(E0.type==="local")m.push("--plugin-dir",E0.path);else throw Error(`Unsupported plugin type: ${E0.type}`);if(this.options.forkSession)m.push("--fork-session");if(this.options.resumeSessionAt)m.push("--resume-session-at",this.options.resumeSessionAt);if(this.options.sessionId)m.push("--session-id",this.options.sessionId);if(this.options.persistSession===!1)m.push("--no-session-persistence");let $9=KW(G??{},o1);for(let[E0,S1]of Object.entries($9))if(S1===null)m.push(`--${E0}`);else m.push(`--${E0}`,S1);if(!B.CLAUDE_CODE_ENTRYPOINT)B.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(delete B.NODE_OPTIONS,B.DEBUG_CLAUDE_AGENT_SDK)B.DEBUG="1";else delete B.DEBUG;let t1=HV(H),t6=t1?H:W,a6=t1?[...J,...m]:[...J,H,...m],B4={command:t6,args:a6,cwd:Y,env:B,signal:this.abortController.signal};if(this.options.spawnClaudeCodeProcess)N1(`Spawning Claude Code (custom): ${t6} ${a6.join(" ")}`),this.process=this.options.spawnClaudeCodeProcess(B4);else{if(!n0().existsSync(H)){let S1=t1?`Claude Code native binary not found at ${H}. Please ensure Claude Code is installed via native installer or specify a valid path with options.pathToClaudeCodeExecutable.`:`Claude Code executable not found at ${H}. Is options.pathToClaudeCodeExecutable set?`;throw ReferenceError(S1)}N1(`Spawning Claude Code: ${t6} ${a6.join(" ")}`),this.process=this.spawnLocalProcess(B4)}this.processStdin=this.process.stdin,this.processStdout=this.process.stdout;let z4=()=>{if(this.process&&!this.process.killed)this.process.kill("SIGTERM")};this.processExitHandler=z4,this.abortHandler=z4,process.on("exit",this.processExitHandler),this.abortController.signal.addEventListener("abort",this.abortHandler),this.process.on("error",(E0)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new F1("Claude Code process aborted by user");else this.exitError=Error(`Failed to spawn Claude Code process: ${E0.message}`),N1(this.exitError.message)}),this.process.on("exit",(E0,S1)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new F1("Claude Code process aborted by user");else{let L6=this.getProcessExitError(E0,S1);if(L6)this.exitError=L6,N1(L6.message)}}),this.ready=!0}catch(X){throw this.ready=!1,X}}getProcessExitError(X,Q){if(X!==0&&X!==null)return Error(`Claude Code process exited with code ${X}`);else if(Q)return Error(`Claude Code process terminated by signal ${Q}`);return}write(X){if(this.abortController.signal.aborted)throw new F1("Operation aborted");if(!this.ready||!this.processStdin)throw Error("ProcessTransport is not ready for writing");if(this.process?.killed||this.process?.exitCode!==null)throw Error("Cannot write to terminated process");if(this.exitError)throw Error(`Cannot write to process that exited with error: ${this.exitError.message}`);N1(`[ProcessTransport] Writing to stdin: ${X.substring(0,100)}`);try{if(!this.processStdin.write(X))N1("[ProcessTransport] Write buffer full, data queued")}catch(Q){throw this.ready=!1,Error(`Failed to write to process stdin: ${Q.message}`)}}close(){if(this.processStdin)this.processStdin.end(),this.processStdin=void 0;if(this.abortHandler)this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0;for(let{handler:X}of this.exitListeners)this.process?.off("exit",X);if(this.exitListeners=[],this.process&&!this.process.killed)this.process.kill("SIGTERM"),setTimeout(()=>{if(this.process&&!this.process.killed)this.process.kill("SIGKILL")},5000);if(this.ready=!1,this.processExitHandler)process.off("exit",this.processExitHandler),this.processExitHandler=void 0}isReady(){return this.ready}async*readMessages(){if(!this.processStdout)throw Error("ProcessTransport output stream not available");let X=GV({input:this.processStdout});try{for await(let Q of X)if(Q.trim())try{yield q4(Q)}catch($){throw N1(`Non-JSON stdout: ${Q}`),Error(`CLI output was not valid JSON. This may indicate an error during startup. Output: ${Q.slice(0,200)}${Q.length>200?"...":""}`)}await this.waitForExit()}catch(Q){throw Q}finally{X.close()}}endInput(){if(this.processStdin)this.processStdin.end()}getInputStream(){return this.processStdin}onExit(X){if(!this.process)return()=>{};let Q=($,Y)=>{let W=this.getProcessExitError($,Y);X(W)};return this.process.on("exit",Q),this.exitListeners.push({callback:X,handler:Q}),()=>{if(this.process)this.process.off("exit",Q);let $=this.exitListeners.findIndex((Y)=>Y.handler===Q);if($!==-1)this.exitListeners.splice($,1)}}async waitForExit(){if(!this.process){if(this.exitError)throw this.exitError;return}if(this.process.exitCode!==null||this.process.killed){if(this.exitError)throw this.exitError;return}return new Promise((X,Q)=>{let $=(W,J)=>{if(this.abortController.signal.aborted){Q(new F1("Operation aborted"));return}let G=this.getProcessExitError(W,J);if(G)Q(G);else X()};this.process.once("exit",$);let Y=(W)=>{this.process.off("exit",$),Q(W)};this.process.once("error",Y),this.process.once("exit",()=>{this.process.off("error",Y)})})}}function HV(X){return![".js",".mjs",".tsx",".ts",".jsx"].some(($)=>X.endsWith($))}class QX{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(X){this.returned=X}[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){if(this.queue.length>0)return Promise.resolve({done:!1,value:this.queue.shift()});if(this.isDone)return Promise.resolve({done:!0,value:void 0});if(this.hasError)return Promise.reject(this.hasError);return new Promise((X,Q)=>{this.readResolve=X,this.readReject=Q})}enqueue(X){if(this.readResolve){let Q=this.readResolve;this.readResolve=void 0,this.readReject=void 0,Q({done:!1,value:X})}else this.queue.push(X)}done(){if(this.isDone=!0,this.readResolve){let X=this.readResolve;this.readResolve=void 0,this.readReject=void 0,X({done:!0,value:void 0})}}error(X){if(this.hasError=X,this.readReject){let Q=this.readReject;this.readResolve=void 0,this.readReject=void 0,Q(X)}}return(){if(this.isDone=!0,this.returned)this.returned();return Promise.resolve({done:!0,value:void 0})}}class U9{sendMcpMessage;isClosed=!1;constructor(X){this.sendMcpMessage=X}onclose;onerror;onmessage;async start(){}async send(X){if(this.isClosed)throw Error("Transport is closed");this.sendMcpMessage(X)}async close(){if(this.isClosed)return;this.isClosed=!0,this.onclose?.()}}import{randomUUID as BV}from"crypto";class $X{transport;isSingleUserTurn;canUseTool;hooks;abortController;jsonSchema;initConfig;pendingControlResponses=new Map;cleanupPerformed=!1;sdkMessages;inputStream=new QX;initialization;cancelControllers=new Map;hookCallbacks=new Map;nextCallbackId=0;sdkMcpTransports=new Map;sdkMcpServerInstances=new Map;pendingMcpResponses=new Map;firstResultReceivedResolve;firstResultReceived=!1;hasBidirectionalNeeds(){return this.sdkMcpTransports.size>0||this.hooks!==void 0&&Object.keys(this.hooks).length>0||this.canUseTool!==void 0}constructor(X,Q,$,Y,W,J=new Map,G,H){this.transport=X;this.isSingleUserTurn=Q;this.canUseTool=$;this.hooks=Y;this.abortController=W;this.jsonSchema=G;this.initConfig=H;for(let[B,z]of J)this.connectSdkMcpServer(B,z);this.sdkMessages=this.readSdkMessages(),this.readMessages(),this.initialization=this.initialize(),this.initialization.catch(()=>{})}setError(X){this.inputStream.error(X)}async stopTask(X){await this.request({subtype:"stop_task",task_id:X})}close(){this.cleanup()}cleanup(X){if(this.cleanupPerformed)return;this.cleanupPerformed=!0;try{this.transport.close();let Q=Error("Query closed before response received");for(let{reject:$}of this.pendingControlResponses.values())$(Q);this.pendingControlResponses.clear();for(let{reject:$}of this.pendingMcpResponses.values())$(Q);this.pendingMcpResponses.clear(),this.cancelControllers.clear(),this.hookCallbacks.clear();for(let $ of this.sdkMcpTransports.values())try{$.close()}catch{}if(this.sdkMcpTransports.clear(),X)this.inputStream.error(X);else this.inputStream.done()}catch(Q){}}next(...[X]){return this.sdkMessages.next(...[X])}return(X){return this.sdkMessages.return(X)}throw(X){return this.sdkMessages.throw(X)}[Symbol.asyncIterator](){return this.sdkMessages}[Symbol.asyncDispose](){return this.sdkMessages[Symbol.asyncDispose]()}async readMessages(){try{for await(let X of this.transport.readMessages()){if(X.type==="control_response"){let Q=this.pendingControlResponses.get(X.response.request_id);if(Q)Q.handler(X.response);continue}else if(X.type==="control_request"){this.handleControlRequest(X);continue}else if(X.type==="control_cancel_request"){this.handleControlCancelRequest(X);continue}else if(X.type==="keep_alive")continue;if(X.type==="streamlined_text"||X.type==="streamlined_tool_use_summary")continue;if(X.type==="result"){if(this.firstResultReceived=!0,this.firstResultReceivedResolve)this.firstResultReceivedResolve();if(this.isSingleUserTurn)v1("[Query.readMessages] First result received for single-turn query, closing stdin"),this.transport.endInput()}this.inputStream.enqueue(X)}if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.done(),this.cleanup()}catch(X){if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.error(X),this.cleanup(X)}}async handleControlRequest(X){let Q=new AbortController;this.cancelControllers.set(X.request_id,Q);try{let $=await this.processControlRequest(X,Q.signal),Y={type:"control_response",response:{subtype:"success",request_id:X.request_id,response:$}};await Promise.resolve(this.transport.write(Z0(Y)+`
`))}catch($){let Y={type:"control_response",response:{subtype:"error",request_id:X.request_id,error:$.message||String($)}};await Promise.resolve(this.transport.write(Z0(Y)+`
`))}finally{this.cancelControllers.delete(X.request_id)}}handleControlCancelRequest(X){let Q=this.cancelControllers.get(X.request_id);if(Q)Q.abort(),this.cancelControllers.delete(X.request_id)}async processControlRequest(X,Q){if(X.request.subtype==="can_use_tool"){if(!this.canUseTool)throw Error("canUseTool callback is not provided.");return{...await this.canUseTool(X.request.tool_name,X.request.input,{signal:Q,suggestions:X.request.permission_suggestions,blockedPath:X.request.blocked_path,decisionReason:X.request.decision_reason,toolUseID:X.request.tool_use_id,agentID:X.request.agent_id}),toolUseID:X.request.tool_use_id}}else if(X.request.subtype==="hook_callback")return await this.handleHookCallbacks(X.request.callback_id,X.request.input,X.request.tool_use_id,Q);else if(X.request.subtype==="mcp_message"){let $=X.request,Y=this.sdkMcpTransports.get($.server_name);if(!Y)throw Error(`SDK MCP server not found: ${$.server_name}`);if("method"in $.message&&"id"in $.message&&$.message.id!==null)return{mcp_response:await this.handleMcpControlRequest($.server_name,$,Y)};else{if(Y.onmessage)Y.onmessage($.message);return{mcp_response:{jsonrpc:"2.0",result:{},id:0}}}}throw Error("Unsupported control request subtype: "+X.request.subtype)}async*readSdkMessages(){for await(let X of this.inputStream)yield X}async initialize(){let X;if(this.hooks){X={};for(let[W,J]of Object.entries(this.hooks))if(J.length>0)X[W]=J.map((G)=>{let H=[];for(let B of G.hooks){let z=`hook_${this.nextCallbackId++}`;this.hookCallbacks.set(z,B),H.push(z)}return{matcher:G.matcher,hookCallbackIds:H,timeout:G.timeout}})}let Q=this.sdkMcpTransports.size>0?Array.from(this.sdkMcpTransports.keys()):void 0,$={subtype:"initialize",hooks:X,sdkMcpServers:Q,jsonSchema:this.jsonSchema,systemPrompt:this.initConfig?.systemPrompt,appendSystemPrompt:this.initConfig?.appendSystemPrompt,agents:this.initConfig?.agents};return(await this.request($)).response}async interrupt(){await this.request({subtype:"interrupt"})}async setPermissionMode(X){await this.request({subtype:"set_permission_mode",mode:X})}async setModel(X){await this.request({subtype:"set_model",model:X})}async setMaxThinkingTokens(X){await this.request({subtype:"set_max_thinking_tokens",max_thinking_tokens:X})}async rewindFiles(X,Q){return(await this.request({subtype:"rewind_files",user_message_id:X,dry_run:Q?.dryRun})).response}async processPendingPermissionRequests(X){for(let Q of X)if(Q.request.subtype==="can_use_tool")this.handleControlRequest(Q).catch(()=>{})}request(X){let Q=Math.random().toString(36).substring(2,15),$={request_id:Q,type:"control_request",request:X};return new Promise((Y,W)=>{this.pendingControlResponses.set(Q,{handler:(J)=>{if(this.pendingControlResponses.delete(Q),J.subtype==="success")Y(J);else if(W(Error(J.error)),J.pending_permission_requests)this.processPendingPermissionRequests(J.pending_permission_requests)},reject:W}),Promise.resolve(this.transport.write(Z0($)+`
`))})}async initializationResult(){return this.initialization}async supportedCommands(){return(await this.initialization).commands}async supportedModels(){return(await this.initialization).models}async reconnectMcpServer(X){await this.request({subtype:"mcp_reconnect",serverName:X})}async toggleMcpServer(X,Q){await this.request({subtype:"mcp_toggle",serverName:X,enabled:Q})}async mcpServerStatus(){return(await this.request({subtype:"mcp_status"})).response.mcpServers}async setMcpServers(X){let Q={},$={};for(let[H,B]of Object.entries(X))if(B.type==="sdk"&&"instance"in B)Q[H]=B.instance;else $[H]=B;let Y=new Set(this.sdkMcpServerInstances.keys()),W=new Set(Object.keys(Q));for(let H of Y)if(!W.has(H))await this.disconnectSdkMcpServer(H);for(let[H,B]of Object.entries(Q))if(!Y.has(H))this.connectSdkMcpServer(H,B);let J={};for(let H of Object.keys(Q))J[H]={type:"sdk",name:H};return(await this.request({subtype:"mcp_set_servers",servers:{...$,...J}})).response}async accountInfo(){return(await this.initialization).account}async streamInput(X){v1("[Query.streamInput] Starting to process input stream");try{let Q=0;for await(let $ of X){if(Q++,v1(`[Query.streamInput] Processing message ${Q}: ${$.type}`),this.abortController?.signal.aborted)break;await Promise.resolve(this.transport.write(Z0($)+`
`))}if(v1(`[Query.streamInput] Finished processing ${Q} messages from input stream`),Q>0&&this.hasBidirectionalNeeds())v1("[Query.streamInput] Has bidirectional needs, waiting for first result"),await this.waitForFirstResult();v1("[Query] Calling transport.endInput() to close stdin to CLI process"),this.transport.endInput()}catch(Q){if(!(Q instanceof F1))throw Q}}waitForFirstResult(){if(this.firstResultReceived)return v1("[Query.waitForFirstResult] Result already received, returning immediately"),Promise.resolve();return new Promise((X)=>{if(this.abortController?.signal.aborted){X();return}this.abortController?.signal.addEventListener("abort",()=>X(),{once:!0}),this.firstResultReceivedResolve=X})}handleHookCallbacks(X,Q,$,Y){let W=this.hookCallbacks.get(X);if(!W)throw Error(`No hook callback found for ID: ${X}`);return W(Q,$,{signal:Y})}connectSdkMcpServer(X,Q){let $=new U9((Y)=>this.sendMcpServerMessageToCli(X,Y));this.sdkMcpTransports.set(X,$),this.sdkMcpServerInstances.set(X,Q),Q.connect($)}async disconnectSdkMcpServer(X){let Q=this.sdkMcpTransports.get(X);if(Q)await Q.close(),this.sdkMcpTransports.delete(X);this.sdkMcpServerInstances.delete(X)}sendMcpServerMessageToCli(X,Q){if("id"in Q&&Q.id!==null&&Q.id!==void 0){let Y=`${X}:${Q.id}`,W=this.pendingMcpResponses.get(Y);if(W){W.resolve(Q),this.pendingMcpResponses.delete(Y);return}}let $={type:"control_request",request_id:BV(),request:{subtype:"mcp_message",server_name:X,message:Q}};this.transport.write(Z0($)+`
`)}handleMcpControlRequest(X,Q,$){let Y="id"in Q.message?Q.message.id:null,W=`${X}:${Y}`;return new Promise((J,G)=>{let H=()=>{this.pendingMcpResponses.delete(W)},B=(K)=>{H(),J(K)},z=(K)=>{H(),G(K)};if(this.pendingMcpResponses.set(W,{resolve:B,reject:z}),$.onmessage)$.onmessage(Q.message);else{H(),G(Error("No message handler registered"));return}})}}import{join as UW}from"path";import{fileURLToPath as zV}from"url";class V9{closed=!1;inputStream;query;queryIterator=null;abortController;_sessionId=null;get sessionId(){if(this._sessionId===null)throw Error("Session ID not available until after receiving messages");return this._sessionId}constructor(X){if(X.resume)this._sessionId=X.resume;this.inputStream=new QX;let Q=X.pathToClaudeCodeExecutable;if(!Q){let W=zV(import.meta.url),J=UW(W,"..");Q=UW(J,"cli.js")}let $={...X.env??process.env};if(!$.CLAUDE_CODE_ENTRYPOINT)$.CLAUDE_CODE_ENTRYPOINT="sdk-ts";this.abortController=O6();let Y=new XX({abortController:this.abortController,pathToClaudeCodeExecutable:Q,env:$,executable:X.executable??(R6()?"bun":"node"),executableArgs:X.executableArgs??[],extraArgs:{},maxThinkingTokens:void 0,maxTurns:void 0,maxBudgetUsd:void 0,model:X.model,fallbackModel:void 0,permissionMode:X.permissionMode??"default",allowDangerouslySkipPermissions:!1,continueConversation:!1,resume:X.resume,settingSources:[],allowedTools:X.allowedTools??[],disallowedTools:X.disallowedTools??[],mcpServers:{},strictMcpConfig:!1,canUseTool:!!X.canUseTool,hooks:!!X.hooks,includePartialMessages:!1,forkSession:!1,resumeSessionAt:void 0});this.query=new $X(Y,!1,X.canUseTool,X.hooks,this.abortController,new Map),this.query.streamInput(this.inputStream)}async send(X){if(this.closed)throw Error("Cannot send to closed session");let Q=typeof X==="string"?{type:"user",session_id:"",message:{role:"user",content:[{type:"text",text:X}]},parent_tool_use_id:null}:X;this.inputStream.enqueue(Q)}async*stream(){if(!this.queryIterator)this.queryIterator=this.query[Symbol.asyncIterator]();while(!0){let{value:X,done:Q}=await this.queryIterator.next();if(Q)return;if(X.type==="system"&&X.subtype==="init")this._sessionId=X.session_id;if(yield X,X.type==="result")return}}close(){if(this.closed)return;this.closed=!0,this.inputStream.done(),this.abortController.abort()}async[Symbol.asyncDispose](){this.close()}}function L9(X){return new V9(X)}function VW(X,Q){return new V9({...Q,resume:X})}var n;(function(X){X.assertEqual=(W)=>{};function Q(W){}X.assertIs=Q;function $(W){throw Error()}X.assertNever=$,X.arrayToEnum=(W)=>{let J={};for(let G of W)J[G]=G;return J},X.getValidEnumValues=(W)=>{let J=X.objectKeys(W).filter((H)=>typeof W[W[H]]!=="number"),G={};for(let H of J)G[H]=W[H];return X.objectValues(G)},X.objectValues=(W)=>{return X.objectKeys(W).map(function(J){return W[J]})},X.objectKeys=typeof Object.keys==="function"?(W)=>Object.keys(W):(W)=>{let J=[];for(let G in W)if(Object.prototype.hasOwnProperty.call(W,G))J.push(G);return J},X.find=(W,J)=>{for(let G of W)if(J(G))return G;return},X.isInteger=typeof Number.isInteger==="function"?(W)=>Number.isInteger(W):(W)=>typeof W==="number"&&Number.isFinite(W)&&Math.floor(W)===W;function Y(W,J=" | "){return W.map((G)=>typeof G==="string"?`'${G}'`:G).join(J)}X.joinValues=Y,X.jsonStringifyReplacer=(W,J)=>{if(typeof J==="bigint")return J.toString();return J}})(n||(n={}));var LW;(function(X){X.mergeShapes=(Q,$)=>{return{...Q,...$}}})(LW||(LW={}));var I=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),O1=(X)=>{switch(typeof X){case"undefined":return I.undefined;case"string":return I.string;case"number":return Number.isNaN(X)?I.nan:I.number;case"boolean":return I.boolean;case"function":return I.function;case"bigint":return I.bigint;case"symbol":return I.symbol;case"object":if(Array.isArray(X))return I.array;if(X===null)return I.null;if(X.then&&typeof X.then==="function"&&X.catch&&typeof X.catch==="function")return I.promise;if(typeof Map<"u"&&X instanceof Map)return I.map;if(typeof Set<"u"&&X instanceof Set)return I.set;if(typeof Date<"u"&&X instanceof Date)return I.date;return I.object;default:return I.unknown}};var A=n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class f0 extends Error{get errors(){return this.issues}constructor(X){super();this.issues=[],this.addIssue=($)=>{this.issues=[...this.issues,$]},this.addIssues=($=[])=>{this.issues=[...this.issues,...$]};let Q=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,Q);else this.__proto__=Q;this.name="ZodError",this.issues=X}format(X){let Q=X||function(W){return W.message},$={_errors:[]},Y=(W)=>{for(let J of W.issues)if(J.code==="invalid_union")J.unionErrors.map(Y);else if(J.code==="invalid_return_type")Y(J.returnTypeError);else if(J.code==="invalid_arguments")Y(J.argumentsError);else if(J.path.length===0)$._errors.push(Q(J));else{let G=$,H=0;while(H<J.path.length){let B=J.path[H];if(H!==J.path.length-1)G[B]=G[B]||{_errors:[]};else G[B]=G[B]||{_errors:[]},G[B]._errors.push(Q(J));G=G[B],H++}}};return Y(this),$}static assert(X){if(!(X instanceof f0))throw Error(`Not a ZodError: ${X}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(X=(Q)=>Q.message){let Q={},$=[];for(let Y of this.issues)if(Y.path.length>0){let W=Y.path[0];Q[W]=Q[W]||[],Q[W].push(X(Y))}else $.push(X(Y));return{formErrors:$,fieldErrors:Q}}get formErrors(){return this.flatten()}}f0.create=(X)=>{return new f0(X)};var KV=(X,Q)=>{let $;switch(X.code){case A.invalid_type:if(X.received===I.undefined)$="Required";else $=`Expected ${X.expected}, received ${X.received}`;break;case A.invalid_literal:$=`Invalid literal value, expected ${JSON.stringify(X.expected,n.jsonStringifyReplacer)}`;break;case A.unrecognized_keys:$=`Unrecognized key(s) in object: ${n.joinValues(X.keys,", ")}`;break;case A.invalid_union:$="Invalid input";break;case A.invalid_union_discriminator:$=`Invalid discriminator value. Expected ${n.joinValues(X.options)}`;break;case A.invalid_enum_value:$=`Invalid enum value. Expected ${n.joinValues(X.options)}, received '${X.received}'`;break;case A.invalid_arguments:$="Invalid function arguments";break;case A.invalid_return_type:$="Invalid function return type";break;case A.invalid_date:$="Invalid date";break;case A.invalid_string:if(typeof X.validation==="object")if("includes"in X.validation){if($=`Invalid input: must include "${X.validation.includes}"`,typeof X.validation.position==="number")$=`${$} at one or more positions greater than or equal to ${X.validation.position}`}else if("startsWith"in X.validation)$=`Invalid input: must start with "${X.validation.startsWith}"`;else if("endsWith"in X.validation)$=`Invalid input: must end with "${X.validation.endsWith}"`;else n.assertNever(X.validation);else if(X.validation!=="regex")$=`Invalid ${X.validation}`;else $="Invalid";break;case A.too_small:if(X.type==="array")$=`Array must contain ${X.exact?"exactly":X.inclusive?"at least":"more than"} ${X.minimum} element(s)`;else if(X.type==="string")$=`String must contain ${X.exact?"exactly":X.inclusive?"at least":"over"} ${X.minimum} character(s)`;else if(X.type==="number")$=`Number must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${X.minimum}`;else if(X.type==="bigint")$=`Number must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${X.minimum}`;else if(X.type==="date")$=`Date must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(X.minimum))}`;else $="Invalid input";break;case A.too_big:if(X.type==="array")$=`Array must contain ${X.exact?"exactly":X.inclusive?"at most":"less than"} ${X.maximum} element(s)`;else if(X.type==="string")$=`String must contain ${X.exact?"exactly":X.inclusive?"at most":"under"} ${X.maximum} character(s)`;else if(X.type==="number")$=`Number must be ${X.exact?"exactly":X.inclusive?"less than or equal to":"less than"} ${X.maximum}`;else if(X.type==="bigint")$=`BigInt must be ${X.exact?"exactly":X.inclusive?"less than or equal to":"less than"} ${X.maximum}`;else if(X.type==="date")$=`Date must be ${X.exact?"exactly":X.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(X.maximum))}`;else $="Invalid input";break;case A.custom:$="Invalid input";break;case A.invalid_intersection_types:$="Intersection results could not be merged";break;case A.not_multiple_of:$=`Number must be a multiple of ${X.multipleOf}`;break;case A.not_finite:$="Number must be finite";break;default:$=Q.defaultError,n.assertNever(X)}return{message:$}},_1=KV;var UV=_1;function YX(){return UV}var O4=(X)=>{let{data:Q,path:$,errorMaps:Y,issueData:W}=X,J=[...$,...W.path||[]],G={...W,path:J};if(W.message!==void 0)return{...W,path:J,message:W.message};let H="",B=Y.filter((z)=>!!z).slice().reverse();for(let z of B)H=z(G,{data:Q,defaultError:H}).message;return{...W,path:J,message:H}};function b(X,Q){let $=YX(),Y=O4({issueData:Q,data:X.data,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,$,$===_1?void 0:_1].filter((W)=>!!W)});X.common.issues.push(Y)}class b0{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(X,Q){let $=[];for(let Y of Q){if(Y.status==="aborted")return g;if(Y.status==="dirty")X.dirty();$.push(Y.value)}return{status:X.value,value:$}}static async mergeObjectAsync(X,Q){let $=[];for(let Y of Q){let W=await Y.key,J=await Y.value;$.push({key:W,value:J})}return b0.mergeObjectSync(X,$)}static mergeObjectSync(X,Q){let $={};for(let Y of Q){let{key:W,value:J}=Y;if(W.status==="aborted")return g;if(J.status==="aborted")return g;if(W.status==="dirty")X.dirty();if(J.status==="dirty")X.dirty();if(W.value!=="__proto__"&&(typeof J.value<"u"||Y.alwaysSet))$[W.value]=J.value}return{status:X.value,value:$}}}var g=Object.freeze({status:"aborted"}),I6=(X)=>({status:"dirty",value:X}),C0=(X)=>({status:"valid",value:X}),q9=(X)=>X.status==="aborted",F9=(X)=>X.status==="dirty",a1=(X)=>X.status==="valid",WX=(X)=>typeof Promise<"u"&&X instanceof Promise;var Z;(function(X){X.errToObj=(Q)=>typeof Q==="string"?{message:Q}:Q||{},X.toString=(Q)=>typeof Q==="string"?Q:Q?.message})(Z||(Z={}));class r0{constructor(X,Q,$,Y){this._cachedPath=[],this.parent=X,this.data=Q,this._path=$,this._key=Y}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var qW=(X,Q)=>{if(a1(Q))return{success:!0,data:Q.value};else{if(!X.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let $=new f0(X.common.issues);return this._error=$,this._error}}}};function l(X){if(!X)return{};let{errorMap:Q,invalid_type_error:$,required_error:Y,description:W}=X;if(Q&&($||Y))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(Q)return{errorMap:Q,description:W};return{errorMap:(G,H)=>{let{message:B}=X;if(G.code==="invalid_enum_value")return{message:B??H.defaultError};if(typeof H.data>"u")return{message:B??Y??H.defaultError};if(G.code!=="invalid_type")return{message:H.defaultError};return{message:B??$??H.defaultError}},description:W}}class d{get description(){return this._def.description}_getType(X){return O1(X.data)}_getOrReturnCtx(X,Q){return Q||{common:X.parent.common,data:X.data,parsedType:O1(X.data),schemaErrorMap:this._def.errorMap,path:X.path,parent:X.parent}}_processInputParams(X){return{status:new b0,ctx:{common:X.parent.common,data:X.data,parsedType:O1(X.data),schemaErrorMap:this._def.errorMap,path:X.path,parent:X.parent}}}_parseSync(X){let Q=this._parse(X);if(WX(Q))throw Error("Synchronous parse encountered promise.");return Q}_parseAsync(X){let Q=this._parse(X);return Promise.resolve(Q)}parse(X,Q){let $=this.safeParse(X,Q);if($.success)return $.data;throw $.error}safeParse(X,Q){let $={common:{issues:[],async:Q?.async??!1,contextualErrorMap:Q?.errorMap},path:Q?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:O1(X)},Y=this._parseSync({data:X,path:$.path,parent:$});return qW($,Y)}"~validate"(X){let Q={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:O1(X)};if(!this["~standard"].async)try{let $=this._parseSync({data:X,path:[],parent:Q});return a1($)?{value:$.value}:{issues:Q.common.issues}}catch($){if($?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;Q.common={issues:[],async:!0}}return this._parseAsync({data:X,path:[],parent:Q}).then(($)=>a1($)?{value:$.value}:{issues:Q.common.issues})}async parseAsync(X,Q){let $=await this.safeParseAsync(X,Q);if($.success)return $.data;throw $.error}async safeParseAsync(X,Q){let $={common:{issues:[],contextualErrorMap:Q?.errorMap,async:!0},path:Q?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:O1(X)},Y=this._parse({data:X,path:$.path,parent:$}),W=await(WX(Y)?Y:Promise.resolve(Y));return qW($,W)}refine(X,Q){let $=(Y)=>{if(typeof Q==="string"||typeof Q>"u")return{message:Q};else if(typeof Q==="function")return Q(Y);else return Q};return this._refinement((Y,W)=>{let J=X(Y),G=()=>W.addIssue({code:A.custom,...$(Y)});if(typeof Promise<"u"&&J instanceof Promise)return J.then((H)=>{if(!H)return G(),!1;else return!0});if(!J)return G(),!1;else return!0})}refinement(X,Q){return this._refinement(($,Y)=>{if(!X($))return Y.addIssue(typeof Q==="function"?Q($,Y):Q),!1;else return!0})}_refinement(X){return new G1({schema:this,typeName:j.ZodEffects,effect:{type:"refinement",refinement:X}})}superRefine(X){return this._refinement(X)}constructor(X){this.spa=this.safeParseAsync,this._def=X,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(Q)=>this["~validate"](Q)}}optional(){return J1.create(this,this._def)}nullable(){return T1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return W1.create(this)}promise(){return Z6.create(this,this._def)}or(X){return zX.create([this,X],this._def)}and(X){return KX.create(this,X,this._def)}transform(X){return new G1({...l(this._def),schema:this,typeName:j.ZodEffects,effect:{type:"transform",transform:X}})}default(X){let Q=typeof X==="function"?X:()=>X;return new qX({...l(this._def),innerType:this,defaultValue:Q,typeName:j.ZodDefault})}brand(){return new w9({typeName:j.ZodBranded,type:this,...l(this._def)})}catch(X){let Q=typeof X==="function"?X:()=>X;return new FX({...l(this._def),innerType:this,catchValue:Q,typeName:j.ZodCatch})}describe(X){return new this.constructor({...this._def,description:X})}pipe(X){return E4.create(this,X)}readonly(){return NX.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var VV=/^c[^\s-]{8,}$/i,LV=/^[0-9a-z]+$/,qV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,FV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,NV=/^[a-z0-9_-]{21}$/i,OV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,DV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,AV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",N9,MV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,RV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,IV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,EV=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,bV=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,FW="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",PV=new RegExp(`^${FW}$`);function NW(X){let Q="[0-5]\\d";if(X.precision)Q=`${Q}\\.\\d{${X.precision}}`;else if(X.precision==null)Q=`${Q}(\\.\\d+)?`;let $=X.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${Q})${$}`}function SV(X){return new RegExp(`^${NW(X)}$`)}function ZV(X){let Q=`${FW}T${NW(X)}`,$=[];if($.push(X.local?"Z?":"Z"),X.offset)$.push("([+-]\\d{2}:?\\d{2})");return Q=`${Q}(${$.join("|")})`,new RegExp(`^${Q}$`)}function CV(X,Q){if((Q==="v4"||!Q)&&MV.test(X))return!0;if((Q==="v6"||!Q)&&RV.test(X))return!0;return!1}function kV(X,Q){if(!OV.test(X))return!1;try{let[$]=X.split(".");if(!$)return!1;let Y=$.replace(/-/g,"+").replace(/_/g,"/").padEnd($.length+(4-$.length%4)%4,"="),W=JSON.parse(atob(Y));if(typeof W!=="object"||W===null)return!1;if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(Q&&W.alg!==Q)return!1;return!0}catch{return!1}}function vV(X,Q){if((Q==="v4"||!Q)&&jV.test(X))return!0;if((Q==="v6"||!Q)&&IV.test(X))return!0;return!1}class w1 extends d{_parse(X){if(this._def.coerce)X.data=String(X.data);if(this._getType(X)!==I.string){let W=this._getOrReturnCtx(X);return b(W,{code:A.invalid_type,expected:I.string,received:W.parsedType}),g}let $=new b0,Y=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(X.data.length<W.value)Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),$.dirty()}else if(W.kind==="max"){if(X.data.length>W.value)Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),$.dirty()}else if(W.kind==="length"){let J=X.data.length>W.value,G=X.data.length<W.value;if(J||G){if(Y=this._getOrReturnCtx(X,Y),J)b(Y,{code:A.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});else if(G)b(Y,{code:A.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});$.dirty()}}else if(W.kind==="email"){if(!wV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"email",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="emoji"){if(!N9)N9=new RegExp(AV,"u");if(!N9.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"emoji",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="uuid"){if(!FV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"uuid",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="nanoid"){if(!NV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"nanoid",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="cuid"){if(!VV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"cuid",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="cuid2"){if(!LV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"cuid2",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="ulid"){if(!qV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"ulid",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="url")try{new URL(X.data)}catch{Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"url",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="regex"){if(W.regex.lastIndex=0,!W.regex.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"regex",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="trim")X.data=X.data.trim();else if(W.kind==="includes"){if(!X.data.includes(W.value,W.position))Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.invalid_string,validation:{includes:W.value,position:W.position},message:W.message}),$.dirty()}else if(W.kind==="toLowerCase")X.data=X.data.toLowerCase();else if(W.kind==="toUpperCase")X.data=X.data.toUpperCase();else if(W.kind==="startsWith"){if(!X.data.startsWith(W.value))Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.invalid_string,validation:{startsWith:W.value},message:W.message}),$.dirty()}else if(W.kind==="endsWith"){if(!X.data.endsWith(W.value))Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.invalid_string,validation:{endsWith:W.value},message:W.message}),$.dirty()}else if(W.kind==="datetime"){if(!ZV(W).test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.invalid_string,validation:"datetime",message:W.message}),$.dirty()}else if(W.kind==="date"){if(!PV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.invalid_string,validation:"date",message:W.message}),$.dirty()}else if(W.kind==="time"){if(!SV(W).test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.invalid_string,validation:"time",message:W.message}),$.dirty()}else if(W.kind==="duration"){if(!DV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"duration",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="ip"){if(!CV(X.data,W.version))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"ip",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="jwt"){if(!kV(X.data,W.alg))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"jwt",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="cidr"){if(!vV(X.data,W.version))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"cidr",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="base64"){if(!EV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"base64",code:A.invalid_string,message:W.message}),$.dirty()}else if(W.kind==="base64url"){if(!bV.test(X.data))Y=this._getOrReturnCtx(X,Y),b(Y,{validation:"base64url",code:A.invalid_string,message:W.message}),$.dirty()}else n.assertNever(W);return{status:$.value,value:X.data}}_regex(X,Q,$){return this.refinement((Y)=>X.test(Y),{validation:Q,code:A.invalid_string,...Z.errToObj($)})}_addCheck(X){return new w1({...this._def,checks:[...this._def.checks,X]})}email(X){return this._addCheck({kind:"email",...Z.errToObj(X)})}url(X){return this._addCheck({kind:"url",...Z.errToObj(X)})}emoji(X){return this._addCheck({kind:"emoji",...Z.errToObj(X)})}uuid(X){return this._addCheck({kind:"uuid",...Z.errToObj(X)})}nanoid(X){return this._addCheck({kind:"nanoid",...Z.errToObj(X)})}cuid(X){return this._addCheck({kind:"cuid",...Z.errToObj(X)})}cuid2(X){return this._addCheck({kind:"cuid2",...Z.errToObj(X)})}ulid(X){return this._addCheck({kind:"ulid",...Z.errToObj(X)})}base64(X){return this._addCheck({kind:"base64",...Z.errToObj(X)})}base64url(X){return this._addCheck({kind:"base64url",...Z.errToObj(X)})}jwt(X){return this._addCheck({kind:"jwt",...Z.errToObj(X)})}ip(X){return this._addCheck({kind:"ip",...Z.errToObj(X)})}cidr(X){return this._addCheck({kind:"cidr",...Z.errToObj(X)})}datetime(X){if(typeof X==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:X});return this._addCheck({kind:"datetime",precision:typeof X?.precision>"u"?null:X?.precision,offset:X?.offset??!1,local:X?.local??!1,...Z.errToObj(X?.message)})}date(X){return this._addCheck({kind:"date",message:X})}time(X){if(typeof X==="string")return this._addCheck({kind:"time",precision:null,message:X});return this._addCheck({kind:"time",precision:typeof X?.precision>"u"?null:X?.precision,...Z.errToObj(X?.message)})}duration(X){return this._addCheck({kind:"duration",...Z.errToObj(X)})}regex(X,Q){return this._addCheck({kind:"regex",regex:X,...Z.errToObj(Q)})}includes(X,Q){return this._addCheck({kind:"includes",value:X,position:Q?.position,...Z.errToObj(Q?.message)})}startsWith(X,Q){return this._addCheck({kind:"startsWith",value:X,...Z.errToObj(Q)})}endsWith(X,Q){return this._addCheck({kind:"endsWith",value:X,...Z.errToObj(Q)})}min(X,Q){return this._addCheck({kind:"min",value:X,...Z.errToObj(Q)})}max(X,Q){return this._addCheck({kind:"max",value:X,...Z.errToObj(Q)})}length(X,Q){return this._addCheck({kind:"length",value:X,...Z.errToObj(Q)})}nonempty(X){return this.min(1,Z.errToObj(X))}trim(){return new w1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new w1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new w1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((X)=>X.kind==="datetime")}get isDate(){return!!this._def.checks.find((X)=>X.kind==="date")}get isTime(){return!!this._def.checks.find((X)=>X.kind==="time")}get isDuration(){return!!this._def.checks.find((X)=>X.kind==="duration")}get isEmail(){return!!this._def.checks.find((X)=>X.kind==="email")}get isURL(){return!!this._def.checks.find((X)=>X.kind==="url")}get isEmoji(){return!!this._def.checks.find((X)=>X.kind==="emoji")}get isUUID(){return!!this._def.checks.find((X)=>X.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((X)=>X.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((X)=>X.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((X)=>X.kind==="cuid2")}get isULID(){return!!this._def.checks.find((X)=>X.kind==="ulid")}get isIP(){return!!this._def.checks.find((X)=>X.kind==="ip")}get isCIDR(){return!!this._def.checks.find((X)=>X.kind==="cidr")}get isBase64(){return!!this._def.checks.find((X)=>X.kind==="base64")}get isBase64url(){return!!this._def.checks.find((X)=>X.kind==="base64url")}get minLength(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X}get maxLength(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X}}w1.create=(X)=>{return new w1({checks:[],typeName:j.ZodString,coerce:X?.coerce??!1,...l(X)})};function _V(X,Q){let $=(X.toString().split(".")[1]||"").length,Y=(Q.toString().split(".")[1]||"").length,W=$>Y?$:Y,J=Number.parseInt(X.toFixed(W).replace(".","")),G=Number.parseInt(Q.toFixed(W).replace(".",""));return J%G/10**W}class b6 extends d{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(X){if(this._def.coerce)X.data=Number(X.data);if(this._getType(X)!==I.number){let W=this._getOrReturnCtx(X);return b(W,{code:A.invalid_type,expected:I.number,received:W.parsedType}),g}let $=void 0,Y=new b0;for(let W of this._def.checks)if(W.kind==="int"){if(!n.isInteger(X.data))$=this._getOrReturnCtx(X,$),b($,{code:A.invalid_type,expected:"integer",received:"float",message:W.message}),Y.dirty()}else if(W.kind==="min"){if(W.inclusive?X.data<W.value:X.data<=W.value)$=this._getOrReturnCtx(X,$),b($,{code:A.too_small,minimum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="max"){if(W.inclusive?X.data>W.value:X.data>=W.value)$=this._getOrReturnCtx(X,$),b($,{code:A.too_big,maximum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="multipleOf"){if(_V(X.data,W.value)!==0)$=this._getOrReturnCtx(X,$),b($,{code:A.not_multiple_of,multipleOf:W.value,message:W.message}),Y.dirty()}else if(W.kind==="finite"){if(!Number.isFinite(X.data))$=this._getOrReturnCtx(X,$),b($,{code:A.not_finite,message:W.message}),Y.dirty()}else n.assertNever(W);return{status:Y.value,value:X.data}}gte(X,Q){return this.setLimit("min",X,!0,Z.toString(Q))}gt(X,Q){return this.setLimit("min",X,!1,Z.toString(Q))}lte(X,Q){return this.setLimit("max",X,!0,Z.toString(Q))}lt(X,Q){return this.setLimit("max",X,!1,Z.toString(Q))}setLimit(X,Q,$,Y){return new b6({...this._def,checks:[...this._def.checks,{kind:X,value:Q,inclusive:$,message:Z.toString(Y)}]})}_addCheck(X){return new b6({...this._def,checks:[...this._def.checks,X]})}int(X){return this._addCheck({kind:"int",message:Z.toString(X)})}positive(X){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Z.toString(X)})}negative(X){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Z.toString(X)})}nonpositive(X){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Z.toString(X)})}nonnegative(X){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Z.toString(X)})}multipleOf(X,Q){return this._addCheck({kind:"multipleOf",value:X,message:Z.toString(Q)})}finite(X){return this._addCheck({kind:"finite",message:Z.toString(X)})}safe(X){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Z.toString(X)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Z.toString(X)})}get minValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X}get maxValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X}get isInt(){return!!this._def.checks.find((X)=>X.kind==="int"||X.kind==="multipleOf"&&n.isInteger(X.value))}get isFinite(){let X=null,Q=null;for(let $ of this._def.checks)if($.kind==="finite"||$.kind==="int"||$.kind==="multipleOf")return!0;else if($.kind==="min"){if(Q===null||$.value>Q)Q=$.value}else if($.kind==="max"){if(X===null||$.value<X)X=$.value}return Number.isFinite(Q)&&Number.isFinite(X)}}b6.create=(X)=>{return new b6({checks:[],typeName:j.ZodNumber,coerce:X?.coerce||!1,...l(X)})};class P6 extends d{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(X){if(this._def.coerce)try{X.data=BigInt(X.data)}catch{return this._getInvalidInput(X)}if(this._getType(X)!==I.bigint)return this._getInvalidInput(X);let $=void 0,Y=new b0;for(let W of this._def.checks)if(W.kind==="min"){if(W.inclusive?X.data<W.value:X.data<=W.value)$=this._getOrReturnCtx(X,$),b($,{code:A.too_small,type:"bigint",minimum:W.value,inclusive:W.inclusive,message:W.message}),Y.dirty()}else if(W.kind==="max"){if(W.inclusive?X.data>W.value:X.data>=W.value)$=this._getOrReturnCtx(X,$),b($,{code:A.too_big,type:"bigint",maximum:W.value,inclusive:W.inclusive,message:W.message}),Y.dirty()}else if(W.kind==="multipleOf"){if(X.data%W.value!==BigInt(0))$=this._getOrReturnCtx(X,$),b($,{code:A.not_multiple_of,multipleOf:W.value,message:W.message}),Y.dirty()}else n.assertNever(W);return{status:Y.value,value:X.data}}_getInvalidInput(X){let Q=this._getOrReturnCtx(X);return b(Q,{code:A.invalid_type,expected:I.bigint,received:Q.parsedType}),g}gte(X,Q){return this.setLimit("min",X,!0,Z.toString(Q))}gt(X,Q){return this.setLimit("min",X,!1,Z.toString(Q))}lte(X,Q){return this.setLimit("max",X,!0,Z.toString(Q))}lt(X,Q){return this.setLimit("max",X,!1,Z.toString(Q))}setLimit(X,Q,$,Y){return new P6({...this._def,checks:[...this._def.checks,{kind:X,value:Q,inclusive:$,message:Z.toString(Y)}]})}_addCheck(X){return new P6({...this._def,checks:[...this._def.checks,X]})}positive(X){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Z.toString(X)})}negative(X){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Z.toString(X)})}nonpositive(X){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Z.toString(X)})}nonnegative(X){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Z.toString(X)})}multipleOf(X,Q){return this._addCheck({kind:"multipleOf",value:X,message:Z.toString(Q)})}get minValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X}get maxValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X}}P6.create=(X)=>{return new P6({checks:[],typeName:j.ZodBigInt,coerce:X?.coerce??!1,...l(X)})};class D4 extends d{_parse(X){if(this._def.coerce)X.data=Boolean(X.data);if(this._getType(X)!==I.boolean){let $=this._getOrReturnCtx(X);return b($,{code:A.invalid_type,expected:I.boolean,received:$.parsedType}),g}return C0(X.data)}}D4.create=(X)=>{return new D4({typeName:j.ZodBoolean,coerce:X?.coerce||!1,...l(X)})};class GX extends d{_parse(X){if(this._def.coerce)X.data=new Date(X.data);if(this._getType(X)!==I.date){let W=this._getOrReturnCtx(X);return b(W,{code:A.invalid_type,expected:I.date,received:W.parsedType}),g}if(Number.isNaN(X.data.getTime())){let W=this._getOrReturnCtx(X);return b(W,{code:A.invalid_date}),g}let $=new b0,Y=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(X.data.getTime()<W.value)Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.too_small,message:W.message,inclusive:!0,exact:!1,minimum:W.value,type:"date"}),$.dirty()}else if(W.kind==="max"){if(X.data.getTime()>W.value)Y=this._getOrReturnCtx(X,Y),b(Y,{code:A.too_big,message:W.message,inclusive:!0,exact:!1,maximum:W.value,type:"date"}),$.dirty()}else n.assertNever(W);return{status:$.value,value:new Date(X.data.getTime())}}_addCheck(X){return new GX({...this._def,checks:[...this._def.checks,X]})}min(X,Q){return this._addCheck({kind:"min",value:X.getTime(),message:Z.toString(Q)})}max(X,Q){return this._addCheck({kind:"max",value:X.getTime(),message:Z.toString(Q)})}get minDate(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X!=null?new Date(X):null}get maxDate(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X!=null?new Date(X):null}}GX.create=(X)=>{return new GX({checks:[],coerce:X?.coerce||!1,typeName:j.ZodDate,...l(X)})};class w4 extends d{_parse(X){if(this._getType(X)!==I.symbol){let $=this._getOrReturnCtx(X);return b($,{code:A.invalid_type,expected:I.symbol,received:$.parsedType}),g}return C0(X.data)}}w4.create=(X)=>{return new w4({typeName:j.ZodSymbol,...l(X)})};class HX extends d{_parse(X){if(this._getType(X)!==I.undefined){let $=this._getOrReturnCtx(X);return b($,{code:A.invalid_type,expected:I.undefined,received:$.parsedType}),g}return C0(X.data)}}HX.create=(X)=>{return new HX({typeName:j.ZodUndefined,...l(X)})};class BX extends d{_parse(X){if(this._getType(X)!==I.null){let $=this._getOrReturnCtx(X);return b($,{code:A.invalid_type,expected:I.null,received:$.parsedType}),g}return C0(X.data)}}BX.create=(X)=>{return new BX({typeName:j.ZodNull,...l(X)})};class A4 extends d{constructor(){super(...arguments);this._any=!0}_parse(X){return C0(X.data)}}A4.create=(X)=>{return new A4({typeName:j.ZodAny,...l(X)})};class s1 extends d{constructor(){super(...arguments);this._unknown=!0}_parse(X){return C0(X.data)}}s1.create=(X)=>{return new s1({typeName:j.ZodUnknown,...l(X)})};class A1 extends d{_parse(X){let Q=this._getOrReturnCtx(X);return b(Q,{code:A.invalid_type,expected:I.never,received:Q.parsedType}),g}}A1.create=(X)=>{return new A1({typeName:j.ZodNever,...l(X)})};class M4 extends d{_parse(X){if(this._getType(X)!==I.undefined){let $=this._getOrReturnCtx(X);return b($,{code:A.invalid_type,expected:I.void,received:$.parsedType}),g}return C0(X.data)}}M4.create=(X)=>{return new M4({typeName:j.ZodVoid,...l(X)})};class W1 extends d{_parse(X){let{ctx:Q,status:$}=this._processInputParams(X),Y=this._def;if(Q.parsedType!==I.array)return b(Q,{code:A.invalid_type,expected:I.array,received:Q.parsedType}),g;if(Y.exactLength!==null){let J=Q.data.length>Y.exactLength.value,G=Q.data.length<Y.exactLength.value;if(J||G)b(Q,{code:J?A.too_big:A.too_small,minimum:G?Y.exactLength.value:void 0,maximum:J?Y.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Y.exactLength.message}),$.dirty()}if(Y.minLength!==null){if(Q.data.length<Y.minLength.value)b(Q,{code:A.too_small,minimum:Y.minLength.value,type:"array",inclusive:!0,exact:!1,message:Y.minLength.message}),$.dirty()}if(Y.maxLength!==null){if(Q.data.length>Y.maxLength.value)b(Q,{code:A.too_big,maximum:Y.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Y.maxLength.message}),$.dirty()}if(Q.common.async)return Promise.all([...Q.data].map((J,G)=>{return Y.type._parseAsync(new r0(Q,J,Q.path,G))})).then((J)=>{return b0.mergeArray($,J)});let W=[...Q.data].map((J,G)=>{return Y.type._parseSync(new r0(Q,J,Q.path,G))});return b0.mergeArray($,W)}get element(){return this._def.type}min(X,Q){return new W1({...this._def,minLength:{value:X,message:Z.toString(Q)}})}max(X,Q){return new W1({...this._def,maxLength:{value:X,message:Z.toString(Q)}})}length(X,Q){return new W1({...this._def,exactLength:{value:X,message:Z.toString(Q)}})}nonempty(X){return this.min(1,X)}}W1.create=(X,Q)=>{return new W1({type:X,minLength:null,maxLength:null,exactLength:null,typeName:j.ZodArray,...l(Q)})};function E6(X){if(X instanceof V0){let Q={};for(let $ in X.shape){let Y=X.shape[$];Q[$]=J1.create(E6(Y))}return new V0({...X._def,shape:()=>Q})}else if(X instanceof W1)return new W1({...X._def,type:E6(X.element)});else if(X instanceof J1)return J1.create(E6(X.unwrap()));else if(X instanceof T1)return T1.create(E6(X.unwrap()));else if(X instanceof M1)return M1.create(X.items.map((Q)=>E6(Q)));else return X}class V0 extends d{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let X=this._def.shape(),Q=n.objectKeys(X);return this._cached={shape:X,keys:Q},this._cached}_parse(X){if(this._getType(X)!==I.object){let B=this._getOrReturnCtx(X);return b(B,{code:A.invalid_type,expected:I.object,received:B.parsedType}),g}let{status:$,ctx:Y}=this._processInputParams(X),{shape:W,keys:J}=this._getCached(),G=[];if(!(this._def.catchall instanceof A1&&this._def.unknownKeys==="strip")){for(let B in Y.data)if(!J.includes(B))G.push(B)}let H=[];for(let B of J){let z=W[B],K=Y.data[B];H.push({key:{status:"valid",value:B},value:z._parse(new r0(Y,K,Y.path,B)),alwaysSet:B in Y.data})}if(this._def.catchall instanceof A1){let B=this._def.unknownKeys;if(B==="passthrough")for(let z of G)H.push({key:{status:"valid",value:z},value:{status:"valid",value:Y.data[z]}});else if(B==="strict"){if(G.length>0)b(Y,{code:A.unrecognized_keys,keys:G}),$.dirty()}else if(B==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let B=this._def.catchall;for(let z of G){let K=Y.data[z];H.push({key:{status:"valid",value:z},value:B._parse(new r0(Y,K,Y.path,z)),alwaysSet:z in Y.data})}}if(Y.common.async)return Promise.resolve().then(async()=>{let B=[];for(let z of H){let K=await z.key,V=await z.value;B.push({key:K,value:V,alwaysSet:z.alwaysSet})}return B}).then((B)=>{return b0.mergeObjectSync($,B)});else return b0.mergeObjectSync($,H)}get shape(){return this._def.shape()}strict(X){return Z.errToObj,new V0({...this._def,unknownKeys:"strict",...X!==void 0?{errorMap:(Q,$)=>{let Y=this._def.errorMap?.(Q,$).message??$.defaultError;if(Q.code==="unrecognized_keys")return{message:Z.errToObj(X).message??Y};return{message:Y}}}:{}})}strip(){return new V0({...this._def,unknownKeys:"strip"})}passthrough(){return new V0({...this._def,unknownKeys:"passthrough"})}extend(X){return new V0({...this._def,shape:()=>({...this._def.shape(),...X})})}merge(X){return new V0({unknownKeys:X._def.unknownKeys,catchall:X._def.catchall,shape:()=>({...this._def.shape(),...X._def.shape()}),typeName:j.ZodObject})}setKey(X,Q){return this.augment({[X]:Q})}catchall(X){return new V0({...this._def,catchall:X})}pick(X){let Q={};for(let $ of n.objectKeys(X))if(X[$]&&this.shape[$])Q[$]=this.shape[$];return new V0({...this._def,shape:()=>Q})}omit(X){let Q={};for(let $ of n.objectKeys(this.shape))if(!X[$])Q[$]=this.shape[$];return new V0({...this._def,shape:()=>Q})}deepPartial(){return E6(this)}partial(X){let Q={};for(let $ of n.objectKeys(this.shape)){let Y=this.shape[$];if(X&&!X[$])Q[$]=Y;else Q[$]=Y.optional()}return new V0({...this._def,shape:()=>Q})}required(X){let Q={};for(let $ of n.objectKeys(this.shape))if(X&&!X[$])Q[$]=this.shape[$];else{let W=this.shape[$];while(W instanceof J1)W=W._def.innerType;Q[$]=W}return new V0({...this._def,shape:()=>Q})}keyof(){return OW(n.objectKeys(this.shape))}}V0.create=(X,Q)=>{return new V0({shape:()=>X,unknownKeys:"strip",catchall:A1.create(),typeName:j.ZodObject,...l(Q)})};V0.strictCreate=(X,Q)=>{return new V0({shape:()=>X,unknownKeys:"strict",catchall:A1.create(),typeName:j.ZodObject,...l(Q)})};V0.lazycreate=(X,Q)=>{return new V0({shape:X,unknownKeys:"strip",catchall:A1.create(),typeName:j.ZodObject,...l(Q)})};class zX extends d{_parse(X){let{ctx:Q}=this._processInputParams(X),$=this._def.options;function Y(W){for(let G of W)if(G.result.status==="valid")return G.result;for(let G of W)if(G.result.status==="dirty")return Q.common.issues.push(...G.ctx.common.issues),G.result;let J=W.map((G)=>new f0(G.ctx.common.issues));return b(Q,{code:A.invalid_union,unionErrors:J}),g}if(Q.common.async)return Promise.all($.map(async(W)=>{let J={...Q,common:{...Q.common,issues:[]},parent:null};return{result:await W._parseAsync({data:Q.data,path:Q.path,parent:J}),ctx:J}})).then(Y);else{let W=void 0,J=[];for(let H of $){let B={...Q,common:{...Q.common,issues:[]},parent:null},z=H._parseSync({data:Q.data,path:Q.path,parent:B});if(z.status==="valid")return z;else if(z.status==="dirty"&&!W)W={result:z,ctx:B};if(B.common.issues.length)J.push(B.common.issues)}if(W)return Q.common.issues.push(...W.ctx.common.issues),W.result;let G=J.map((H)=>new f0(H));return b(Q,{code:A.invalid_union,unionErrors:G}),g}}get options(){return this._def.options}}zX.create=(X,Q)=>{return new zX({options:X,typeName:j.ZodUnion,...l(Q)})};var D1=(X)=>{if(X instanceof UX)return D1(X.schema);else if(X instanceof G1)return D1(X.innerType());else if(X instanceof VX)return[X.value];else if(X instanceof e1)return X.options;else if(X instanceof LX)return n.objectValues(X.enum);else if(X instanceof qX)return D1(X._def.innerType);else if(X instanceof HX)return[void 0];else if(X instanceof BX)return[null];else if(X instanceof J1)return[void 0,...D1(X.unwrap())];else if(X instanceof T1)return[null,...D1(X.unwrap())];else if(X instanceof w9)return D1(X.unwrap());else if(X instanceof NX)return D1(X.unwrap());else if(X instanceof FX)return D1(X._def.innerType);else return[]};class D9 extends d{_parse(X){let{ctx:Q}=this._processInputParams(X);if(Q.parsedType!==I.object)return b(Q,{code:A.invalid_type,expected:I.object,received:Q.parsedType}),g;let $=this.discriminator,Y=Q.data[$],W=this.optionsMap.get(Y);if(!W)return b(Q,{code:A.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[$]}),g;if(Q.common.async)return W._parseAsync({data:Q.data,path:Q.path,parent:Q});else return W._parseSync({data:Q.data,path:Q.path,parent:Q})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(X,Q,$){let Y=new Map;for(let W of Q){let J=D1(W.shape[X]);if(!J.length)throw Error(`A discriminator value for key \`${X}\` could not be extracted from all schema options`);for(let G of J){if(Y.has(G))throw Error(`Discriminator property ${String(X)} has duplicate value ${String(G)}`);Y.set(G,W)}}return new D9({typeName:j.ZodDiscriminatedUnion,discriminator:X,options:Q,optionsMap:Y,...l($)})}}function O9(X,Q){let $=O1(X),Y=O1(Q);if(X===Q)return{valid:!0,data:X};else if($===I.object&&Y===I.object){let W=n.objectKeys(Q),J=n.objectKeys(X).filter((H)=>W.indexOf(H)!==-1),G={...X,...Q};for(let H of J){let B=O9(X[H],Q[H]);if(!B.valid)return{valid:!1};G[H]=B.data}return{valid:!0,data:G}}else if($===I.array&&Y===I.array){if(X.length!==Q.length)return{valid:!1};let W=[];for(let J=0;J<X.length;J++){let G=X[J],H=Q[J],B=O9(G,H);if(!B.valid)return{valid:!1};W.push(B.data)}return{valid:!0,data:W}}else if($===I.date&&Y===I.date&&+X===+Q)return{valid:!0,data:X};else return{valid:!1}}class KX extends d{_parse(X){let{status:Q,ctx:$}=this._processInputParams(X),Y=(W,J)=>{if(q9(W)||q9(J))return g;let G=O9(W.value,J.value);if(!G.valid)return b($,{code:A.invalid_intersection_types}),g;if(F9(W)||F9(J))Q.dirty();return{status:Q.value,value:G.data}};if($.common.async)return Promise.all([this._def.left._parseAsync({data:$.data,path:$.path,parent:$}),this._def.right._parseAsync({data:$.data,path:$.path,parent:$})]).then(([W,J])=>Y(W,J));else return Y(this._def.left._parseSync({data:$.data,path:$.path,parent:$}),this._def.right._parseSync({data:$.data,path:$.path,parent:$}))}}KX.create=(X,Q,$)=>{return new KX({left:X,right:Q,typeName:j.ZodIntersection,...l($)})};class M1 extends d{_parse(X){let{status:Q,ctx:$}=this._processInputParams(X);if($.parsedType!==I.array)return b($,{code:A.invalid_type,expected:I.array,received:$.parsedType}),g;if($.data.length<this._def.items.length)return b($,{code:A.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g;if(!this._def.rest&&$.data.length>this._def.items.length)b($,{code:A.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Q.dirty();let W=[...$.data].map((J,G)=>{let H=this._def.items[G]||this._def.rest;if(!H)return null;return H._parse(new r0($,J,$.path,G))}).filter((J)=>!!J);if($.common.async)return Promise.all(W).then((J)=>{return b0.mergeArray(Q,J)});else return b0.mergeArray(Q,W)}get items(){return this._def.items}rest(X){return new M1({...this._def,rest:X})}}M1.create=(X,Q)=>{if(!Array.isArray(X))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new M1({items:X,typeName:j.ZodTuple,rest:null,...l(Q)})};class j4 extends d{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(X){let{status:Q,ctx:$}=this._processInputParams(X);if($.parsedType!==I.object)return b($,{code:A.invalid_type,expected:I.object,received:$.parsedType}),g;let Y=[],W=this._def.keyType,J=this._def.valueType;for(let G in $.data)Y.push({key:W._parse(new r0($,G,$.path,G)),value:J._parse(new r0($,$.data[G],$.path,G)),alwaysSet:G in $.data});if($.common.async)return b0.mergeObjectAsync(Q,Y);else return b0.mergeObjectSync(Q,Y)}get element(){return this._def.valueType}static create(X,Q,$){if(Q instanceof d)return new j4({keyType:X,valueType:Q,typeName:j.ZodRecord,...l($)});return new j4({keyType:w1.create(),valueType:X,typeName:j.ZodRecord,...l(Q)})}}class R4 extends d{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(X){let{status:Q,ctx:$}=this._processInputParams(X);if($.parsedType!==I.map)return b($,{code:A.invalid_type,expected:I.map,received:$.parsedType}),g;let Y=this._def.keyType,W=this._def.valueType,J=[...$.data.entries()].map(([G,H],B)=>{return{key:Y._parse(new r0($,G,$.path,[B,"key"])),value:W._parse(new r0($,H,$.path,[B,"value"]))}});if($.common.async){let G=new Map;return Promise.resolve().then(async()=>{for(let H of J){let B=await H.key,z=await H.value;if(B.status==="aborted"||z.status==="aborted")return g;if(B.status==="dirty"||z.status==="dirty")Q.dirty();G.set(B.value,z.value)}return{status:Q.value,value:G}})}else{let G=new Map;for(let H of J){let{key:B,value:z}=H;if(B.status==="aborted"||z.status==="aborted")return g;if(B.status==="dirty"||z.status==="dirty")Q.dirty();G.set(B.value,z.value)}return{status:Q.value,value:G}}}}R4.create=(X,Q,$)=>{return new R4({valueType:Q,keyType:X,typeName:j.ZodMap,...l($)})};class S6 extends d{_parse(X){let{status:Q,ctx:$}=this._processInputParams(X);if($.parsedType!==I.set)return b($,{code:A.invalid_type,expected:I.set,received:$.parsedType}),g;let Y=this._def;if(Y.minSize!==null){if($.data.size<Y.minSize.value)b($,{code:A.too_small,minimum:Y.minSize.value,type:"set",inclusive:!0,exact:!1,message:Y.minSize.message}),Q.dirty()}if(Y.maxSize!==null){if($.data.size>Y.maxSize.value)b($,{code:A.too_big,maximum:Y.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Y.maxSize.message}),Q.dirty()}let W=this._def.valueType;function J(H){let B=new Set;for(let z of H){if(z.status==="aborted")return g;if(z.status==="dirty")Q.dirty();B.add(z.value)}return{status:Q.value,value:B}}let G=[...$.data.values()].map((H,B)=>W._parse(new r0($,H,$.path,B)));if($.common.async)return Promise.all(G).then((H)=>J(H));else return J(G)}min(X,Q){return new S6({...this._def,minSize:{value:X,message:Z.toString(Q)}})}max(X,Q){return new S6({...this._def,maxSize:{value:X,message:Z.toString(Q)}})}size(X,Q){return this.min(X,Q).max(X,Q)}nonempty(X){return this.min(1,X)}}S6.create=(X,Q)=>{return new S6({valueType:X,minSize:null,maxSize:null,typeName:j.ZodSet,...l(Q)})};class JX extends d{constructor(){super(...arguments);this.validate=this.implement}_parse(X){let{ctx:Q}=this._processInputParams(X);if(Q.parsedType!==I.function)return b(Q,{code:A.invalid_type,expected:I.function,received:Q.parsedType}),g;function $(G,H){return O4({data:G,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,YX(),_1].filter((B)=>!!B),issueData:{code:A.invalid_arguments,argumentsError:H}})}function Y(G,H){return O4({data:G,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,YX(),_1].filter((B)=>!!B),issueData:{code:A.invalid_return_type,returnTypeError:H}})}let W={errorMap:Q.common.contextualErrorMap},J=Q.data;if(this._def.returns instanceof Z6){let G=this;return C0(async function(...H){let B=new f0([]),z=await G._def.args.parseAsync(H,W).catch((L)=>{throw B.addIssue($(H,L)),B}),K=await Reflect.apply(J,this,z);return await G._def.returns._def.type.parseAsync(K,W).catch((L)=>{throw B.addIssue(Y(K,L)),B})})}else{let G=this;return C0(function(...H){let B=G._def.args.safeParse(H,W);if(!B.success)throw new f0([$(H,B.error)]);let z=Reflect.apply(J,this,B.data),K=G._def.returns.safeParse(z,W);if(!K.success)throw new f0([Y(z,K.error)]);return K.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...X){return new JX({...this._def,args:M1.create(X).rest(s1.create())})}returns(X){return new JX({...this._def,returns:X})}implement(X){return this.parse(X)}strictImplement(X){return this.parse(X)}static create(X,Q,$){return new JX({args:X?X:M1.create([]).rest(s1.create()),returns:Q||s1.create(),typeName:j.ZodFunction,...l($)})}}class UX extends d{get schema(){return this._def.getter()}_parse(X){let{ctx:Q}=this._processInputParams(X);return this._def.getter()._parse({data:Q.data,path:Q.path,parent:Q})}}UX.create=(X,Q)=>{return new UX({getter:X,typeName:j.ZodLazy,...l(Q)})};class VX extends d{_parse(X){if(X.data!==this._def.value){let Q=this._getOrReturnCtx(X);return b(Q,{received:Q.data,code:A.invalid_literal,expected:this._def.value}),g}return{status:"valid",value:X.data}}get value(){return this._def.value}}VX.create=(X,Q)=>{return new VX({value:X,typeName:j.ZodLiteral,...l(Q)})};function OW(X,Q){return new e1({values:X,typeName:j.ZodEnum,...l(Q)})}class e1 extends d{_parse(X){if(typeof X.data!=="string"){let Q=this._getOrReturnCtx(X),$=this._def.values;return b(Q,{expected:n.joinValues($),received:Q.parsedType,code:A.invalid_type}),g}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(X.data)){let Q=this._getOrReturnCtx(X),$=this._def.values;return b(Q,{received:Q.data,code:A.invalid_enum_value,options:$}),g}return C0(X.data)}get options(){return this._def.values}get enum(){let X={};for(let Q of this._def.values)X[Q]=Q;return X}get Values(){let X={};for(let Q of this._def.values)X[Q]=Q;return X}get Enum(){let X={};for(let Q of this._def.values)X[Q]=Q;return X}extract(X,Q=this._def){return e1.create(X,{...this._def,...Q})}exclude(X,Q=this._def){return e1.create(this.options.filter(($)=>!X.includes($)),{...this._def,...Q})}}e1.create=OW;class LX extends d{_parse(X){let Q=n.getValidEnumValues(this._def.values),$=this._getOrReturnCtx(X);if($.parsedType!==I.string&&$.parsedType!==I.number){let Y=n.objectValues(Q);return b($,{expected:n.joinValues(Y),received:$.parsedType,code:A.invalid_type}),g}if(!this._cache)this._cache=new Set(n.getValidEnumValues(this._def.values));if(!this._cache.has(X.data)){let Y=n.objectValues(Q);return b($,{received:$.data,code:A.invalid_enum_value,options:Y}),g}return C0(X.data)}get enum(){return this._def.values}}LX.create=(X,Q)=>{return new LX({values:X,typeName:j.ZodNativeEnum,...l(Q)})};class Z6 extends d{unwrap(){return this._def.type}_parse(X){let{ctx:Q}=this._processInputParams(X);if(Q.parsedType!==I.promise&&Q.common.async===!1)return b(Q,{code:A.invalid_type,expected:I.promise,received:Q.parsedType}),g;let $=Q.parsedType===I.promise?Q.data:Promise.resolve(Q.data);return C0($.then((Y)=>{return this._def.type.parseAsync(Y,{path:Q.path,errorMap:Q.common.contextualErrorMap})}))}}Z6.create=(X,Q)=>{return new Z6({type:X,typeName:j.ZodPromise,...l(Q)})};class G1 extends d{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===j.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(X){let{status:Q,ctx:$}=this._processInputParams(X),Y=this._def.effect||null,W={addIssue:(J)=>{if(b($,J),J.fatal)Q.abort();else Q.dirty()},get path(){return $.path}};if(W.addIssue=W.addIssue.bind(W),Y.type==="preprocess"){let J=Y.transform($.data,W);if($.common.async)return Promise.resolve(J).then(async(G)=>{if(Q.value==="aborted")return g;let H=await this._def.schema._parseAsync({data:G,path:$.path,parent:$});if(H.status==="aborted")return g;if(H.status==="dirty")return I6(H.value);if(Q.value==="dirty")return I6(H.value);return H});else{if(Q.value==="aborted")return g;let G=this._def.schema._parseSync({data:J,path:$.path,parent:$});if(G.status==="aborted")return g;if(G.status==="dirty")return I6(G.value);if(Q.value==="dirty")return I6(G.value);return G}}if(Y.type==="refinement"){let J=(G)=>{let H=Y.refinement(G,W);if($.common.async)return Promise.resolve(H);if(H instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return G};if($.common.async===!1){let G=this._def.schema._parseSync({data:$.data,path:$.path,parent:$});if(G.status==="aborted")return g;if(G.status==="dirty")Q.dirty();return J(G.value),{status:Q.value,value:G.value}}else return this._def.schema._parseAsync({data:$.data,path:$.path,parent:$}).then((G)=>{if(G.status==="aborted")return g;if(G.status==="dirty")Q.dirty();return J(G.value).then(()=>{return{status:Q.value,value:G.value}})})}if(Y.type==="transform")if($.common.async===!1){let J=this._def.schema._parseSync({data:$.data,path:$.path,parent:$});if(!a1(J))return g;let G=Y.transform(J.value,W);if(G instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:Q.value,value:G}}else return this._def.schema._parseAsync({data:$.data,path:$.path,parent:$}).then((J)=>{if(!a1(J))return g;return Promise.resolve(Y.transform(J.value,W)).then((G)=>({status:Q.value,value:G}))});n.assertNever(Y)}}G1.create=(X,Q,$)=>{return new G1({schema:X,typeName:j.ZodEffects,effect:Q,...l($)})};G1.createWithPreprocess=(X,Q,$)=>{return new G1({schema:Q,effect:{type:"preprocess",transform:X},typeName:j.ZodEffects,...l($)})};class J1 extends d{_parse(X){if(this._getType(X)===I.undefined)return C0(void 0);return this._def.innerType._parse(X)}unwrap(){return this._def.innerType}}J1.create=(X,Q)=>{return new J1({innerType:X,typeName:j.ZodOptional,...l(Q)})};class T1 extends d{_parse(X){if(this._getType(X)===I.null)return C0(null);return this._def.innerType._parse(X)}unwrap(){return this._def.innerType}}T1.create=(X,Q)=>{return new T1({innerType:X,typeName:j.ZodNullable,...l(Q)})};class qX extends d{_parse(X){let{ctx:Q}=this._processInputParams(X),$=Q.data;if(Q.parsedType===I.undefined)$=this._def.defaultValue();return this._def.innerType._parse({data:$,path:Q.path,parent:Q})}removeDefault(){return this._def.innerType}}qX.create=(X,Q)=>{return new qX({innerType:X,typeName:j.ZodDefault,defaultValue:typeof Q.default==="function"?Q.default:()=>Q.default,...l(Q)})};class FX extends d{_parse(X){let{ctx:Q}=this._processInputParams(X),$={...Q,common:{...Q.common,issues:[]}},Y=this._def.innerType._parse({data:$.data,path:$.path,parent:{...$}});if(WX(Y))return Y.then((W)=>{return{status:"valid",value:W.status==="valid"?W.value:this._def.catchValue({get error(){return new f0($.common.issues)},input:$.data})}});else return{status:"valid",value:Y.status==="valid"?Y.value:this._def.catchValue({get error(){return new f0($.common.issues)},input:$.data})}}removeCatch(){return this._def.innerType}}FX.create=(X,Q)=>{return new FX({innerType:X,typeName:j.ZodCatch,catchValue:typeof Q.catch==="function"?Q.catch:()=>Q.catch,...l(Q)})};class I4 extends d{_parse(X){if(this._getType(X)!==I.nan){let $=this._getOrReturnCtx(X);return b($,{code:A.invalid_type,expected:I.nan,received:$.parsedType}),g}return{status:"valid",value:X.data}}}I4.create=(X)=>{return new I4({typeName:j.ZodNaN,...l(X)})};var E2=Symbol("zod_brand");class w9 extends d{_parse(X){let{ctx:Q}=this._processInputParams(X),$=Q.data;return this._def.type._parse({data:$,path:Q.path,parent:Q})}unwrap(){return this._def.type}}class E4 extends d{_parse(X){let{status:Q,ctx:$}=this._processInputParams(X);if($.common.async)return(async()=>{let W=await this._def.in._parseAsync({data:$.data,path:$.path,parent:$});if(W.status==="aborted")return g;if(W.status==="dirty")return Q.dirty(),I6(W.value);else return this._def.out._parseAsync({data:W.value,path:$.path,parent:$})})();else{let Y=this._def.in._parseSync({data:$.data,path:$.path,parent:$});if(Y.status==="aborted")return g;if(Y.status==="dirty")return Q.dirty(),{status:"dirty",value:Y.value};else return this._def.out._parseSync({data:Y.value,path:$.path,parent:$})}}static create(X,Q){return new E4({in:X,out:Q,typeName:j.ZodPipeline})}}class NX extends d{_parse(X){let Q=this._def.innerType._parse(X),$=(Y)=>{if(a1(Y))Y.value=Object.freeze(Y.value);return Y};return WX(Q)?Q.then((Y)=>$(Y)):$(Q)}unwrap(){return this._def.innerType}}NX.create=(X,Q)=>{return new NX({innerType:X,typeName:j.ZodReadonly,...l(Q)})};var b2={object:V0.lazycreate},j;(function(X){X.ZodString="ZodString",X.ZodNumber="ZodNumber",X.ZodNaN="ZodNaN",X.ZodBigInt="ZodBigInt",X.ZodBoolean="ZodBoolean",X.ZodDate="ZodDate",X.ZodSymbol="ZodSymbol",X.ZodUndefined="ZodUndefined",X.ZodNull="ZodNull",X.ZodAny="ZodAny",X.ZodUnknown="ZodUnknown",X.ZodNever="ZodNever",X.ZodVoid="ZodVoid",X.ZodArray="ZodArray",X.ZodObject="ZodObject",X.ZodUnion="ZodUnion",X.ZodDiscriminatedUnion="ZodDiscriminatedUnion",X.ZodIntersection="ZodIntersection",X.ZodTuple="ZodTuple",X.ZodRecord="ZodRecord",X.ZodMap="ZodMap",X.ZodSet="ZodSet",X.ZodFunction="ZodFunction",X.ZodLazy="ZodLazy",X.ZodLiteral="ZodLiteral",X.ZodEnum="ZodEnum",X.ZodEffects="ZodEffects",X.ZodNativeEnum="ZodNativeEnum",X.ZodOptional="ZodOptional",X.ZodNullable="ZodNullable",X.ZodDefault="ZodDefault",X.ZodCatch="ZodCatch",X.ZodPromise="ZodPromise",X.ZodBranded="ZodBranded",X.ZodPipeline="ZodPipeline",X.ZodReadonly="ZodReadonly"})(j||(j={}));var P2=w1.create,S2=b6.create,Z2=I4.create,C2=P6.create,k2=D4.create,v2=GX.create,_2=w4.create,T2=HX.create,x2=BX.create,y2=A4.create,g2=s1.create,h2=A1.create,f2=M4.create,u2=W1.create,DW=V0.create,l2=V0.strictCreate,m2=zX.create,c2=D9.create,p2=KX.create,d2=M1.create,i2=j4.create,n2=R4.create,r2=S6.create,o2=JX.create,t2=UX.create,a2=VX.create,s2=e1.create,e2=LX.create,XS=Z6.create,QS=G1.create,$S=J1.create,YS=T1.create,WS=G1.createWithPreprocess,JS=E4.create;var TV=Object.freeze({status:"aborted"});function O(X,Q,$){function Y(H,B){var z;Object.defineProperty(H,"_zod",{value:H._zod??{},enumerable:!1}),(z=H._zod).traits??(z.traits=new Set),H._zod.traits.add(X),Q(H,B);for(let K in G.prototype)if(!(K in H))Object.defineProperty(H,K,{value:G.prototype[K].bind(H)});H._zod.constr=G,H._zod.def=B}let W=$?.Parent??Object;class J extends W{}Object.defineProperty(J,"name",{value:X});function G(H){var B;let z=$?.Parent?new J:this;Y(z,H),(B=z._zod).deferred??(B.deferred=[]);for(let K of z._zod.deferred)K();return z}return Object.defineProperty(G,"init",{value:Y}),Object.defineProperty(G,Symbol.hasInstance,{value:(H)=>{if($?.Parent&&H instanceof $.Parent)return!0;return H?._zod?.traits?.has(X)}}),Object.defineProperty(G,"name",{value:X}),G}var xV=Symbol("zod_brand");class x1 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}var b4={};function u0(X){if(X)Object.assign(b4,X);return b4}var i={};V7(i,{unwrapMessage:()=>OX,stringifyPrimitive:()=>Z4,required:()=>sV,randomString:()=>cV,propertyKeyTypes:()=>E9,promiseAllObject:()=>mV,primitiveTypes:()=>wW,prefixIssues:()=>H1,pick:()=>nV,partial:()=>aV,optionalKeys:()=>b9,omit:()=>rV,numKeys:()=>pV,nullish:()=>AX,normalizeParams:()=>y,merge:()=>tV,jsonStringifyReplacer:()=>M9,joinValues:()=>P4,issue:()=>S9,isPlainObject:()=>k6,isObject:()=>C6,getSizableOrigin:()=>MW,getParsedType:()=>dV,getLengthableOrigin:()=>jX,getEnumValues:()=>DX,getElementAtPath:()=>lV,floatSafeRemainder:()=>j9,finalizeIssue:()=>o0,extend:()=>oV,escapeRegex:()=>y1,esc:()=>X6,defineLazy:()=>Y0,createTransparentProxy:()=>iV,clone:()=>l0,cleanRegex:()=>MX,cleanEnum:()=>eV,captureStackTrace:()=>S4,cached:()=>wX,assignProp:()=>R9,assertNotEqual:()=>gV,assertNever:()=>fV,assertIs:()=>hV,assertEqual:()=>yV,assert:()=>uV,allowsEval:()=>I9,aborted:()=>Q6,NUMBER_FORMAT_RANGES:()=>P9,Class:()=>jW,BIGINT_FORMAT_RANGES:()=>AW});function yV(X){return X}function gV(X){return X}function hV(X){}function fV(X){throw Error()}function uV(X){}function DX(X){let Q=Object.values(X).filter((Y)=>typeof Y==="number");return Object.entries(X).filter(([Y,W])=>Q.indexOf(+Y)===-1).map(([Y,W])=>W)}function P4(X,Q="|"){return X.map(($)=>Z4($)).join(Q)}function M9(X,Q){if(typeof Q==="bigint")return Q.toString();return Q}function wX(X){return{get value(){{let $=X();return Object.defineProperty(this,"value",{value:$}),$}throw Error("cached value already set")}}}function AX(X){return X===null||X===void 0}function MX(X){let Q=X.startsWith("^")?1:0,$=X.endsWith("$")?X.length-1:X.length;return X.slice(Q,$)}function j9(X,Q){let $=(X.toString().split(".")[1]||"").length,Y=(Q.toString().split(".")[1]||"").length,W=$>Y?$:Y,J=Number.parseInt(X.toFixed(W).replace(".","")),G=Number.parseInt(Q.toFixed(W).replace(".",""));return J%G/10**W}function Y0(X,Q,$){Object.defineProperty(X,Q,{get(){{let W=$();return X[Q]=W,W}throw Error("cached value already set")},set(W){Object.defineProperty(X,Q,{value:W})},configurable:!0})}function R9(X,Q,$){Object.defineProperty(X,Q,{value:$,writable:!0,enumerable:!0,configurable:!0})}function lV(X,Q){if(!Q)return X;return Q.reduce(($,Y)=>$?.[Y],X)}function mV(X){let Q=Object.keys(X),$=Q.map((Y)=>X[Y]);return Promise.all($).then((Y)=>{let W={};for(let J=0;J<Q.length;J++)W[Q[J]]=Y[J];return W})}function cV(X=10){let $="";for(let Y=0;Y<X;Y++)$+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return $}function X6(X){return JSON.stringify(X)}var S4=Error.captureStackTrace?Error.captureStackTrace:(...X)=>{};function C6(X){return typeof X==="object"&&X!==null&&!Array.isArray(X)}var I9=wX(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(X){return!1}});function k6(X){if(C6(X)===!1)return!1;let Q=X.constructor;if(Q===void 0)return!0;let $=Q.prototype;if(C6($)===!1)return!1;if(Object.prototype.hasOwnProperty.call($,"isPrototypeOf")===!1)return!1;return!0}function pV(X){let Q=0;for(let $ in X)if(Object.prototype.hasOwnProperty.call(X,$))Q++;return Q}var dV=(X)=>{let Q=typeof X;switch(Q){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(X)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(X))return"array";if(X===null)return"null";if(X.then&&typeof X.then==="function"&&X.catch&&typeof X.catch==="function")return"promise";if(typeof Map<"u"&&X instanceof Map)return"map";if(typeof Set<"u"&&X instanceof Set)return"set";if(typeof Date<"u"&&X instanceof Date)return"date";if(typeof File<"u"&&X instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${Q}`)}},E9=new Set(["string","number","symbol"]),wW=new Set(["string","number","bigint","boolean","symbol","undefined"]);function y1(X){return X.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l0(X,Q,$){let Y=new X._zod.constr(Q??X._zod.def);if(!Q||$?.parent)Y._zod.parent=X;return Y}function y(X){let Q=X;if(!Q)return{};if(typeof Q==="string")return{error:()=>Q};if(Q?.message!==void 0){if(Q?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");Q.error=Q.message}if(delete Q.message,typeof Q.error==="string")return{...Q,error:()=>Q.error};return Q}function iV(X){let Q;return new Proxy({},{get($,Y,W){return Q??(Q=X()),Reflect.get(Q,Y,W)},set($,Y,W,J){return Q??(Q=X()),Reflect.set(Q,Y,W,J)},has($,Y){return Q??(Q=X()),Reflect.has(Q,Y)},deleteProperty($,Y){return Q??(Q=X()),Reflect.deleteProperty(Q,Y)},ownKeys($){return Q??(Q=X()),Reflect.ownKeys(Q)},getOwnPropertyDescriptor($,Y){return Q??(Q=X()),Reflect.getOwnPropertyDescriptor(Q,Y)},defineProperty($,Y,W){return Q??(Q=X()),Reflect.defineProperty(Q,Y,W)}})}function Z4(X){if(typeof X==="bigint")return X.toString()+"n";if(typeof X==="string")return`"${X}"`;return`${X}`}function b9(X){return Object.keys(X).filter((Q)=>{return X[Q]._zod.optin==="optional"&&X[Q]._zod.optout==="optional"})}var P9={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},AW={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function nV(X,Q){let $={},Y=X._zod.def;for(let W in Q){if(!(W in Y.shape))throw Error(`Unrecognized key: "${W}"`);if(!Q[W])continue;$[W]=Y.shape[W]}return l0(X,{...X._zod.def,shape:$,checks:[]})}function rV(X,Q){let $={...X._zod.def.shape},Y=X._zod.def;for(let W in Q){if(!(W in Y.shape))throw Error(`Unrecognized key: "${W}"`);if(!Q[W])continue;delete $[W]}return l0(X,{...X._zod.def,shape:$,checks:[]})}function oV(X,Q){if(!k6(Q))throw Error("Invalid input to extend: expected a plain object");let $={...X._zod.def,get shape(){let Y={...X._zod.def.shape,...Q};return R9(this,"shape",Y),Y},checks:[]};return l0(X,$)}function tV(X,Q){return l0(X,{...X._zod.def,get shape(){let $={...X._zod.def.shape,...Q._zod.def.shape};return R9(this,"shape",$),$},catchall:Q._zod.def.catchall,checks:[]})}function aV(X,Q,$){let Y=Q._zod.def.shape,W={...Y};if($)for(let J in $){if(!(J in Y))throw Error(`Unrecognized key: "${J}"`);if(!$[J])continue;W[J]=X?new X({type:"optional",innerType:Y[J]}):Y[J]}else for(let J in Y)W[J]=X?new X({type:"optional",innerType:Y[J]}):Y[J];return l0(Q,{...Q._zod.def,shape:W,checks:[]})}function sV(X,Q,$){let Y=Q._zod.def.shape,W={...Y};if($)for(let J in $){if(!(J in W))throw Error(`Unrecognized key: "${J}"`);if(!$[J])continue;W[J]=new X({type:"nonoptional",innerType:Y[J]})}else for(let J in Y)W[J]=new X({type:"nonoptional",innerType:Y[J]});return l0(Q,{...Q._zod.def,shape:W,checks:[]})}function Q6(X,Q=0){for(let $=Q;$<X.issues.length;$++)if(X.issues[$]?.continue!==!0)return!0;return!1}function H1(X,Q){return Q.map(($)=>{var Y;return(Y=$).path??(Y.path=[]),$.path.unshift(X),$})}function OX(X){return typeof X==="string"?X:X?.message}function o0(X,Q,$){let Y={...X,path:X.path??[]};if(!X.message){let W=OX(X.inst?._zod.def?.error?.(X))??OX(Q?.error?.(X))??OX($.customError?.(X))??OX($.localeError?.(X))??"Invalid input";Y.message=W}if(delete Y.inst,delete Y.continue,!Q?.reportInput)delete Y.input;return Y}function MW(X){if(X instanceof Set)return"set";if(X instanceof Map)return"map";if(X instanceof File)return"file";return"unknown"}function jX(X){if(Array.isArray(X))return"array";if(typeof X==="string")return"string";return"unknown"}function S9(...X){let[Q,$,Y]=X;if(typeof Q==="string")return{message:Q,code:"custom",input:$,inst:Y};return{...Q}}function eV(X){return Object.entries(X).filter(([Q,$])=>{return Number.isNaN(Number.parseInt(Q,10))}).map((Q)=>Q[1])}class jW{constructor(...X){}}var RW=(X,Q)=>{X.name="$ZodError",Object.defineProperty(X,"_zod",{value:X._zod,enumerable:!1}),Object.defineProperty(X,"issues",{value:Q,enumerable:!1}),Object.defineProperty(X,"message",{get(){return JSON.stringify(Q,M9,2)},enumerable:!0})},C4=O("$ZodError",RW),RX=O("$ZodError",RW,{Parent:Error});function Z9(X,Q=($)=>$.message){let $={},Y=[];for(let W of X.issues)if(W.path.length>0)$[W.path[0]]=$[W.path[0]]||[],$[W.path[0]].push(Q(W));else Y.push(Q(W));return{formErrors:Y,fieldErrors:$}}function C9(X,Q){let $=Q||function(J){return J.message},Y={_errors:[]},W=(J)=>{for(let G of J.issues)if(G.code==="invalid_union"&&G.errors.length)G.errors.map((H)=>W({issues:H}));else if(G.code==="invalid_key")W({issues:G.issues});else if(G.code==="invalid_element")W({issues:G.issues});else if(G.path.length===0)Y._errors.push($(G));else{let H=Y,B=0;while(B<G.path.length){let z=G.path[B];if(B!==G.path.length-1)H[z]=H[z]||{_errors:[]};else H[z]=H[z]||{_errors:[]},H[z]._errors.push($(G));H=H[z],B++}}};return W(X),Y}var k9=(X)=>(Q,$,Y,W)=>{let J=Y?Object.assign(Y,{async:!1}):{async:!1},G=Q._zod.run({value:$,issues:[]},J);if(G instanceof Promise)throw new x1;if(G.issues.length){let H=new(W?.Err??X)(G.issues.map((B)=>o0(B,J,u0())));throw S4(H,W?.callee),H}return G.value},v9=k9(RX),_9=(X)=>async(Q,$,Y,W)=>{let J=Y?Object.assign(Y,{async:!0}):{async:!0},G=Q._zod.run({value:$,issues:[]},J);if(G instanceof Promise)G=await G;if(G.issues.length){let H=new(W?.Err??X)(G.issues.map((B)=>o0(B,J,u0())));throw S4(H,W?.callee),H}return G.value},T9=_9(RX),x9=(X)=>(Q,$,Y)=>{let W=Y?{...Y,async:!1}:{async:!1},J=Q._zod.run({value:$,issues:[]},W);if(J instanceof Promise)throw new x1;return J.issues.length?{success:!1,error:new(X??C4)(J.issues.map((G)=>o0(G,W,u0())))}:{success:!0,data:J.value}},$6=x9(RX),y9=(X)=>async(Q,$,Y)=>{let W=Y?Object.assign(Y,{async:!0}):{async:!0},J=Q._zod.run({value:$,issues:[]},W);if(J instanceof Promise)J=await J;return J.issues.length?{success:!1,error:new X(J.issues.map((G)=>o0(G,W,u0())))}:{success:!0,data:J.value}},Y6=y9(RX);var IW=/^[cC][^\s-]{8,}$/,EW=/^[0-9a-z]+$/,bW=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,PW=/^[0-9a-vA-V]{20}$/,SW=/^[A-Za-z0-9]{27}$/,ZW=/^[a-zA-Z0-9_-]{21}$/,CW=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var kW=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,g9=(X)=>{if(!X)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${X}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var vW=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;function _W(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var TW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xW=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,yW=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,gW=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,hW=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,h9=/^[A-Za-z0-9_-]*$/,fW=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/;var uW=/^\+(?:[0-9]){6,14}[0-9]$/,lW="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",mW=new RegExp(`^${lW}$`);function cW(X){return typeof X.precision==="number"?X.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":X.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${X.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function pW(X){return new RegExp(`^${cW(X)}$`)}function dW(X){let Q=cW({precision:X.precision}),$=["Z"];if(X.local)$.push("");if(X.offset)$.push("([+-]\\d{2}:\\d{2})");let Y=`${Q}(?:${$.join("|")})`;return new RegExp(`^${lW}T(?:${Y})$`)}var iW=(X)=>{let Q=X?`[\\s\\S]{${X?.minimum??0},${X?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${Q}$`)};var nW=/^\d+$/,rW=/^-?\d+(?:\.\d+)?/i,oW=/true|false/i,tW=/null/i;var aW=/^[^A-Z]*$/,sW=/^[^a-z]*$/;var A0=O("$ZodCheck",(X,Q)=>{var $;X._zod??(X._zod={}),X._zod.def=Q,($=X._zod).onattach??($.onattach=[])}),eW={number:"number",bigint:"bigint",object:"date"},f9=O("$ZodCheckLessThan",(X,Q)=>{A0.init(X,Q);let $=eW[typeof Q.value];X._zod.onattach.push((Y)=>{let W=Y._zod.bag,J=(Q.inclusive?W.maximum:W.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(Q.value<J)if(Q.inclusive)W.maximum=Q.value;else W.exclusiveMaximum=Q.value}),X._zod.check=(Y)=>{if(Q.inclusive?Y.value<=Q.value:Y.value<Q.value)return;Y.issues.push({origin:$,code:"too_big",maximum:Q.value,input:Y.value,inclusive:Q.inclusive,inst:X,continue:!Q.abort})}}),u9=O("$ZodCheckGreaterThan",(X,Q)=>{A0.init(X,Q);let $=eW[typeof Q.value];X._zod.onattach.push((Y)=>{let W=Y._zod.bag,J=(Q.inclusive?W.minimum:W.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(Q.value>J)if(Q.inclusive)W.minimum=Q.value;else W.exclusiveMinimum=Q.value}),X._zod.check=(Y)=>{if(Q.inclusive?Y.value>=Q.value:Y.value>Q.value)return;Y.issues.push({origin:$,code:"too_small",minimum:Q.value,input:Y.value,inclusive:Q.inclusive,inst:X,continue:!Q.abort})}}),XJ=O("$ZodCheckMultipleOf",(X,Q)=>{A0.init(X,Q),X._zod.onattach.push(($)=>{var Y;(Y=$._zod.bag).multipleOf??(Y.multipleOf=Q.value)}),X._zod.check=($)=>{if(typeof $.value!==typeof Q.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof $.value==="bigint"?$.value%Q.value===BigInt(0):j9($.value,Q.value)===0)return;$.issues.push({origin:typeof $.value,code:"not_multiple_of",divisor:Q.value,input:$.value,inst:X,continue:!Q.abort})}}),QJ=O("$ZodCheckNumberFormat",(X,Q)=>{A0.init(X,Q),Q.format=Q.format||"float64";let $=Q.format?.includes("int"),Y=$?"int":"number",[W,J]=P9[Q.format];X._zod.onattach.push((G)=>{let H=G._zod.bag;if(H.format=Q.format,H.minimum=W,H.maximum=J,$)H.pattern=nW}),X._zod.check=(G)=>{let H=G.value;if($){if(!Number.isInteger(H)){G.issues.push({expected:Y,format:Q.format,code:"invalid_type",input:H,inst:X});return}if(!Number.isSafeInteger(H)){if(H>0)G.issues.push({input:H,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:X,origin:Y,continue:!Q.abort});else G.issues.push({input:H,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:X,origin:Y,continue:!Q.abort});return}}if(H<W)G.issues.push({origin:"number",input:H,code:"too_small",minimum:W,inclusive:!0,inst:X,continue:!Q.abort});if(H>J)G.issues.push({origin:"number",input:H,code:"too_big",maximum:J,inst:X})}});var $J=O("$ZodCheckMaxLength",(X,Q)=>{A0.init(X,Q),X._zod.when=($)=>{let Y=$.value;return!AX(Y)&&Y.length!==void 0},X._zod.onattach.push(($)=>{let Y=$._zod.bag.maximum??Number.POSITIVE_INFINITY;if(Q.maximum<Y)$._zod.bag.maximum=Q.maximum}),X._zod.check=($)=>{let Y=$.value;if(Y.length<=Q.maximum)return;let J=jX(Y);$.issues.push({origin:J,code:"too_big",maximum:Q.maximum,inclusive:!0,input:Y,inst:X,continue:!Q.abort})}}),YJ=O("$ZodCheckMinLength",(X,Q)=>{A0.init(X,Q),X._zod.when=($)=>{let Y=$.value;return!AX(Y)&&Y.length!==void 0},X._zod.onattach.push(($)=>{let Y=$._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(Q.minimum>Y)$._zod.bag.minimum=Q.minimum}),X._zod.check=($)=>{let Y=$.value;if(Y.length>=Q.minimum)return;let J=jX(Y);$.issues.push({origin:J,code:"too_small",minimum:Q.minimum,inclusive:!0,input:Y,inst:X,continue:!Q.abort})}}),WJ=O("$ZodCheckLengthEquals",(X,Q)=>{A0.init(X,Q),X._zod.when=($)=>{let Y=$.value;return!AX(Y)&&Y.length!==void 0},X._zod.onattach.push(($)=>{let Y=$._zod.bag;Y.minimum=Q.length,Y.maximum=Q.length,Y.length=Q.length}),X._zod.check=($)=>{let Y=$.value,W=Y.length;if(W===Q.length)return;let J=jX(Y),G=W>Q.length;$.issues.push({origin:J,...G?{code:"too_big",maximum:Q.length}:{code:"too_small",minimum:Q.length},inclusive:!0,exact:!0,input:$.value,inst:X,continue:!Q.abort})}}),IX=O("$ZodCheckStringFormat",(X,Q)=>{var $,Y;if(A0.init(X,Q),X._zod.onattach.push((W)=>{let J=W._zod.bag;if(J.format=Q.format,Q.pattern)J.patterns??(J.patterns=new Set),J.patterns.add(Q.pattern)}),Q.pattern)($=X._zod).check??($.check=(W)=>{if(Q.pattern.lastIndex=0,Q.pattern.test(W.value))return;W.issues.push({origin:"string",code:"invalid_format",format:Q.format,input:W.value,...Q.pattern?{pattern:Q.pattern.toString()}:{},inst:X,continue:!Q.abort})});else(Y=X._zod).check??(Y.check=()=>{})}),JJ=O("$ZodCheckRegex",(X,Q)=>{IX.init(X,Q),X._zod.check=($)=>{if(Q.pattern.lastIndex=0,Q.pattern.test($.value))return;$.issues.push({origin:"string",code:"invalid_format",format:"regex",input:$.value,pattern:Q.pattern.toString(),inst:X,continue:!Q.abort})}}),GJ=O("$ZodCheckLowerCase",(X,Q)=>{Q.pattern??(Q.pattern=aW),IX.init(X,Q)}),HJ=O("$ZodCheckUpperCase",(X,Q)=>{Q.pattern??(Q.pattern=sW),IX.init(X,Q)}),BJ=O("$ZodCheckIncludes",(X,Q)=>{A0.init(X,Q);let $=y1(Q.includes),Y=new RegExp(typeof Q.position==="number"?`^.{${Q.position}}${$}`:$);Q.pattern=Y,X._zod.onattach.push((W)=>{let J=W._zod.bag;J.patterns??(J.patterns=new Set),J.patterns.add(Y)}),X._zod.check=(W)=>{if(W.value.includes(Q.includes,Q.position))return;W.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:Q.includes,input:W.value,inst:X,continue:!Q.abort})}}),zJ=O("$ZodCheckStartsWith",(X,Q)=>{A0.init(X,Q);let $=new RegExp(`^${y1(Q.prefix)}.*`);Q.pattern??(Q.pattern=$),X._zod.onattach.push((Y)=>{let W=Y._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add($)}),X._zod.check=(Y)=>{if(Y.value.startsWith(Q.prefix))return;Y.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:Q.prefix,input:Y.value,inst:X,continue:!Q.abort})}}),KJ=O("$ZodCheckEndsWith",(X,Q)=>{A0.init(X,Q);let $=new RegExp(`.*${y1(Q.suffix)}$`);Q.pattern??(Q.pattern=$),X._zod.onattach.push((Y)=>{let W=Y._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add($)}),X._zod.check=(Y)=>{if(Y.value.endsWith(Q.suffix))return;Y.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:Q.suffix,input:Y.value,inst:X,continue:!Q.abort})}});var UJ=O("$ZodCheckOverwrite",(X,Q)=>{A0.init(X,Q),X._zod.check=($)=>{$.value=Q.tx($.value)}});class l9{constructor(X=[]){if(this.content=[],this.indent=0,this)this.args=X}indented(X){this.indent+=1,X(this),this.indent-=1}write(X){if(typeof X==="function"){X(this,{execution:"sync"}),X(this,{execution:"async"});return}let $=X.split(`
`).filter((J)=>J),Y=Math.min(...$.map((J)=>J.length-J.trimStart().length)),W=$.map((J)=>J.slice(Y)).map((J)=>" ".repeat(this.indent*2)+J);for(let J of W)this.content.push(J)}compile(){let X=Function,Q=this?.args,Y=[...(this?.content??[""]).map((W)=>`  ${W}`)];return new X(...Q,Y.join(`
`))}}var LJ={major:4,minor:0,patch:0};var X0=O("$ZodType",(X,Q)=>{var $;X??(X={}),X._zod.def=Q,X._zod.bag=X._zod.bag||{},X._zod.version=LJ;let Y=[...X._zod.def.checks??[]];if(X._zod.traits.has("$ZodCheck"))Y.unshift(X);for(let W of Y)for(let J of W._zod.onattach)J(X);if(Y.length===0)($=X._zod).deferred??($.deferred=[]),X._zod.deferred?.push(()=>{X._zod.run=X._zod.parse});else{let W=(J,G,H)=>{let B=Q6(J),z;for(let K of G){if(K._zod.when){if(!K._zod.when(J))continue}else if(B)continue;let V=J.issues.length,L=K._zod.check(J);if(L instanceof Promise&&H?.async===!1)throw new x1;if(z||L instanceof Promise)z=(z??Promise.resolve()).then(async()=>{if(await L,J.issues.length===V)return;if(!B)B=Q6(J,V)});else{if(J.issues.length===V)continue;if(!B)B=Q6(J,V)}}if(z)return z.then(()=>{return J});return J};X._zod.run=(J,G)=>{let H=X._zod.parse(J,G);if(H instanceof Promise){if(G.async===!1)throw new x1;return H.then((B)=>W(B,Y,G))}return W(H,Y,G)}}X["~standard"]={validate:(W)=>{try{let J=$6(X,W);return J.success?{value:J.data}:{issues:J.error?.issues}}catch(J){return Y6(X,W).then((G)=>G.success?{value:G.data}:{issues:G.error?.issues})}},vendor:"zod",version:1}}),EX=O("$ZodString",(X,Q)=>{X0.init(X,Q),X._zod.pattern=[...X?._zod.bag?.patterns??[]].pop()??iW(X._zod.bag),X._zod.parse=($,Y)=>{if(Q.coerce)try{$.value=String($.value)}catch(W){}if(typeof $.value==="string")return $;return $.issues.push({expected:"string",code:"invalid_type",input:$.value,inst:X}),$}}),W0=O("$ZodStringFormat",(X,Q)=>{IX.init(X,Q),EX.init(X,Q)}),c9=O("$ZodGUID",(X,Q)=>{Q.pattern??(Q.pattern=kW),W0.init(X,Q)}),p9=O("$ZodUUID",(X,Q)=>{if(Q.version){let Y={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[Q.version];if(Y===void 0)throw Error(`Invalid UUID version: "${Q.version}"`);Q.pattern??(Q.pattern=g9(Y))}else Q.pattern??(Q.pattern=g9());W0.init(X,Q)}),d9=O("$ZodEmail",(X,Q)=>{Q.pattern??(Q.pattern=vW),W0.init(X,Q)}),i9=O("$ZodURL",(X,Q)=>{W0.init(X,Q),X._zod.check=($)=>{try{let Y=$.value,W=new URL(Y),J=W.href;if(Q.hostname){if(Q.hostname.lastIndex=0,!Q.hostname.test(W.hostname))$.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:fW.source,input:$.value,inst:X,continue:!Q.abort})}if(Q.protocol){if(Q.protocol.lastIndex=0,!Q.protocol.test(W.protocol.endsWith(":")?W.protocol.slice(0,-1):W.protocol))$.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:Q.protocol.source,input:$.value,inst:X,continue:!Q.abort})}if(!Y.endsWith("/")&&J.endsWith("/"))$.value=J.slice(0,-1);else $.value=J;return}catch(Y){$.issues.push({code:"invalid_format",format:"url",input:$.value,inst:X,continue:!Q.abort})}}}),n9=O("$ZodEmoji",(X,Q)=>{Q.pattern??(Q.pattern=_W()),W0.init(X,Q)}),r9=O("$ZodNanoID",(X,Q)=>{Q.pattern??(Q.pattern=ZW),W0.init(X,Q)}),o9=O("$ZodCUID",(X,Q)=>{Q.pattern??(Q.pattern=IW),W0.init(X,Q)}),t9=O("$ZodCUID2",(X,Q)=>{Q.pattern??(Q.pattern=EW),W0.init(X,Q)}),a9=O("$ZodULID",(X,Q)=>{Q.pattern??(Q.pattern=bW),W0.init(X,Q)}),s9=O("$ZodXID",(X,Q)=>{Q.pattern??(Q.pattern=PW),W0.init(X,Q)}),e9=O("$ZodKSUID",(X,Q)=>{Q.pattern??(Q.pattern=SW),W0.init(X,Q)}),RJ=O("$ZodISODateTime",(X,Q)=>{Q.pattern??(Q.pattern=dW(Q)),W0.init(X,Q)}),IJ=O("$ZodISODate",(X,Q)=>{Q.pattern??(Q.pattern=mW),W0.init(X,Q)}),EJ=O("$ZodISOTime",(X,Q)=>{Q.pattern??(Q.pattern=pW(Q)),W0.init(X,Q)}),bJ=O("$ZodISODuration",(X,Q)=>{Q.pattern??(Q.pattern=CW),W0.init(X,Q)}),XQ=O("$ZodIPv4",(X,Q)=>{Q.pattern??(Q.pattern=TW),W0.init(X,Q),X._zod.onattach.push(($)=>{let Y=$._zod.bag;Y.format="ipv4"})}),QQ=O("$ZodIPv6",(X,Q)=>{Q.pattern??(Q.pattern=xW),W0.init(X,Q),X._zod.onattach.push(($)=>{let Y=$._zod.bag;Y.format="ipv6"}),X._zod.check=($)=>{try{new URL(`http://[${$.value}]`)}catch{$.issues.push({code:"invalid_format",format:"ipv6",input:$.value,inst:X,continue:!Q.abort})}}}),$Q=O("$ZodCIDRv4",(X,Q)=>{Q.pattern??(Q.pattern=yW),W0.init(X,Q)}),YQ=O("$ZodCIDRv6",(X,Q)=>{Q.pattern??(Q.pattern=gW),W0.init(X,Q),X._zod.check=($)=>{let[Y,W]=$.value.split("/");try{if(!W)throw Error();let J=Number(W);if(`${J}`!==W)throw Error();if(J<0||J>128)throw Error();new URL(`http://[${Y}]`)}catch{$.issues.push({code:"invalid_format",format:"cidrv6",input:$.value,inst:X,continue:!Q.abort})}}});function PJ(X){if(X==="")return!0;if(X.length%4!==0)return!1;try{return atob(X),!0}catch{return!1}}var WQ=O("$ZodBase64",(X,Q)=>{Q.pattern??(Q.pattern=hW),W0.init(X,Q),X._zod.onattach.push(($)=>{$._zod.bag.contentEncoding="base64"}),X._zod.check=($)=>{if(PJ($.value))return;$.issues.push({code:"invalid_format",format:"base64",input:$.value,inst:X,continue:!Q.abort})}});function QL(X){if(!h9.test(X))return!1;let Q=X.replace(/[-_]/g,(Y)=>Y==="-"?"+":"/"),$=Q.padEnd(Math.ceil(Q.length/4)*4,"=");return PJ($)}var JQ=O("$ZodBase64URL",(X,Q)=>{Q.pattern??(Q.pattern=h9),W0.init(X,Q),X._zod.onattach.push(($)=>{$._zod.bag.contentEncoding="base64url"}),X._zod.check=($)=>{if(QL($.value))return;$.issues.push({code:"invalid_format",format:"base64url",input:$.value,inst:X,continue:!Q.abort})}}),GQ=O("$ZodE164",(X,Q)=>{Q.pattern??(Q.pattern=uW),W0.init(X,Q)});function $L(X,Q=null){try{let $=X.split(".");if($.length!==3)return!1;let[Y]=$;if(!Y)return!1;let W=JSON.parse(atob(Y));if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(Q&&(!("alg"in W)||W.alg!==Q))return!1;return!0}catch{return!1}}var HQ=O("$ZodJWT",(X,Q)=>{W0.init(X,Q),X._zod.check=($)=>{if($L($.value,Q.alg))return;$.issues.push({code:"invalid_format",format:"jwt",input:$.value,inst:X,continue:!Q.abort})}});var _4=O("$ZodNumber",(X,Q)=>{X0.init(X,Q),X._zod.pattern=X._zod.bag.pattern??rW,X._zod.parse=($,Y)=>{if(Q.coerce)try{$.value=Number($.value)}catch(G){}let W=$.value;if(typeof W==="number"&&!Number.isNaN(W)&&Number.isFinite(W))return $;let J=typeof W==="number"?Number.isNaN(W)?"NaN":!Number.isFinite(W)?"Infinity":void 0:void 0;return $.issues.push({expected:"number",code:"invalid_type",input:W,inst:X,...J?{received:J}:{}}),$}}),BQ=O("$ZodNumber",(X,Q)=>{QJ.init(X,Q),_4.init(X,Q)}),zQ=O("$ZodBoolean",(X,Q)=>{X0.init(X,Q),X._zod.pattern=oW,X._zod.parse=($,Y)=>{if(Q.coerce)try{$.value=Boolean($.value)}catch(J){}let W=$.value;if(typeof W==="boolean")return $;return $.issues.push({expected:"boolean",code:"invalid_type",input:W,inst:X}),$}});var KQ=O("$ZodNull",(X,Q)=>{X0.init(X,Q),X._zod.pattern=tW,X._zod.values=new Set([null]),X._zod.parse=($,Y)=>{let W=$.value;if(W===null)return $;return $.issues.push({expected:"null",code:"invalid_type",input:W,inst:X}),$}});var UQ=O("$ZodUnknown",(X,Q)=>{X0.init(X,Q),X._zod.parse=($)=>$}),VQ=O("$ZodNever",(X,Q)=>{X0.init(X,Q),X._zod.parse=($,Y)=>{return $.issues.push({expected:"never",code:"invalid_type",input:$.value,inst:X}),$}});function qJ(X,Q,$){if(X.issues.length)Q.issues.push(...H1($,X.issues));Q.value[$]=X.value}var LQ=O("$ZodArray",(X,Q)=>{X0.init(X,Q),X._zod.parse=($,Y)=>{let W=$.value;if(!Array.isArray(W))return $.issues.push({expected:"array",code:"invalid_type",input:W,inst:X}),$;$.value=Array(W.length);let J=[];for(let G=0;G<W.length;G++){let H=W[G],B=Q.element._zod.run({value:H,issues:[]},Y);if(B instanceof Promise)J.push(B.then((z)=>qJ(z,$,G)));else qJ(B,$,G)}if(J.length)return Promise.all(J).then(()=>$);return $}});function v4(X,Q,$){if(X.issues.length)Q.issues.push(...H1($,X.issues));Q.value[$]=X.value}function FJ(X,Q,$,Y){if(X.issues.length)if(Y[$]===void 0)if($ in Y)Q.value[$]=void 0;else Q.value[$]=X.value;else Q.issues.push(...H1($,X.issues));else if(X.value===void 0){if($ in Y)Q.value[$]=void 0}else Q.value[$]=X.value}var T4=O("$ZodObject",(X,Q)=>{X0.init(X,Q);let $=wX(()=>{let V=Object.keys(Q.shape);for(let U of V)if(!(Q.shape[U]instanceof X0))throw Error(`Invalid element at key "${U}": expected a Zod schema`);let L=b9(Q.shape);return{shape:Q.shape,keys:V,keySet:new Set(V),numKeys:V.length,optionalKeys:new Set(L)}});Y0(X._zod,"propValues",()=>{let V=Q.shape,L={};for(let U in V){let F=V[U]._zod;if(F.values){L[U]??(L[U]=new Set);for(let q of F.values)L[U].add(q)}}return L});let Y=(V)=>{let L=new l9(["shape","payload","ctx"]),U=$.value,F=(M)=>{let R=X6(M);return`shape[${R}]._zod.run({ value: input[${R}], issues: [] }, ctx)`};L.write("const input = payload.value;");let q=Object.create(null),N=0;for(let M of U.keys)q[M]=`key_${N++}`;L.write("const newResult = {}");for(let M of U.keys)if(U.optionalKeys.has(M)){let R=q[M];L.write(`const ${R} = ${F(M)};`);let S=X6(M);L.write(`
        if (${R}.issues.length) {
          if (input[${S}] === undefined) {
            if (${S} in input) {
              newResult[${S}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${R}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${S}, ...iss.path] : [${S}],
              }))
            );
          }
        } else if (${R}.value === undefined) {
          if (${S} in input) newResult[${S}] = undefined;
        } else {
          newResult[${S}] = ${R}.value;
        }
        `)}else{let R=q[M];L.write(`const ${R} = ${F(M)};`),L.write(`
          if (${R}.issues.length) payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${X6(M)}, ...iss.path] : [${X6(M)}]
          })));`),L.write(`newResult[${X6(M)}] = ${R}.value`)}L.write("payload.value = newResult;"),L.write("return payload;");let w=L.compile();return(M,R)=>w(V,M,R)},W,J=C6,G=!b4.jitless,B=G&&I9.value,z=Q.catchall,K;X._zod.parse=(V,L)=>{K??(K=$.value);let U=V.value;if(!J(U))return V.issues.push({expected:"object",code:"invalid_type",input:U,inst:X}),V;let F=[];if(G&&B&&L?.async===!1&&L.jitless!==!0){if(!W)W=Y(Q.shape);V=W(V,L)}else{V.value={};let R=K.shape;for(let S of K.keys){let C=R[S],K0=C._zod.run({value:U[S],issues:[]},L),U0=C._zod.optin==="optional"&&C._zod.optout==="optional";if(K0 instanceof Promise)F.push(K0.then((s)=>U0?FJ(s,V,S,U):v4(s,V,S)));else if(U0)FJ(K0,V,S,U);else v4(K0,V,S)}}if(!z)return F.length?Promise.all(F).then(()=>V):V;let q=[],N=K.keySet,w=z._zod,M=w.def.type;for(let R of Object.keys(U)){if(N.has(R))continue;if(M==="never"){q.push(R);continue}let S=w.run({value:U[R],issues:[]},L);if(S instanceof Promise)F.push(S.then((C)=>v4(C,V,R)));else v4(S,V,R)}if(q.length)V.issues.push({code:"unrecognized_keys",keys:q,input:U,inst:X});if(!F.length)return V;return Promise.all(F).then(()=>{return V})}});function NJ(X,Q,$,Y){for(let W of X)if(W.issues.length===0)return Q.value=W.value,Q;return Q.issues.push({code:"invalid_union",input:Q.value,inst:$,errors:X.map((W)=>W.issues.map((J)=>o0(J,Y,u0())))}),Q}var x4=O("$ZodUnion",(X,Q)=>{X0.init(X,Q),Y0(X._zod,"optin",()=>Q.options.some(($)=>$._zod.optin==="optional")?"optional":void 0),Y0(X._zod,"optout",()=>Q.options.some(($)=>$._zod.optout==="optional")?"optional":void 0),Y0(X._zod,"values",()=>{if(Q.options.every(($)=>$._zod.values))return new Set(Q.options.flatMap(($)=>Array.from($._zod.values)));return}),Y0(X._zod,"pattern",()=>{if(Q.options.every(($)=>$._zod.pattern)){let $=Q.options.map((Y)=>Y._zod.pattern);return new RegExp(`^(${$.map((Y)=>MX(Y.source)).join("|")})$`)}return}),X._zod.parse=($,Y)=>{let W=!1,J=[];for(let G of Q.options){let H=G._zod.run({value:$.value,issues:[]},Y);if(H instanceof Promise)J.push(H),W=!0;else{if(H.issues.length===0)return H;J.push(H)}}if(!W)return NJ(J,$,X,Y);return Promise.all(J).then((G)=>{return NJ(G,$,X,Y)})}}),qQ=O("$ZodDiscriminatedUnion",(X,Q)=>{x4.init(X,Q);let $=X._zod.parse;Y0(X._zod,"propValues",()=>{let W={};for(let J of Q.options){let G=J._zod.propValues;if(!G||Object.keys(G).length===0)throw Error(`Invalid discriminated union option at index "${Q.options.indexOf(J)}"`);for(let[H,B]of Object.entries(G)){if(!W[H])W[H]=new Set;for(let z of B)W[H].add(z)}}return W});let Y=wX(()=>{let W=Q.options,J=new Map;for(let G of W){let H=G._zod.propValues[Q.discriminator];if(!H||H.size===0)throw Error(`Invalid discriminated union option at index "${Q.options.indexOf(G)}"`);for(let B of H){if(J.has(B))throw Error(`Duplicate discriminator value "${String(B)}"`);J.set(B,G)}}return J});X._zod.parse=(W,J)=>{let G=W.value;if(!C6(G))return W.issues.push({code:"invalid_type",expected:"object",input:G,inst:X}),W;let H=Y.value.get(G?.[Q.discriminator]);if(H)return H._zod.run(W,J);if(Q.unionFallback)return $(W,J);return W.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:G,path:[Q.discriminator],inst:X}),W}}),FQ=O("$ZodIntersection",(X,Q)=>{X0.init(X,Q),X._zod.parse=($,Y)=>{let W=$.value,J=Q.left._zod.run({value:W,issues:[]},Y),G=Q.right._zod.run({value:W,issues:[]},Y);if(J instanceof Promise||G instanceof Promise)return Promise.all([J,G]).then(([B,z])=>{return OJ($,B,z)});return OJ($,J,G)}});function m9(X,Q){if(X===Q)return{valid:!0,data:X};if(X instanceof Date&&Q instanceof Date&&+X===+Q)return{valid:!0,data:X};if(k6(X)&&k6(Q)){let $=Object.keys(Q),Y=Object.keys(X).filter((J)=>$.indexOf(J)!==-1),W={...X,...Q};for(let J of Y){let G=m9(X[J],Q[J]);if(!G.valid)return{valid:!1,mergeErrorPath:[J,...G.mergeErrorPath]};W[J]=G.data}return{valid:!0,data:W}}if(Array.isArray(X)&&Array.isArray(Q)){if(X.length!==Q.length)return{valid:!1,mergeErrorPath:[]};let $=[];for(let Y=0;Y<X.length;Y++){let W=X[Y],J=Q[Y],G=m9(W,J);if(!G.valid)return{valid:!1,mergeErrorPath:[Y,...G.mergeErrorPath]};$.push(G.data)}return{valid:!0,data:$}}return{valid:!1,mergeErrorPath:[]}}function OJ(X,Q,$){if(Q.issues.length)X.issues.push(...Q.issues);if($.issues.length)X.issues.push(...$.issues);if(Q6(X))return X;let Y=m9(Q.value,$.value);if(!Y.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(Y.mergeErrorPath)}`);return X.value=Y.data,X}var NQ=O("$ZodRecord",(X,Q)=>{X0.init(X,Q),X._zod.parse=($,Y)=>{let W=$.value;if(!k6(W))return $.issues.push({expected:"record",code:"invalid_type",input:W,inst:X}),$;let J=[];if(Q.keyType._zod.values){let G=Q.keyType._zod.values;$.value={};for(let B of G)if(typeof B==="string"||typeof B==="number"||typeof B==="symbol"){let z=Q.valueType._zod.run({value:W[B],issues:[]},Y);if(z instanceof Promise)J.push(z.then((K)=>{if(K.issues.length)$.issues.push(...H1(B,K.issues));$.value[B]=K.value}));else{if(z.issues.length)$.issues.push(...H1(B,z.issues));$.value[B]=z.value}}let H;for(let B in W)if(!G.has(B))H=H??[],H.push(B);if(H&&H.length>0)$.issues.push({code:"unrecognized_keys",input:W,inst:X,keys:H})}else{$.value={};for(let G of Reflect.ownKeys(W)){if(G==="__proto__")continue;let H=Q.keyType._zod.run({value:G,issues:[]},Y);if(H instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(H.issues.length){$.issues.push({origin:"record",code:"invalid_key",issues:H.issues.map((z)=>o0(z,Y,u0())),input:G,path:[G],inst:X}),$.value[H.value]=H.value;continue}let B=Q.valueType._zod.run({value:W[G],issues:[]},Y);if(B instanceof Promise)J.push(B.then((z)=>{if(z.issues.length)$.issues.push(...H1(G,z.issues));$.value[H.value]=z.value}));else{if(B.issues.length)$.issues.push(...H1(G,B.issues));$.value[H.value]=B.value}}}if(J.length)return Promise.all(J).then(()=>$);return $}});var OQ=O("$ZodEnum",(X,Q)=>{X0.init(X,Q);let $=DX(Q.entries);X._zod.values=new Set($),X._zod.pattern=new RegExp(`^(${$.filter((Y)=>E9.has(typeof Y)).map((Y)=>typeof Y==="string"?y1(Y):Y.toString()).join("|")})$`),X._zod.parse=(Y,W)=>{let J=Y.value;if(X._zod.values.has(J))return Y;return Y.issues.push({code:"invalid_value",values:$,input:J,inst:X}),Y}}),DQ=O("$ZodLiteral",(X,Q)=>{X0.init(X,Q),X._zod.values=new Set(Q.values),X._zod.pattern=new RegExp(`^(${Q.values.map(($)=>typeof $==="string"?y1($):$?$.toString():String($)).join("|")})$`),X._zod.parse=($,Y)=>{let W=$.value;if(X._zod.values.has(W))return $;return $.issues.push({code:"invalid_value",values:Q.values,input:W,inst:X}),$}});var wQ=O("$ZodTransform",(X,Q)=>{X0.init(X,Q),X._zod.parse=($,Y)=>{let W=Q.transform($.value,$);if(Y.async)return(W instanceof Promise?W:Promise.resolve(W)).then((G)=>{return $.value=G,$});if(W instanceof Promise)throw new x1;return $.value=W,$}}),AQ=O("$ZodOptional",(X,Q)=>{X0.init(X,Q),X._zod.optin="optional",X._zod.optout="optional",Y0(X._zod,"values",()=>{return Q.innerType._zod.values?new Set([...Q.innerType._zod.values,void 0]):void 0}),Y0(X._zod,"pattern",()=>{let $=Q.innerType._zod.pattern;return $?new RegExp(`^(${MX($.source)})?$`):void 0}),X._zod.parse=($,Y)=>{if(Q.innerType._zod.optin==="optional")return Q.innerType._zod.run($,Y);if($.value===void 0)return $;return Q.innerType._zod.run($,Y)}}),MQ=O("$ZodNullable",(X,Q)=>{X0.init(X,Q),Y0(X._zod,"optin",()=>Q.innerType._zod.optin),Y0(X._zod,"optout",()=>Q.innerType._zod.optout),Y0(X._zod,"pattern",()=>{let $=Q.innerType._zod.pattern;return $?new RegExp(`^(${MX($.source)}|null)$`):void 0}),Y0(X._zod,"values",()=>{return Q.innerType._zod.values?new Set([...Q.innerType._zod.values,null]):void 0}),X._zod.parse=($,Y)=>{if($.value===null)return $;return Q.innerType._zod.run($,Y)}}),jQ=O("$ZodDefault",(X,Q)=>{X0.init(X,Q),X._zod.optin="optional",Y0(X._zod,"values",()=>Q.innerType._zod.values),X._zod.parse=($,Y)=>{if($.value===void 0)return $.value=Q.defaultValue,$;let W=Q.innerType._zod.run($,Y);if(W instanceof Promise)return W.then((J)=>DJ(J,Q));return DJ(W,Q)}});function DJ(X,Q){if(X.value===void 0)X.value=Q.defaultValue;return X}var RQ=O("$ZodPrefault",(X,Q)=>{X0.init(X,Q),X._zod.optin="optional",Y0(X._zod,"values",()=>Q.innerType._zod.values),X._zod.parse=($,Y)=>{if($.value===void 0)$.value=Q.defaultValue;return Q.innerType._zod.run($,Y)}}),IQ=O("$ZodNonOptional",(X,Q)=>{X0.init(X,Q),Y0(X._zod,"values",()=>{let $=Q.innerType._zod.values;return $?new Set([...$].filter((Y)=>Y!==void 0)):void 0}),X._zod.parse=($,Y)=>{let W=Q.innerType._zod.run($,Y);if(W instanceof Promise)return W.then((J)=>wJ(J,X));return wJ(W,X)}});function wJ(X,Q){if(!X.issues.length&&X.value===void 0)X.issues.push({code:"invalid_type",expected:"nonoptional",input:X.value,inst:Q});return X}var EQ=O("$ZodCatch",(X,Q)=>{X0.init(X,Q),X._zod.optin="optional",Y0(X._zod,"optout",()=>Q.innerType._zod.optout),Y0(X._zod,"values",()=>Q.innerType._zod.values),X._zod.parse=($,Y)=>{let W=Q.innerType._zod.run($,Y);if(W instanceof Promise)return W.then((J)=>{if($.value=J.value,J.issues.length)$.value=Q.catchValue({...$,error:{issues:J.issues.map((G)=>o0(G,Y,u0()))},input:$.value}),$.issues=[];return $});if($.value=W.value,W.issues.length)$.value=Q.catchValue({...$,error:{issues:W.issues.map((J)=>o0(J,Y,u0()))},input:$.value}),$.issues=[];return $}});var bQ=O("$ZodPipe",(X,Q)=>{X0.init(X,Q),Y0(X._zod,"values",()=>Q.in._zod.values),Y0(X._zod,"optin",()=>Q.in._zod.optin),Y0(X._zod,"optout",()=>Q.out._zod.optout),X._zod.parse=($,Y)=>{let W=Q.in._zod.run($,Y);if(W instanceof Promise)return W.then((J)=>AJ(J,Q,Y));return AJ(W,Q,Y)}});function AJ(X,Q,$){if(Q6(X))return X;return Q.out._zod.run({value:X.value,issues:X.issues},$)}var PQ=O("$ZodReadonly",(X,Q)=>{X0.init(X,Q),Y0(X._zod,"propValues",()=>Q.innerType._zod.propValues),Y0(X._zod,"values",()=>Q.innerType._zod.values),Y0(X._zod,"optin",()=>Q.innerType._zod.optin),Y0(X._zod,"optout",()=>Q.innerType._zod.optout),X._zod.parse=($,Y)=>{let W=Q.innerType._zod.run($,Y);if(W instanceof Promise)return W.then(MJ);return MJ(W)}});function MJ(X){return X.value=Object.freeze(X.value),X}var SQ=O("$ZodCustom",(X,Q)=>{A0.init(X,Q),X0.init(X,Q),X._zod.parse=($,Y)=>{return $},X._zod.check=($)=>{let Y=$.value,W=Q.fn(Y);if(W instanceof Promise)return W.then((J)=>jJ(J,$,Y,X));jJ(W,$,Y,X);return}});function jJ(X,Q,$,Y){if(!X){let W={code:"custom",input:$,inst:Y,path:[...Y._zod.def.path??[]],continue:!Y._zod.def.abort};if(Y._zod.def.params)W.params=Y._zod.def.params;Q.issues.push(S9(W))}}var YL=(X)=>{let Q=typeof X;switch(Q){case"number":return Number.isNaN(X)?"NaN":"number";case"object":{if(Array.isArray(X))return"array";if(X===null)return"null";if(Object.getPrototypeOf(X)!==Object.prototype&&X.constructor)return X.constructor.name}}return Q},WL=()=>{let X={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function Q(Y){return X[Y]??null}let $={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Invalid input: expected ${Y.expected}, received ${YL(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Invalid input: expected ${Z4(Y.values[0])}`;return`Invalid option: expected one of ${P4(Y.values,"|")}`;case"too_big":{let W=Y.inclusive?"<=":"<",J=Q(Y.origin);if(J)return`Too big: expected ${Y.origin??"value"} to have ${W}${Y.maximum.toString()} ${J.unit??"elements"}`;return`Too big: expected ${Y.origin??"value"} to be ${W}${Y.maximum.toString()}`}case"too_small":{let W=Y.inclusive?">=":">",J=Q(Y.origin);if(J)return`Too small: expected ${Y.origin} to have ${W}${Y.minimum.toString()} ${J.unit}`;return`Too small: expected ${Y.origin} to be ${W}${Y.minimum.toString()}`}case"invalid_format":{let W=Y;if(W.format==="starts_with")return`Invalid string: must start with "${W.prefix}"`;if(W.format==="ends_with")return`Invalid string: must end with "${W.suffix}"`;if(W.format==="includes")return`Invalid string: must include "${W.includes}"`;if(W.format==="regex")return`Invalid string: must match pattern ${W.pattern}`;return`Invalid ${$[W.format]??Y.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${Y.divisor}`;case"unrecognized_keys":return`Unrecognized key${Y.keys.length>1?"s":""}: ${P4(Y.keys,", ")}`;case"invalid_key":return`Invalid key in ${Y.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${Y.origin}`;default:return"Invalid input"}}};function ZQ(){return{localeError:WL()}}var JL=Symbol("ZodOutput"),GL=Symbol("ZodInput");class y4{constructor(){this._map=new WeakMap,this._idmap=new Map}add(X,...Q){let $=Q[0];if(this._map.set(X,$),$&&typeof $==="object"&&"id"in $){if(this._idmap.has($.id))throw Error(`ID ${$.id} already exists in the registry`);this._idmap.set($.id,X)}return this}remove(X){return this._map.delete(X),this}get(X){let Q=X._zod.parent;if(Q){let $={...this.get(Q)??{}};return delete $.id,{...$,...this._map.get(X)}}return this._map.get(X)}has(X){return this._map.has(X)}}function SJ(){return new y4}var g1=SJ();function CQ(X,Q){return new X({type:"string",...y(Q)})}function kQ(X,Q){return new X({type:"string",format:"email",check:"string_format",abort:!1,...y(Q)})}function g4(X,Q){return new X({type:"string",format:"guid",check:"string_format",abort:!1,...y(Q)})}function vQ(X,Q){return new X({type:"string",format:"uuid",check:"string_format",abort:!1,...y(Q)})}function _Q(X,Q){return new X({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...y(Q)})}function TQ(X,Q){return new X({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...y(Q)})}function xQ(X,Q){return new X({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...y(Q)})}function yQ(X,Q){return new X({type:"string",format:"url",check:"string_format",abort:!1,...y(Q)})}function gQ(X,Q){return new X({type:"string",format:"emoji",check:"string_format",abort:!1,...y(Q)})}function hQ(X,Q){return new X({type:"string",format:"nanoid",check:"string_format",abort:!1,...y(Q)})}function fQ(X,Q){return new X({type:"string",format:"cuid",check:"string_format",abort:!1,...y(Q)})}function uQ(X,Q){return new X({type:"string",format:"cuid2",check:"string_format",abort:!1,...y(Q)})}function lQ(X,Q){return new X({type:"string",format:"ulid",check:"string_format",abort:!1,...y(Q)})}function mQ(X,Q){return new X({type:"string",format:"xid",check:"string_format",abort:!1,...y(Q)})}function cQ(X,Q){return new X({type:"string",format:"ksuid",check:"string_format",abort:!1,...y(Q)})}function pQ(X,Q){return new X({type:"string",format:"ipv4",check:"string_format",abort:!1,...y(Q)})}function dQ(X,Q){return new X({type:"string",format:"ipv6",check:"string_format",abort:!1,...y(Q)})}function iQ(X,Q){return new X({type:"string",format:"cidrv4",check:"string_format",abort:!1,...y(Q)})}function nQ(X,Q){return new X({type:"string",format:"cidrv6",check:"string_format",abort:!1,...y(Q)})}function rQ(X,Q){return new X({type:"string",format:"base64",check:"string_format",abort:!1,...y(Q)})}function oQ(X,Q){return new X({type:"string",format:"base64url",check:"string_format",abort:!1,...y(Q)})}function tQ(X,Q){return new X({type:"string",format:"e164",check:"string_format",abort:!1,...y(Q)})}function aQ(X,Q){return new X({type:"string",format:"jwt",check:"string_format",abort:!1,...y(Q)})}function ZJ(X,Q){return new X({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...y(Q)})}function CJ(X,Q){return new X({type:"string",format:"date",check:"string_format",...y(Q)})}function kJ(X,Q){return new X({type:"string",format:"time",check:"string_format",precision:null,...y(Q)})}function vJ(X,Q){return new X({type:"string",format:"duration",check:"string_format",...y(Q)})}function sQ(X,Q){return new X({type:"number",checks:[],...y(Q)})}function eQ(X,Q){return new X({type:"number",check:"number_format",abort:!1,format:"safeint",...y(Q)})}function X$(X,Q){return new X({type:"boolean",...y(Q)})}function Q$(X,Q){return new X({type:"null",...y(Q)})}function $$(X){return new X({type:"unknown"})}function Y$(X,Q){return new X({type:"never",...y(Q)})}function h4(X,Q){return new f9({check:"less_than",...y(Q),value:X,inclusive:!1})}function bX(X,Q){return new f9({check:"less_than",...y(Q),value:X,inclusive:!0})}function f4(X,Q){return new u9({check:"greater_than",...y(Q),value:X,inclusive:!1})}function PX(X,Q){return new u9({check:"greater_than",...y(Q),value:X,inclusive:!0})}function u4(X,Q){return new XJ({check:"multiple_of",...y(Q),value:X})}function l4(X,Q){return new $J({check:"max_length",...y(Q),maximum:X})}function v6(X,Q){return new YJ({check:"min_length",...y(Q),minimum:X})}function m4(X,Q){return new WJ({check:"length_equals",...y(Q),length:X})}function W$(X,Q){return new JJ({check:"string_format",format:"regex",...y(Q),pattern:X})}function J$(X){return new GJ({check:"string_format",format:"lowercase",...y(X)})}function G$(X){return new HJ({check:"string_format",format:"uppercase",...y(X)})}function H$(X,Q){return new BJ({check:"string_format",format:"includes",...y(Q),includes:X})}function B$(X,Q){return new zJ({check:"string_format",format:"starts_with",...y(Q),prefix:X})}function z$(X,Q){return new KJ({check:"string_format",format:"ends_with",...y(Q),suffix:X})}function W6(X){return new UJ({check:"overwrite",tx:X})}function K$(X){return W6((Q)=>Q.normalize(X))}function U$(){return W6((X)=>X.trim())}function V$(){return W6((X)=>X.toLowerCase())}function L$(){return W6((X)=>X.toUpperCase())}function _J(X,Q,$){return new X({type:"array",element:Q,...y($)})}function q$(X,Q,$){let Y=y($);return Y.abort??(Y.abort=!0),new X({type:"custom",check:"custom",fn:Q,...Y})}function F$(X,Q,$){return new X({type:"custom",check:"custom",fn:Q,...y($)})}class N${constructor(X){this.counter=0,this.metadataRegistry=X?.metadata??g1,this.target=X?.target??"draft-2020-12",this.unrepresentable=X?.unrepresentable??"throw",this.override=X?.override??(()=>{}),this.io=X?.io??"output",this.seen=new Map}process(X,Q={path:[],schemaPath:[]}){var $;let Y=X._zod.def,W={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},J=this.seen.get(X);if(J){if(J.count++,Q.schemaPath.includes(X))J.cycle=Q.path;return J.schema}let G={schema:{},count:1,cycle:void 0,path:Q.path};this.seen.set(X,G);let H=X._zod.toJSONSchema?.();if(H)G.schema=H;else{let K={...Q,schemaPath:[...Q.schemaPath,X],path:Q.path},V=X._zod.parent;if(V)G.ref=V,this.process(V,K),this.seen.get(V).isParent=!0;else{let L=G.schema;switch(Y.type){case"string":{let U=L;U.type="string";let{minimum:F,maximum:q,format:N,patterns:w,contentEncoding:M}=X._zod.bag;if(typeof F==="number")U.minLength=F;if(typeof q==="number")U.maxLength=q;if(N){if(U.format=W[N]??N,U.format==="")delete U.format}if(M)U.contentEncoding=M;if(w&&w.size>0){let R=[...w];if(R.length===1)U.pattern=R[0].source;else if(R.length>1)G.schema.allOf=[...R.map((S)=>({...this.target==="draft-7"?{type:"string"}:{},pattern:S.source}))]}break}case"number":{let U=L,{minimum:F,maximum:q,format:N,multipleOf:w,exclusiveMaximum:M,exclusiveMinimum:R}=X._zod.bag;if(typeof N==="string"&&N.includes("int"))U.type="integer";else U.type="number";if(typeof R==="number")U.exclusiveMinimum=R;if(typeof F==="number"){if(U.minimum=F,typeof R==="number")if(R>=F)delete U.minimum;else delete U.exclusiveMinimum}if(typeof M==="number")U.exclusiveMaximum=M;if(typeof q==="number"){if(U.maximum=q,typeof M==="number")if(M<=q)delete U.maximum;else delete U.exclusiveMaximum}if(typeof w==="number")U.multipleOf=w;break}case"boolean":{let U=L;U.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema");break}case"null":{L.type="null";break}case"any":break;case"unknown":break;case"undefined":case"never":{L.not={};break}case"void":{if(this.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema");break}case"date":{if(this.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema");break}case"array":{let U=L,{minimum:F,maximum:q}=X._zod.bag;if(typeof F==="number")U.minItems=F;if(typeof q==="number")U.maxItems=q;U.type="array",U.items=this.process(Y.element,{...K,path:[...K.path,"items"]});break}case"object":{let U=L;U.type="object",U.properties={};let F=Y.shape;for(let w in F)U.properties[w]=this.process(F[w],{...K,path:[...K.path,"properties",w]});let q=new Set(Object.keys(F)),N=new Set([...q].filter((w)=>{let M=Y.shape[w]._zod;if(this.io==="input")return M.optin===void 0;else return M.optout===void 0}));if(N.size>0)U.required=Array.from(N);if(Y.catchall?._zod.def.type==="never")U.additionalProperties=!1;else if(!Y.catchall){if(this.io==="output")U.additionalProperties=!1}else if(Y.catchall)U.additionalProperties=this.process(Y.catchall,{...K,path:[...K.path,"additionalProperties"]});break}case"union":{let U=L;U.anyOf=Y.options.map((F,q)=>this.process(F,{...K,path:[...K.path,"anyOf",q]}));break}case"intersection":{let U=L,F=this.process(Y.left,{...K,path:[...K.path,"allOf",0]}),q=this.process(Y.right,{...K,path:[...K.path,"allOf",1]}),N=(M)=>("allOf"in M)&&Object.keys(M).length===1,w=[...N(F)?F.allOf:[F],...N(q)?q.allOf:[q]];U.allOf=w;break}case"tuple":{let U=L;U.type="array";let F=Y.items.map((w,M)=>this.process(w,{...K,path:[...K.path,"prefixItems",M]}));if(this.target==="draft-2020-12")U.prefixItems=F;else U.items=F;if(Y.rest){let w=this.process(Y.rest,{...K,path:[...K.path,"items"]});if(this.target==="draft-2020-12")U.items=w;else U.additionalItems=w}if(Y.rest)U.items=this.process(Y.rest,{...K,path:[...K.path,"items"]});let{minimum:q,maximum:N}=X._zod.bag;if(typeof q==="number")U.minItems=q;if(typeof N==="number")U.maxItems=N;break}case"record":{let U=L;U.type="object",U.propertyNames=this.process(Y.keyType,{...K,path:[...K.path,"propertyNames"]}),U.additionalProperties=this.process(Y.valueType,{...K,path:[...K.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema");break}case"enum":{let U=L,F=DX(Y.entries);if(F.every((q)=>typeof q==="number"))U.type="number";if(F.every((q)=>typeof q==="string"))U.type="string";U.enum=F;break}case"literal":{let U=L,F=[];for(let q of Y.values)if(q===void 0){if(this.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof q==="bigint")if(this.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else F.push(Number(q));else F.push(q);if(F.length===0);else if(F.length===1){let q=F[0];U.type=q===null?"null":typeof q,U.const=q}else{if(F.every((q)=>typeof q==="number"))U.type="number";if(F.every((q)=>typeof q==="string"))U.type="string";if(F.every((q)=>typeof q==="boolean"))U.type="string";if(F.every((q)=>q===null))U.type="null";U.enum=F}break}case"file":{let U=L,F={type:"string",format:"binary",contentEncoding:"binary"},{minimum:q,maximum:N,mime:w}=X._zod.bag;if(q!==void 0)F.minLength=q;if(N!==void 0)F.maxLength=N;if(w)if(w.length===1)F.contentMediaType=w[0],Object.assign(U,F);else U.anyOf=w.map((M)=>{return{...F,contentMediaType:M}});else Object.assign(U,F);break}case"transform":{if(this.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let U=this.process(Y.innerType,K);L.anyOf=[U,{type:"null"}];break}case"nonoptional":{this.process(Y.innerType,K),G.ref=Y.innerType;break}case"success":{let U=L;U.type="boolean";break}case"default":{this.process(Y.innerType,K),G.ref=Y.innerType,L.default=JSON.parse(JSON.stringify(Y.defaultValue));break}case"prefault":{if(this.process(Y.innerType,K),G.ref=Y.innerType,this.io==="input")L._prefault=JSON.parse(JSON.stringify(Y.defaultValue));break}case"catch":{this.process(Y.innerType,K),G.ref=Y.innerType;let U;try{U=Y.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}L.default=U;break}case"nan":{if(this.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let U=L,F=X._zod.pattern;if(!F)throw Error("Pattern not found in template literal");U.type="string",U.pattern=F.source;break}case"pipe":{let U=this.io==="input"?Y.in._zod.def.type==="transform"?Y.out:Y.in:Y.out;this.process(U,K),G.ref=U;break}case"readonly":{this.process(Y.innerType,K),G.ref=Y.innerType,L.readOnly=!0;break}case"promise":{this.process(Y.innerType,K),G.ref=Y.innerType;break}case"optional":{this.process(Y.innerType,K),G.ref=Y.innerType;break}case"lazy":{let U=X._zod.innerType;this.process(U,K),G.ref=U;break}case"custom":{if(this.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema");break}default:}}}let B=this.metadataRegistry.get(X);if(B)Object.assign(G.schema,B);if(this.io==="input"&&w0(X))delete G.schema.examples,delete G.schema.default;if(this.io==="input"&&G.schema._prefault)($=G.schema).default??($.default=G.schema._prefault);return delete G.schema._prefault,this.seen.get(X).schema}emit(X,Q){let $={cycles:Q?.cycles??"ref",reused:Q?.reused??"inline",external:Q?.external??void 0},Y=this.seen.get(X);if(!Y)throw Error("Unprocessed schema. This is a bug in Zod.");let W=(z)=>{let K=this.target==="draft-2020-12"?"$defs":"definitions";if($.external){let F=$.external.registry.get(z[0])?.id;if(F)return{ref:$.external.uri(F)};let q=z[1].defId??z[1].schema.id??`schema${this.counter++}`;return z[1].defId=q,{defId:q,ref:`${$.external.uri("__shared")}#/${K}/${q}`}}if(z[1]===Y)return{ref:"#"};let L=`${"#"}/${K}/`,U=z[1].schema.id??`__schema${this.counter++}`;return{defId:U,ref:L+U}},J=(z)=>{if(z[1].schema.$ref)return;let K=z[1],{ref:V,defId:L}=W(z);if(K.def={...K.schema},L)K.defId=L;let U=K.schema;for(let F in U)delete U[F];U.$ref=V};for(let z of this.seen.entries()){let K=z[1];if(X===z[0]){J(z);continue}if($.external){let L=$.external.registry.get(z[0])?.id;if(X!==z[0]&&L){J(z);continue}}if(this.metadataRegistry.get(z[0])?.id){J(z);continue}if(K.cycle){if($.cycles==="throw")throw Error(`Cycle detected: #/${K.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);else if($.cycles==="ref")J(z);continue}if(K.count>1){if($.reused==="ref"){J(z);continue}}}let G=(z,K)=>{let V=this.seen.get(z),L=V.def??V.schema,U={...L};if(V.ref===null)return;let F=V.ref;if(V.ref=null,F){G(F,K);let q=this.seen.get(F).schema;if(q.$ref&&K.target==="draft-7")L.allOf=L.allOf??[],L.allOf.push(q);else Object.assign(L,q),Object.assign(L,U)}if(!V.isParent)this.override({zodSchema:z,jsonSchema:L,path:V.path??[]})};for(let z of[...this.seen.entries()].reverse())G(z[0],{target:this.target});let H={};if(this.target==="draft-2020-12")H.$schema="https://json-schema.org/draft/2020-12/schema";else if(this.target==="draft-7")H.$schema="http://json-schema.org/draft-07/schema#";else console.warn(`Invalid target: ${this.target}`);Object.assign(H,Y.def);let B=$.external?.defs??{};for(let z of this.seen.entries()){let K=z[1];if(K.def&&K.defId)B[K.defId]=K.def}if(!$.external&&Object.keys(B).length>0)if(this.target==="draft-2020-12")H.$defs=B;else H.definitions=B;try{return JSON.parse(JSON.stringify(H))}catch(z){throw Error("Error converting schema to JSON.")}}}function O$(X,Q){if(X instanceof y4){let Y=new N$(Q),W={};for(let H of X._idmap.entries()){let[B,z]=H;Y.process(z)}let J={},G={registry:X,uri:Q?.uri||((H)=>H),defs:W};for(let H of X._idmap.entries()){let[B,z]=H;J[B]=Y.emit(z,{...Q,external:G})}if(Object.keys(W).length>0){let H=Y.target==="draft-2020-12"?"$defs":"definitions";J.__shared={[H]:W}}return{schemas:J}}let $=new N$(Q);return $.process(X),$.emit(X,Q)}function w0(X,Q){let $=Q??{seen:new Set};if($.seen.has(X))return!1;$.seen.add(X);let W=X._zod.def;switch(W.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return w0(W.element,$);case"object":{for(let J in W.shape)if(w0(W.shape[J],$))return!0;return!1}case"union":{for(let J of W.options)if(w0(J,$))return!0;return!1}case"intersection":return w0(W.left,$)||w0(W.right,$);case"tuple":{for(let J of W.items)if(w0(J,$))return!0;if(W.rest&&w0(W.rest,$))return!0;return!1}case"record":return w0(W.keyType,$)||w0(W.valueType,$);case"map":return w0(W.keyType,$)||w0(W.valueType,$);case"set":return w0(W.valueType,$);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return w0(W.innerType,$);case"lazy":return w0(W.getter(),$);case"default":return w0(W.innerType,$);case"prefault":return w0(W.innerType,$);case"custom":return!1;case"transform":return!0;case"pipe":return w0(W.in,$)||w0(W.out,$);case"success":return!1;case"catch":return!1;default:}throw Error(`Unknown schema type: ${W.type}`)}var lL=O("ZodMiniType",(X,Q)=>{if(!X._zod)throw Error("Uninitialized schema in ZodMiniType.");X0.init(X,Q),X.def=Q,X.parse=($,Y)=>v9(X,$,Y,{callee:X.parse}),X.safeParse=($,Y)=>$6(X,$,Y),X.parseAsync=async($,Y)=>T9(X,$,Y,{callee:X.parseAsync}),X.safeParseAsync=async($,Y)=>Y6(X,$,Y),X.check=(...$)=>{return X.clone({...Q,checks:[...Q.checks??[],...$.map((Y)=>typeof Y==="function"?{_zod:{check:Y,def:{check:"custom"},onattach:[]}}:Y)]})},X.clone=($,Y)=>l0(X,$,Y),X.brand=()=>X,X.register=($,Y)=>{return $.add(X,Y),X}});var mL=O("ZodMiniObject",(X,Q)=>{T4.init(X,Q),lL.init(X,Q),i.defineLazy(X,"shape",()=>Q.shape)});function D$(X,Q){let $={type:"object",get shape(){return i.assignProp(this,"shape",{...X}),this.shape},...i.normalizeParams(Q)};return new mL($)}function m0(X){return!!X._zod}function _6(X){let Q=Object.values(X);if(Q.length===0)return D$({});let $=Q.every(m0),Y=Q.every((W)=>!m0(W));if($)return D$(X);if(Y)return DW(X);throw Error("Mixed Zod versions detected in object shape.")}function h1(X,Q){if(m0(X))return $6(X,Q);return X.safeParse(Q)}async function c4(X,Q){if(m0(X))return await Y6(X,Q);return await X.safeParseAsync(Q)}function f1(X){var Q,$;if(!X)return;let Y;if(m0(X))Y=($=(Q=X._zod)===null||Q===void 0?void 0:Q.def)===null||$===void 0?void 0:$.shape;else Y=X.shape;if(!Y)return;if(typeof Y==="function")try{return Y()}catch(W){return}return Y}function T6(X){var Q;if(!X)return;if(typeof X==="object"){let $=X,Y=X;if(!$._def&&!Y._zod){let W=Object.values(X);if(W.length>0&&W.every((J)=>typeof J==="object"&&J!==null&&(J._def!==void 0||J._zod!==void 0||typeof J.parse==="function")))return _6(X)}}if(m0(X)){let Y=(Q=X._zod)===null||Q===void 0?void 0:Q.def;if(Y&&(Y.type==="object"||Y.shape!==void 0))return X}else if(X.shape!==void 0)return X;return}function p4(X){if(X&&typeof X==="object"){if("message"in X&&typeof X.message==="string")return X.message;if("issues"in X&&Array.isArray(X.issues)&&X.issues.length>0){let Q=X.issues[0];if(Q&&typeof Q==="object"&&"message"in Q)return String(Q.message)}try{return JSON.stringify(X)}catch(Q){return String(X)}}return String(X)}function xJ(X){var Q,$,Y,W;if(m0(X))return($=(Q=X._zod)===null||Q===void 0?void 0:Q.def)===null||$===void 0?void 0:$.description;let J=X;return(Y=X.description)!==null&&Y!==void 0?Y:(W=J._def)===null||W===void 0?void 0:W.description}function yJ(X){var Q,$,Y;if(m0(X))return(($=(Q=X._zod)===null||Q===void 0?void 0:Q.def)===null||$===void 0?void 0:$.type)==="optional";let W=X;if(typeof X.isOptional==="function")return X.isOptional();return((Y=W._def)===null||Y===void 0?void 0:Y.typeName)==="ZodOptional"}function d4(X){var Q;if(m0(X)){let G=(Q=X._zod)===null||Q===void 0?void 0:Q.def;if(G){if(G.value!==void 0)return G.value;if(Array.isArray(G.values)&&G.values.length>0)return G.values[0]}}let Y=X._def;if(Y){if(Y.value!==void 0)return Y.value;if(Array.isArray(Y.values)&&Y.values.length>0)return Y.values[0]}let W=X.value;if(W!==void 0)return W;return}var SX={};V7(SX,{time:()=>M$,duration:()=>j$,datetime:()=>w$,date:()=>A$,ZodISOTime:()=>fJ,ZodISODuration:()=>uJ,ZodISODateTime:()=>gJ,ZodISODate:()=>hJ});var gJ=O("ZodISODateTime",(X,Q)=>{RJ.init(X,Q),H0.init(X,Q)});function w$(X){return ZJ(gJ,X)}var hJ=O("ZodISODate",(X,Q)=>{IJ.init(X,Q),H0.init(X,Q)});function A$(X){return CJ(hJ,X)}var fJ=O("ZodISOTime",(X,Q)=>{EJ.init(X,Q),H0.init(X,Q)});function M$(X){return kJ(fJ,X)}var uJ=O("ZodISODuration",(X,Q)=>{bJ.init(X,Q),H0.init(X,Q)});function j$(X){return vJ(uJ,X)}var lJ=(X,Q)=>{C4.init(X,Q),X.name="ZodError",Object.defineProperties(X,{format:{value:($)=>C9(X,$)},flatten:{value:($)=>Z9(X,$)},addIssue:{value:($)=>X.issues.push($)},addIssues:{value:($)=>X.issues.push(...$)},isEmpty:{get(){return X.issues.length===0}}})},UZ=O("ZodError",lJ),ZX=O("ZodError",lJ,{Parent:Error});var mJ=k9(ZX),cJ=_9(ZX),pJ=x9(ZX),dJ=y9(ZX);var z0=O("ZodType",(X,Q)=>{return X0.init(X,Q),X.def=Q,Object.defineProperty(X,"_def",{value:Q}),X.check=(...$)=>{return X.clone({...Q,checks:[...Q.checks??[],...$.map((Y)=>typeof Y==="function"?{_zod:{check:Y,def:{check:"custom"},onattach:[]}}:Y)]})},X.clone=($,Y)=>l0(X,$,Y),X.brand=()=>X,X.register=($,Y)=>{return $.add(X,Y),X},X.parse=($,Y)=>mJ(X,$,Y,{callee:X.parse}),X.safeParse=($,Y)=>pJ(X,$,Y),X.parseAsync=async($,Y)=>cJ(X,$,Y,{callee:X.parseAsync}),X.safeParseAsync=async($,Y)=>dJ(X,$,Y),X.spa=X.safeParseAsync,X.refine=($,Y)=>X.check(fq($,Y)),X.superRefine=($)=>X.check(uq($)),X.overwrite=($)=>X.check(W6($)),X.optional=()=>v(X),X.nullable=()=>rJ(X),X.nullish=()=>v(rJ(X)),X.nonoptional=($)=>vq(X,$),X.array=()=>r(X),X.or=($)=>J0([X,$]),X.and=($)=>n4(X,$),X.transform=($)=>I$(X,eJ($)),X.default=($)=>Zq(X,$),X.prefault=($)=>kq(X,$),X.catch=($)=>Tq(X,$),X.pipe=($)=>I$(X,$),X.readonly=()=>gq(X),X.describe=($)=>{let Y=X.clone();return g1.add(Y,{description:$}),Y},Object.defineProperty(X,"description",{get(){return g1.get(X)?.description},configurable:!0}),X.meta=(...$)=>{if($.length===0)return g1.get(X);let Y=X.clone();return g1.add(Y,$[0]),Y},X.isOptional=()=>X.safeParse(void 0).success,X.isNullable=()=>X.safeParse(null).success,X}),oJ=O("_ZodString",(X,Q)=>{EX.init(X,Q),z0.init(X,Q);let $=X._zod.bag;X.format=$.format??null,X.minLength=$.minimum??null,X.maxLength=$.maximum??null,X.regex=(...Y)=>X.check(W$(...Y)),X.includes=(...Y)=>X.check(H$(...Y)),X.startsWith=(...Y)=>X.check(B$(...Y)),X.endsWith=(...Y)=>X.check(z$(...Y)),X.min=(...Y)=>X.check(v6(...Y)),X.max=(...Y)=>X.check(l4(...Y)),X.length=(...Y)=>X.check(m4(...Y)),X.nonempty=(...Y)=>X.check(v6(1,...Y)),X.lowercase=(Y)=>X.check(J$(Y)),X.uppercase=(Y)=>X.check(G$(Y)),X.trim=()=>X.check(U$()),X.normalize=(...Y)=>X.check(K$(...Y)),X.toLowerCase=()=>X.check(V$()),X.toUpperCase=()=>X.check(L$())}),aL=O("ZodString",(X,Q)=>{EX.init(X,Q),oJ.init(X,Q),X.email=($)=>X.check(kQ(sL,$)),X.url=($)=>X.check(yQ(eL,$)),X.jwt=($)=>X.check(aQ(qq,$)),X.emoji=($)=>X.check(gQ(Xq,$)),X.guid=($)=>X.check(g4(iJ,$)),X.uuid=($)=>X.check(vQ(i4,$)),X.uuidv4=($)=>X.check(_Q(i4,$)),X.uuidv6=($)=>X.check(TQ(i4,$)),X.uuidv7=($)=>X.check(xQ(i4,$)),X.nanoid=($)=>X.check(hQ(Qq,$)),X.guid=($)=>X.check(g4(iJ,$)),X.cuid=($)=>X.check(fQ($q,$)),X.cuid2=($)=>X.check(uQ(Yq,$)),X.ulid=($)=>X.check(lQ(Wq,$)),X.base64=($)=>X.check(rQ(Uq,$)),X.base64url=($)=>X.check(oQ(Vq,$)),X.xid=($)=>X.check(mQ(Jq,$)),X.ksuid=($)=>X.check(cQ(Gq,$)),X.ipv4=($)=>X.check(pQ(Hq,$)),X.ipv6=($)=>X.check(dQ(Bq,$)),X.cidrv4=($)=>X.check(iQ(zq,$)),X.cidrv6=($)=>X.check(nQ(Kq,$)),X.e164=($)=>X.check(tQ(Lq,$)),X.datetime=($)=>X.check(w$($)),X.date=($)=>X.check(A$($)),X.time=($)=>X.check(M$($)),X.duration=($)=>X.check(j$($))});function D(X){return CQ(aL,X)}var H0=O("ZodStringFormat",(X,Q)=>{W0.init(X,Q),oJ.init(X,Q)}),sL=O("ZodEmail",(X,Q)=>{d9.init(X,Q),H0.init(X,Q)});var iJ=O("ZodGUID",(X,Q)=>{c9.init(X,Q),H0.init(X,Q)});var i4=O("ZodUUID",(X,Q)=>{p9.init(X,Q),H0.init(X,Q)});var eL=O("ZodURL",(X,Q)=>{i9.init(X,Q),H0.init(X,Q)});var Xq=O("ZodEmoji",(X,Q)=>{n9.init(X,Q),H0.init(X,Q)});var Qq=O("ZodNanoID",(X,Q)=>{r9.init(X,Q),H0.init(X,Q)});var $q=O("ZodCUID",(X,Q)=>{o9.init(X,Q),H0.init(X,Q)});var Yq=O("ZodCUID2",(X,Q)=>{t9.init(X,Q),H0.init(X,Q)});var Wq=O("ZodULID",(X,Q)=>{a9.init(X,Q),H0.init(X,Q)});var Jq=O("ZodXID",(X,Q)=>{s9.init(X,Q),H0.init(X,Q)});var Gq=O("ZodKSUID",(X,Q)=>{e9.init(X,Q),H0.init(X,Q)});var Hq=O("ZodIPv4",(X,Q)=>{XQ.init(X,Q),H0.init(X,Q)});var Bq=O("ZodIPv6",(X,Q)=>{QQ.init(X,Q),H0.init(X,Q)});var zq=O("ZodCIDRv4",(X,Q)=>{$Q.init(X,Q),H0.init(X,Q)});var Kq=O("ZodCIDRv6",(X,Q)=>{YQ.init(X,Q),H0.init(X,Q)});var Uq=O("ZodBase64",(X,Q)=>{WQ.init(X,Q),H0.init(X,Q)});var Vq=O("ZodBase64URL",(X,Q)=>{JQ.init(X,Q),H0.init(X,Q)});var Lq=O("ZodE164",(X,Q)=>{GQ.init(X,Q),H0.init(X,Q)});var qq=O("ZodJWT",(X,Q)=>{HQ.init(X,Q),H0.init(X,Q)});var tJ=O("ZodNumber",(X,Q)=>{_4.init(X,Q),z0.init(X,Q),X.gt=(Y,W)=>X.check(f4(Y,W)),X.gte=(Y,W)=>X.check(PX(Y,W)),X.min=(Y,W)=>X.check(PX(Y,W)),X.lt=(Y,W)=>X.check(h4(Y,W)),X.lte=(Y,W)=>X.check(bX(Y,W)),X.max=(Y,W)=>X.check(bX(Y,W)),X.int=(Y)=>X.check(nJ(Y)),X.safe=(Y)=>X.check(nJ(Y)),X.positive=(Y)=>X.check(f4(0,Y)),X.nonnegative=(Y)=>X.check(PX(0,Y)),X.negative=(Y)=>X.check(h4(0,Y)),X.nonpositive=(Y)=>X.check(bX(0,Y)),X.multipleOf=(Y,W)=>X.check(u4(Y,W)),X.step=(Y,W)=>X.check(u4(Y,W)),X.finite=()=>X;let $=X._zod.bag;X.minValue=Math.max($.minimum??Number.NEGATIVE_INFINITY,$.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,X.maxValue=Math.min($.maximum??Number.POSITIVE_INFINITY,$.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,X.isInt=($.format??"").includes("int")||Number.isSafeInteger($.multipleOf??0.5),X.isFinite=!0,X.format=$.format??null});function Q0(X){return sQ(tJ,X)}var Fq=O("ZodNumberFormat",(X,Q)=>{BQ.init(X,Q),tJ.init(X,Q)});function nJ(X){return eQ(Fq,X)}var Nq=O("ZodBoolean",(X,Q)=>{zQ.init(X,Q),z0.init(X,Q)});function M0(X){return X$(Nq,X)}var Oq=O("ZodNull",(X,Q)=>{KQ.init(X,Q),z0.init(X,Q)});function E$(X){return Q$(Oq,X)}var Dq=O("ZodUnknown",(X,Q)=>{UQ.init(X,Q),z0.init(X,Q)});function N0(){return $$(Dq)}var wq=O("ZodNever",(X,Q)=>{VQ.init(X,Q),z0.init(X,Q)});function Aq(X){return Y$(wq,X)}var Mq=O("ZodArray",(X,Q)=>{LQ.init(X,Q),z0.init(X,Q),X.element=Q.element,X.min=($,Y)=>X.check(v6($,Y)),X.nonempty=($)=>X.check(v6(1,$)),X.max=($,Y)=>X.check(l4($,Y)),X.length=($,Y)=>X.check(m4($,Y)),X.unwrap=()=>X.element});function r(X,Q){return _J(Mq,X,Q)}var aJ=O("ZodObject",(X,Q)=>{T4.init(X,Q),z0.init(X,Q),i.defineLazy(X,"shape",()=>Q.shape),X.keyof=()=>j0(Object.keys(X._zod.def.shape)),X.catchall=($)=>X.clone({...X._zod.def,catchall:$}),X.passthrough=()=>X.clone({...X._zod.def,catchall:N0()}),X.loose=()=>X.clone({...X._zod.def,catchall:N0()}),X.strict=()=>X.clone({...X._zod.def,catchall:Aq()}),X.strip=()=>X.clone({...X._zod.def,catchall:void 0}),X.extend=($)=>{return i.extend(X,$)},X.merge=($)=>i.merge(X,$),X.pick=($)=>i.pick(X,$),X.omit=($)=>i.omit(X,$),X.partial=(...$)=>i.partial(X5,X,$[0]),X.required=(...$)=>i.required(Q5,X,$[0])});function E(X,Q){let $={type:"object",get shape(){return i.assignProp(this,"shape",{...X}),this.shape},...i.normalizeParams(Q)};return new aJ($)}function c0(X,Q){return new aJ({type:"object",get shape(){return i.assignProp(this,"shape",{...X}),this.shape},catchall:N0(),...i.normalizeParams(Q)})}var sJ=O("ZodUnion",(X,Q)=>{x4.init(X,Q),z0.init(X,Q),X.options=Q.options});function J0(X,Q){return new sJ({type:"union",options:X,...i.normalizeParams(Q)})}var jq=O("ZodDiscriminatedUnion",(X,Q)=>{sJ.init(X,Q),qQ.init(X,Q)});function b$(X,Q,$){return new jq({type:"union",options:Q,discriminator:X,...i.normalizeParams($)})}var Rq=O("ZodIntersection",(X,Q)=>{FQ.init(X,Q),z0.init(X,Q)});function n4(X,Q){return new Rq({type:"intersection",left:X,right:Q})}var Iq=O("ZodRecord",(X,Q)=>{NQ.init(X,Q),z0.init(X,Q),X.keyType=Q.keyType,X.valueType=Q.valueType});function O0(X,Q,$){return new Iq({type:"record",keyType:X,valueType:Q,...i.normalizeParams($)})}var R$=O("ZodEnum",(X,Q)=>{OQ.init(X,Q),z0.init(X,Q),X.enum=Q.entries,X.options=Object.values(Q.entries);let $=new Set(Object.keys(Q.entries));X.extract=(Y,W)=>{let J={};for(let G of Y)if($.has(G))J[G]=Q.entries[G];else throw Error(`Key ${G} not found in enum`);return new R$({...Q,checks:[],...i.normalizeParams(W),entries:J})},X.exclude=(Y,W)=>{let J={...Q.entries};for(let G of Y)if($.has(G))delete J[G];else throw Error(`Key ${G} not found in enum`);return new R$({...Q,checks:[],...i.normalizeParams(W),entries:J})}});function j0(X,Q){let $=Array.isArray(X)?Object.fromEntries(X.map((Y)=>[Y,Y])):X;return new R$({type:"enum",entries:$,...i.normalizeParams(Q)})}var Eq=O("ZodLiteral",(X,Q)=>{DQ.init(X,Q),z0.init(X,Q),X.values=new Set(Q.values),Object.defineProperty(X,"value",{get(){if(Q.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return Q.values[0]}})});function _(X,Q){return new Eq({type:"literal",values:Array.isArray(X)?X:[X],...i.normalizeParams(Q)})}var bq=O("ZodTransform",(X,Q)=>{wQ.init(X,Q),z0.init(X,Q),X._zod.parse=($,Y)=>{$.addIssue=(J)=>{if(typeof J==="string")$.issues.push(i.issue(J,$.value,Q));else{let G=J;if(G.fatal)G.continue=!1;G.code??(G.code="custom"),G.input??(G.input=$.value),G.inst??(G.inst=X),G.continue??(G.continue=!0),$.issues.push(i.issue(G))}};let W=Q.transform($.value,$);if(W instanceof Promise)return W.then((J)=>{return $.value=J,$});return $.value=W,$}});function eJ(X){return new bq({type:"transform",transform:X})}var X5=O("ZodOptional",(X,Q)=>{AQ.init(X,Q),z0.init(X,Q),X.unwrap=()=>X._zod.def.innerType});function v(X){return new X5({type:"optional",innerType:X})}var Pq=O("ZodNullable",(X,Q)=>{MQ.init(X,Q),z0.init(X,Q),X.unwrap=()=>X._zod.def.innerType});function rJ(X){return new Pq({type:"nullable",innerType:X})}var Sq=O("ZodDefault",(X,Q)=>{jQ.init(X,Q),z0.init(X,Q),X.unwrap=()=>X._zod.def.innerType,X.removeDefault=X.unwrap});function Zq(X,Q){return new Sq({type:"default",innerType:X,get defaultValue(){return typeof Q==="function"?Q():Q}})}var Cq=O("ZodPrefault",(X,Q)=>{RQ.init(X,Q),z0.init(X,Q),X.unwrap=()=>X._zod.def.innerType});function kq(X,Q){return new Cq({type:"prefault",innerType:X,get defaultValue(){return typeof Q==="function"?Q():Q}})}var Q5=O("ZodNonOptional",(X,Q)=>{IQ.init(X,Q),z0.init(X,Q),X.unwrap=()=>X._zod.def.innerType});function vq(X,Q){return new Q5({type:"nonoptional",innerType:X,...i.normalizeParams(Q)})}var _q=O("ZodCatch",(X,Q)=>{EQ.init(X,Q),z0.init(X,Q),X.unwrap=()=>X._zod.def.innerType,X.removeCatch=X.unwrap});function Tq(X,Q){return new _q({type:"catch",innerType:X,catchValue:typeof Q==="function"?Q:()=>Q})}var xq=O("ZodPipe",(X,Q)=>{bQ.init(X,Q),z0.init(X,Q),X.in=Q.in,X.out=Q.out});function I$(X,Q){return new xq({type:"pipe",in:X,out:Q})}var yq=O("ZodReadonly",(X,Q)=>{PQ.init(X,Q),z0.init(X,Q)});function gq(X){return new yq({type:"readonly",innerType:X})}var $5=O("ZodCustom",(X,Q)=>{SQ.init(X,Q),z0.init(X,Q)});function hq(X,Q){let $=new A0({check:"custom",...i.normalizeParams(Q)});return $._zod.check=X,$}function Y5(X,Q){return q$($5,X??(()=>!0),Q)}function fq(X,Q={}){return F$($5,X,Q)}function uq(X,Q){let $=hq((Y)=>{return Y.addIssue=(W)=>{if(typeof W==="string")Y.issues.push(i.issue(W,Y.value,$._zod.def));else{let J=W;if(J.fatal)J.continue=!1;J.code??(J.code="custom"),J.input??(J.input=Y.value),J.inst??(J.inst=$),J.continue??(J.continue=!$._zod.def.abort),Y.issues.push(i.issue(J))}},X(Y.value,Y)},Q);return $}function P$(X,Q){return I$(eJ(X),Q)}u0(ZQ());var S$="2025-11-25";var W5=[S$,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],z1="io.modelcontextprotocol/related-task",o4="2.0",B1=Y5((X)=>X!==null&&(typeof X==="object"||typeof X==="function")),J5=J0([D(),Q0().int()]),G5=D(),lq=c0({ttl:J0([Q0(),E$()]).optional(),pollInterval:Q0().optional()}),Z$=c0({taskId:D()}),mq=c0({progressToken:J5.optional(),[z1]:Z$.optional()}),T0=c0({task:lq.optional(),_meta:mq.optional()}),R0=E({method:D(),params:T0.optional()}),G6=c0({_meta:E({[z1]:v(Z$)}).passthrough().optional()}),p0=E({method:D(),params:G6.optional()}),P0=c0({_meta:c0({[z1]:Z$.optional()}).optional()}),t4=J0([D(),Q0().int()]),H5=E({jsonrpc:_(o4),id:t4,...R0.shape}).strict(),C$=(X)=>H5.safeParse(X).success,B5=E({jsonrpc:_(o4),...p0.shape}).strict(),z5=(X)=>B5.safeParse(X).success,K5=E({jsonrpc:_(o4),id:t4,result:P0}).strict(),CX=(X)=>K5.safeParse(X).success,x;(function(X){X[X.ConnectionClosed=-32000]="ConnectionClosed",X[X.RequestTimeout=-32001]="RequestTimeout",X[X.ParseError=-32700]="ParseError",X[X.InvalidRequest=-32600]="InvalidRequest",X[X.MethodNotFound=-32601]="MethodNotFound",X[X.InvalidParams=-32602]="InvalidParams",X[X.InternalError=-32603]="InternalError",X[X.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(x||(x={}));var U5=E({jsonrpc:_(o4),id:t4,error:E({code:Q0().int(),message:D(),data:v(N0())})}).strict(),V5=(X)=>U5.safeParse(X).success,EZ=J0([H5,B5,K5,U5]),a4=P0.strict(),cq=G6.extend({requestId:t4,reason:D().optional()}),s4=p0.extend({method:_("notifications/cancelled"),params:cq}),pq=E({src:D(),mimeType:D().optional(),sizes:r(D()).optional()}),kX=E({icons:r(pq).optional()}),x6=E({name:D(),title:D().optional()}),L5=x6.extend({...x6.shape,...kX.shape,version:D(),websiteUrl:D().optional()}),dq=n4(E({applyDefaults:M0().optional()}),O0(D(),N0())),iq=P$((X)=>{if(X&&typeof X==="object"&&!Array.isArray(X)){if(Object.keys(X).length===0)return{form:{}}}return X},n4(E({form:dq.optional(),url:B1.optional()}),O0(D(),N0()).optional())),nq=E({list:v(E({}).passthrough()),cancel:v(E({}).passthrough()),requests:v(E({sampling:v(E({createMessage:v(E({}).passthrough())}).passthrough()),elicitation:v(E({create:v(E({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),rq=E({list:v(E({}).passthrough()),cancel:v(E({}).passthrough()),requests:v(E({tools:v(E({call:v(E({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),oq=E({experimental:O0(D(),B1).optional(),sampling:E({context:B1.optional(),tools:B1.optional()}).optional(),elicitation:iq.optional(),roots:E({listChanged:M0().optional()}).optional(),tasks:v(nq)}),tq=T0.extend({protocolVersion:D(),capabilities:oq,clientInfo:L5}),k$=R0.extend({method:_("initialize"),params:tq});var aq=E({experimental:O0(D(),B1).optional(),logging:B1.optional(),completions:B1.optional(),prompts:v(E({listChanged:v(M0())})),resources:E({subscribe:M0().optional(),listChanged:M0().optional()}).optional(),tools:E({listChanged:M0().optional()}).optional(),tasks:v(rq)}).passthrough(),sq=P0.extend({protocolVersion:D(),capabilities:aq,serverInfo:L5,instructions:D().optional()}),v$=p0.extend({method:_("notifications/initialized")});var e4=R0.extend({method:_("ping")}),eq=E({progress:Q0(),total:v(Q0()),message:v(D())}),XF=E({...G6.shape,...eq.shape,progressToken:J5}),X8=p0.extend({method:_("notifications/progress"),params:XF}),QF=T0.extend({cursor:G5.optional()}),vX=R0.extend({params:QF.optional()}),_X=P0.extend({nextCursor:v(G5)}),TX=E({taskId:D(),status:j0(["working","input_required","completed","failed","cancelled"]),ttl:J0([Q0(),E$()]),createdAt:D(),lastUpdatedAt:D(),pollInterval:v(Q0()),statusMessage:v(D())}),y6=P0.extend({task:TX}),$F=G6.merge(TX),xX=p0.extend({method:_("notifications/tasks/status"),params:$F}),Q8=R0.extend({method:_("tasks/get"),params:T0.extend({taskId:D()})}),$8=P0.merge(TX),Y8=R0.extend({method:_("tasks/result"),params:T0.extend({taskId:D()})}),W8=vX.extend({method:_("tasks/list")}),J8=_X.extend({tasks:r(TX)}),q5=R0.extend({method:_("tasks/cancel"),params:T0.extend({taskId:D()})}),F5=P0.merge(TX),N5=E({uri:D(),mimeType:v(D()),_meta:O0(D(),N0()).optional()}),O5=N5.extend({text:D()}),_$=D().refine((X)=>{try{return atob(X),!0}catch(Q){return!1}},{message:"Invalid Base64 string"}),D5=N5.extend({blob:_$}),g6=E({audience:r(j0(["user","assistant"])).optional(),priority:Q0().min(0).max(1).optional(),lastModified:SX.datetime({offset:!0}).optional()}),w5=E({...x6.shape,...kX.shape,uri:D(),description:v(D()),mimeType:v(D()),annotations:g6.optional(),_meta:v(c0({}))}),YF=E({...x6.shape,...kX.shape,uriTemplate:D(),description:v(D()),mimeType:v(D()),annotations:g6.optional(),_meta:v(c0({}))}),G8=vX.extend({method:_("resources/list")}),WF=_X.extend({resources:r(w5)}),H8=vX.extend({method:_("resources/templates/list")}),JF=_X.extend({resourceTemplates:r(YF)}),T$=T0.extend({uri:D()}),GF=T$,B8=R0.extend({method:_("resources/read"),params:GF}),HF=P0.extend({contents:r(J0([O5,D5]))}),BF=p0.extend({method:_("notifications/resources/list_changed")}),zF=T$,KF=R0.extend({method:_("resources/subscribe"),params:zF}),UF=T$,VF=R0.extend({method:_("resources/unsubscribe"),params:UF}),LF=G6.extend({uri:D()}),qF=p0.extend({method:_("notifications/resources/updated"),params:LF}),FF=E({name:D(),description:v(D()),required:v(M0())}),NF=E({...x6.shape,...kX.shape,description:v(D()),arguments:v(r(FF)),_meta:v(c0({}))}),z8=vX.extend({method:_("prompts/list")}),OF=_X.extend({prompts:r(NF)}),DF=T0.extend({name:D(),arguments:O0(D(),D()).optional()}),K8=R0.extend({method:_("prompts/get"),params:DF}),x$=E({type:_("text"),text:D(),annotations:g6.optional(),_meta:O0(D(),N0()).optional()}),y$=E({type:_("image"),data:_$,mimeType:D(),annotations:g6.optional(),_meta:O0(D(),N0()).optional()}),g$=E({type:_("audio"),data:_$,mimeType:D(),annotations:g6.optional(),_meta:O0(D(),N0()).optional()}),wF=E({type:_("tool_use"),name:D(),id:D(),input:E({}).passthrough(),_meta:v(E({}).passthrough())}).passthrough(),AF=E({type:_("resource"),resource:J0([O5,D5]),annotations:g6.optional(),_meta:O0(D(),N0()).optional()}),MF=w5.extend({type:_("resource_link")}),h$=J0([x$,y$,g$,MF,AF]),jF=E({role:j0(["user","assistant"]),content:h$}),RF=P0.extend({description:v(D()),messages:r(jF)}),IF=p0.extend({method:_("notifications/prompts/list_changed")}),EF=E({title:D().optional(),readOnlyHint:M0().optional(),destructiveHint:M0().optional(),idempotentHint:M0().optional(),openWorldHint:M0().optional()}),bF=E({taskSupport:j0(["required","optional","forbidden"]).optional()}),A5=E({...x6.shape,...kX.shape,description:D().optional(),inputSchema:E({type:_("object"),properties:O0(D(),B1).optional(),required:r(D()).optional()}).catchall(N0()),outputSchema:E({type:_("object"),properties:O0(D(),B1).optional(),required:r(D()).optional()}).catchall(N0()).optional(),annotations:v(EF),execution:v(bF),_meta:O0(D(),N0()).optional()}),U8=vX.extend({method:_("tools/list")}),PF=_X.extend({tools:r(A5)}),V8=P0.extend({content:r(h$).default([]),structuredContent:O0(D(),N0()).optional(),isError:v(M0())}),bZ=V8.or(P0.extend({toolResult:N0()})),SF=T0.extend({name:D(),arguments:v(O0(D(),N0()))}),h6=R0.extend({method:_("tools/call"),params:SF}),ZF=p0.extend({method:_("notifications/tools/list_changed")}),yX=j0(["debug","info","notice","warning","error","critical","alert","emergency"]),CF=T0.extend({level:yX}),f$=R0.extend({method:_("logging/setLevel"),params:CF}),kF=G6.extend({level:yX,logger:D().optional(),data:N0()}),vF=p0.extend({method:_("notifications/message"),params:kF}),_F=E({name:D().optional()}),TF=E({hints:v(r(_F)),costPriority:v(Q0().min(0).max(1)),speedPriority:v(Q0().min(0).max(1)),intelligencePriority:v(Q0().min(0).max(1))}),xF=E({mode:v(j0(["auto","required","none"]))}),yF=E({type:_("tool_result"),toolUseId:D().describe("The unique identifier for the corresponding tool call."),content:r(h$).default([]),structuredContent:E({}).passthrough().optional(),isError:v(M0()),_meta:v(E({}).passthrough())}).passthrough(),gF=b$("type",[x$,y$,g$]),r4=b$("type",[x$,y$,g$,wF,yF]),hF=E({role:j0(["user","assistant"]),content:J0([r4,r(r4)]),_meta:v(E({}).passthrough())}).passthrough(),fF=T0.extend({messages:r(hF),modelPreferences:TF.optional(),systemPrompt:D().optional(),includeContext:j0(["none","thisServer","allServers"]).optional(),temperature:Q0().optional(),maxTokens:Q0().int(),stopSequences:r(D()).optional(),metadata:B1.optional(),tools:v(r(A5)),toolChoice:v(xF)}),uF=R0.extend({method:_("sampling/createMessage"),params:fF}),u$=P0.extend({model:D(),stopReason:v(j0(["endTurn","stopSequence","maxTokens"]).or(D())),role:j0(["user","assistant"]),content:gF}),l$=P0.extend({model:D(),stopReason:v(j0(["endTurn","stopSequence","maxTokens","toolUse"]).or(D())),role:j0(["user","assistant"]),content:J0([r4,r(r4)])}),lF=E({type:_("boolean"),title:D().optional(),description:D().optional(),default:M0().optional()}),mF=E({type:_("string"),title:D().optional(),description:D().optional(),minLength:Q0().optional(),maxLength:Q0().optional(),format:j0(["email","uri","date","date-time"]).optional(),default:D().optional()}),cF=E({type:j0(["number","integer"]),title:D().optional(),description:D().optional(),minimum:Q0().optional(),maximum:Q0().optional(),default:Q0().optional()}),pF=E({type:_("string"),title:D().optional(),description:D().optional(),enum:r(D()),default:D().optional()}),dF=E({type:_("string"),title:D().optional(),description:D().optional(),oneOf:r(E({const:D(),title:D()})),default:D().optional()}),iF=E({type:_("string"),title:D().optional(),description:D().optional(),enum:r(D()),enumNames:r(D()).optional(),default:D().optional()}),nF=J0([pF,dF]),rF=E({type:_("array"),title:D().optional(),description:D().optional(),minItems:Q0().optional(),maxItems:Q0().optional(),items:E({type:_("string"),enum:r(D())}),default:r(D()).optional()}),oF=E({type:_("array"),title:D().optional(),description:D().optional(),minItems:Q0().optional(),maxItems:Q0().optional(),items:E({anyOf:r(E({const:D(),title:D()}))}),default:r(D()).optional()}),tF=J0([rF,oF]),aF=J0([iF,nF,tF]),sF=J0([aF,lF,mF,cF]),eF=T0.extend({mode:_("form").optional(),message:D(),requestedSchema:E({type:_("object"),properties:O0(D(),sF),required:r(D()).optional()})}),XN=T0.extend({mode:_("url"),message:D(),elicitationId:D(),url:D().url()}),QN=J0([eF,XN]),$N=R0.extend({method:_("elicitation/create"),params:QN}),YN=G6.extend({elicitationId:D()}),WN=p0.extend({method:_("notifications/elicitation/complete"),params:YN}),L8=P0.extend({action:j0(["accept","decline","cancel"]),content:P$((X)=>X===null?void 0:X,O0(D(),J0([D(),Q0(),M0(),r(D())])).optional())}),JN=E({type:_("ref/resource"),uri:D()});var GN=E({type:_("ref/prompt"),name:D()}),HN=T0.extend({ref:J0([GN,JN]),argument:E({name:D(),value:D()}),context:E({arguments:O0(D(),D()).optional()}).optional()}),q8=R0.extend({method:_("completion/complete"),params:HN});function M5(X){if(X.params.ref.type!=="ref/prompt")throw TypeError(`Expected CompleteRequestPrompt, but got ${X.params.ref.type}`)}function j5(X){if(X.params.ref.type!=="ref/resource")throw TypeError(`Expected CompleteRequestResourceTemplate, but got ${X.params.ref.type}`)}var BN=P0.extend({completion:c0({values:r(D()).max(100),total:v(Q0().int()),hasMore:v(M0())})}),zN=E({uri:D().startsWith("file://"),name:D().optional(),_meta:O0(D(),N0()).optional()}),KN=R0.extend({method:_("roots/list")}),m$=P0.extend({roots:r(zN)}),UN=p0.extend({method:_("notifications/roots/list_changed")}),PZ=J0([e4,k$,q8,f$,K8,z8,G8,H8,B8,KF,VF,h6,U8,Q8,Y8,W8]),SZ=J0([s4,X8,v$,UN,xX]),ZZ=J0([a4,u$,l$,L8,m$,$8,J8,y6]),CZ=J0([e4,uF,$N,KN,Q8,Y8,W8]),kZ=J0([s4,X8,vF,qF,BF,ZF,IF,xX,WN]),vZ=J0([a4,sq,BN,RF,OF,WF,JF,HF,V8,PF,$8,J8,y6]);class k extends Error{constructor(X,Q,$){super(`MCP error ${X}: ${Q}`);this.code=X,this.data=$,this.name="McpError"}static fromError(X,Q,$){if(X===x.UrlElicitationRequired&&$){let Y=$;if(Y.elicitations)return new R5(Y.elicitations,Q)}return new k(X,Q,$)}}class R5 extends k{constructor(X,Q=`URL elicitation${X.length>1?"s":""} required`){super(x.UrlElicitationRequired,Q,{elicitations:X})}get elicitations(){var X,Q;return(Q=(X=this.data)===null||X===void 0?void 0:X.elicitations)!==null&&Q!==void 0?Q:[]}}function u1(X){return X==="completed"||X==="failed"||X==="cancelled"}var E5=Symbol("Let zodToJsonSchema decide on which parser to use");var I5={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},b5=(X)=>typeof X==="string"?{...I5,name:X}:{...I5,...X};var P5=(X)=>{let Q=b5(X),$=Q.name!==void 0?[...Q.basePath,Q.definitionPath,Q.name]:Q.basePath;return{...Q,flags:{hasReferencedOpenAiAnyType:!1},currentPath:$,propertyPath:void 0,seen:new Map(Object.entries(Q.definitions).map(([Y,W])=>[W._def,{def:W._def,path:[...Q.basePath,Q.definitionPath,Y],jsonSchema:void 0}]))}};function c$(X,Q,$,Y){if(!Y?.errorMessages)return;if($)X.errorMessage={...X.errorMessage,[Q]:$}}function o(X,Q,$,Y,W){X[Q]=$,c$(X,Q,Y,W)}var F8=(X,Q)=>{let $=0;for(;$<X.length&&$<Q.length;$++)if(X[$]!==Q[$])break;return[(X.length-$).toString(),...Q.slice($)].join("/")};function B0(X){if(X.target!=="openAi")return{};let Q=[...X.basePath,X.definitionPath,X.openAiAnyTypeName];return X.flags.hasReferencedOpenAiAnyType=!0,{$ref:X.$refStrategy==="relative"?F8(Q,X.currentPath):Q.join("/")}}function S5(X,Q){let $={type:"array"};if(X.type?._def&&X.type?._def?.typeName!==j.ZodAny)$.items=h(X.type._def,{...Q,currentPath:[...Q.currentPath,"items"]});if(X.minLength)o($,"minItems",X.minLength.value,X.minLength.message,Q);if(X.maxLength)o($,"maxItems",X.maxLength.value,X.maxLength.message,Q);if(X.exactLength)o($,"minItems",X.exactLength.value,X.exactLength.message,Q),o($,"maxItems",X.exactLength.value,X.exactLength.message,Q);return $}function Z5(X,Q){let $={type:"integer",format:"int64"};if(!X.checks)return $;for(let Y of X.checks)switch(Y.kind){case"min":if(Q.target==="jsonSchema7")if(Y.inclusive)o($,"minimum",Y.value,Y.message,Q);else o($,"exclusiveMinimum",Y.value,Y.message,Q);else{if(!Y.inclusive)$.exclusiveMinimum=!0;o($,"minimum",Y.value,Y.message,Q)}break;case"max":if(Q.target==="jsonSchema7")if(Y.inclusive)o($,"maximum",Y.value,Y.message,Q);else o($,"exclusiveMaximum",Y.value,Y.message,Q);else{if(!Y.inclusive)$.exclusiveMaximum=!0;o($,"maximum",Y.value,Y.message,Q)}break;case"multipleOf":o($,"multipleOf",Y.value,Y.message,Q);break}return $}function C5(){return{type:"boolean"}}function N8(X,Q){return h(X.type._def,Q)}var k5=(X,Q)=>{return h(X.innerType._def,Q)};function p$(X,Q,$){let Y=$??Q.dateStrategy;if(Array.isArray(Y))return{anyOf:Y.map((W,J)=>p$(X,Q,W))};switch(Y){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return VN(X,Q)}}var VN=(X,Q)=>{let $={type:"integer",format:"unix-time"};if(Q.target==="openApi3")return $;for(let Y of X.checks)switch(Y.kind){case"min":o($,"minimum",Y.value,Y.message,Q);break;case"max":o($,"maximum",Y.value,Y.message,Q);break}return $};function v5(X,Q){return{...h(X.innerType._def,Q),default:X.defaultValue()}}function _5(X,Q){return Q.effectStrategy==="input"?h(X.schema._def,Q):B0(Q)}function T5(X){return{type:"string",enum:Array.from(X.values)}}var LN=(X)=>{if("type"in X&&X.type==="string")return!1;return"allOf"in X};function x5(X,Q){let $=[h(X.left._def,{...Q,currentPath:[...Q.currentPath,"allOf","0"]}),h(X.right._def,{...Q,currentPath:[...Q.currentPath,"allOf","1"]})].filter((J)=>!!J),Y=Q.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,W=[];return $.forEach((J)=>{if(LN(J)){if(W.push(...J.allOf),J.unevaluatedProperties===void 0)Y=void 0}else{let G=J;if("additionalProperties"in J&&J.additionalProperties===!1){let{additionalProperties:H,...B}=J;G=B}else Y=void 0;W.push(G)}}),W.length?{allOf:W,...Y}:void 0}function y5(X,Q){let $=typeof X.value;if($!=="bigint"&&$!=="number"&&$!=="boolean"&&$!=="string")return{type:Array.isArray(X.value)?"array":"object"};if(Q.target==="openApi3")return{type:$==="bigint"?"integer":$,enum:[X.value]};return{type:$==="bigint"?"integer":$,const:X.value}}var d$=void 0,t0={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(d$===void 0)d$=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return d$},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function O8(X,Q){let $={type:"string"};if(X.checks)for(let Y of X.checks)switch(Y.kind){case"min":o($,"minLength",typeof $.minLength==="number"?Math.max($.minLength,Y.value):Y.value,Y.message,Q);break;case"max":o($,"maxLength",typeof $.maxLength==="number"?Math.min($.maxLength,Y.value):Y.value,Y.message,Q);break;case"email":switch(Q.emailStrategy){case"format:email":a0($,"email",Y.message,Q);break;case"format:idn-email":a0($,"idn-email",Y.message,Q);break;case"pattern:zod":k0($,t0.email,Y.message,Q);break}break;case"url":a0($,"uri",Y.message,Q);break;case"uuid":a0($,"uuid",Y.message,Q);break;case"regex":k0($,Y.regex,Y.message,Q);break;case"cuid":k0($,t0.cuid,Y.message,Q);break;case"cuid2":k0($,t0.cuid2,Y.message,Q);break;case"startsWith":k0($,RegExp(`^${i$(Y.value,Q)}`),Y.message,Q);break;case"endsWith":k0($,RegExp(`${i$(Y.value,Q)}$`),Y.message,Q);break;case"datetime":a0($,"date-time",Y.message,Q);break;case"date":a0($,"date",Y.message,Q);break;case"time":a0($,"time",Y.message,Q);break;case"duration":a0($,"duration",Y.message,Q);break;case"length":o($,"minLength",typeof $.minLength==="number"?Math.max($.minLength,Y.value):Y.value,Y.message,Q),o($,"maxLength",typeof $.maxLength==="number"?Math.min($.maxLength,Y.value):Y.value,Y.message,Q);break;case"includes":{k0($,RegExp(i$(Y.value,Q)),Y.message,Q);break}case"ip":{if(Y.version!=="v6")a0($,"ipv4",Y.message,Q);if(Y.version!=="v4")a0($,"ipv6",Y.message,Q);break}case"base64url":k0($,t0.base64url,Y.message,Q);break;case"jwt":k0($,t0.jwt,Y.message,Q);break;case"cidr":{if(Y.version!=="v6")k0($,t0.ipv4Cidr,Y.message,Q);if(Y.version!=="v4")k0($,t0.ipv6Cidr,Y.message,Q);break}case"emoji":k0($,t0.emoji(),Y.message,Q);break;case"ulid":{k0($,t0.ulid,Y.message,Q);break}case"base64":{switch(Q.base64Strategy){case"format:binary":{a0($,"binary",Y.message,Q);break}case"contentEncoding:base64":{o($,"contentEncoding","base64",Y.message,Q);break}case"pattern:zod":{k0($,t0.base64,Y.message,Q);break}}break}case"nanoid":k0($,t0.nanoid,Y.message,Q);case"toLowerCase":case"toUpperCase":case"trim":break;default:((W)=>{})(Y)}return $}function i$(X,Q){return Q.patternStrategy==="escape"?FN(X):X}var qN=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function FN(X){let Q="";for(let $=0;$<X.length;$++){if(!qN.has(X[$]))Q+="\\";Q+=X[$]}return Q}function a0(X,Q,$,Y){if(X.format||X.anyOf?.some((W)=>W.format)){if(!X.anyOf)X.anyOf=[];if(X.format){if(X.anyOf.push({format:X.format,...X.errorMessage&&Y.errorMessages&&{errorMessage:{format:X.errorMessage.format}}}),delete X.format,X.errorMessage){if(delete X.errorMessage.format,Object.keys(X.errorMessage).length===0)delete X.errorMessage}}X.anyOf.push({format:Q,...$&&Y.errorMessages&&{errorMessage:{format:$}}})}else o(X,"format",Q,$,Y)}function k0(X,Q,$,Y){if(X.pattern||X.allOf?.some((W)=>W.pattern)){if(!X.allOf)X.allOf=[];if(X.pattern){if(X.allOf.push({pattern:X.pattern,...X.errorMessage&&Y.errorMessages&&{errorMessage:{pattern:X.errorMessage.pattern}}}),delete X.pattern,X.errorMessage){if(delete X.errorMessage.pattern,Object.keys(X.errorMessage).length===0)delete X.errorMessage}}X.allOf.push({pattern:g5(Q,Y),...$&&Y.errorMessages&&{errorMessage:{pattern:$}}})}else o(X,"pattern",g5(Q,Y),$,Y)}function g5(X,Q){if(!Q.applyRegexFlags||!X.flags)return X.source;let $={i:X.flags.includes("i"),m:X.flags.includes("m"),s:X.flags.includes("s")},Y=$.i?X.source.toLowerCase():X.source,W="",J=!1,G=!1,H=!1;for(let B=0;B<Y.length;B++){if(J){W+=Y[B],J=!1;continue}if($.i){if(G){if(Y[B].match(/[a-z]/)){if(H)W+=Y[B],W+=`${Y[B-2]}-${Y[B]}`.toUpperCase(),H=!1;else if(Y[B+1]==="-"&&Y[B+2]?.match(/[a-z]/))W+=Y[B],H=!0;else W+=`${Y[B]}${Y[B].toUpperCase()}`;continue}}else if(Y[B].match(/[a-z]/)){W+=`[${Y[B]}${Y[B].toUpperCase()}]`;continue}}if($.m){if(Y[B]==="^"){W+=`(^|(?<=[\r
]))`;continue}else if(Y[B]==="$"){W+=`($|(?=[\r
]))`;continue}}if($.s&&Y[B]==="."){W+=G?`${Y[B]}\r
`:`[${Y[B]}\r
]`;continue}if(W+=Y[B],Y[B]==="\\")J=!0;else if(G&&Y[B]==="]")G=!1;else if(!G&&Y[B]==="[")G=!0}try{new RegExp(W)}catch{return console.warn(`Could not convert regex pattern at ${Q.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),X.source}return W}function D8(X,Q){if(Q.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if(Q.target==="openApi3"&&X.keyType?._def.typeName===j.ZodEnum)return{type:"object",required:X.keyType._def.values,properties:X.keyType._def.values.reduce((Y,W)=>({...Y,[W]:h(X.valueType._def,{...Q,currentPath:[...Q.currentPath,"properties",W]})??B0(Q)}),{}),additionalProperties:Q.rejectedAdditionalProperties};let $={type:"object",additionalProperties:h(X.valueType._def,{...Q,currentPath:[...Q.currentPath,"additionalProperties"]})??Q.allowedAdditionalProperties};if(Q.target==="openApi3")return $;if(X.keyType?._def.typeName===j.ZodString&&X.keyType._def.checks?.length){let{type:Y,...W}=O8(X.keyType._def,Q);return{...$,propertyNames:W}}else if(X.keyType?._def.typeName===j.ZodEnum)return{...$,propertyNames:{enum:X.keyType._def.values}};else if(X.keyType?._def.typeName===j.ZodBranded&&X.keyType._def.type._def.typeName===j.ZodString&&X.keyType._def.type._def.checks?.length){let{type:Y,...W}=N8(X.keyType._def,Q);return{...$,propertyNames:W}}return $}function h5(X,Q){if(Q.mapStrategy==="record")return D8(X,Q);let $=h(X.keyType._def,{...Q,currentPath:[...Q.currentPath,"items","items","0"]})||B0(Q),Y=h(X.valueType._def,{...Q,currentPath:[...Q.currentPath,"items","items","1"]})||B0(Q);return{type:"array",maxItems:125,items:{type:"array",items:[$,Y],minItems:2,maxItems:2}}}function f5(X){let Q=X.values,Y=Object.keys(X.values).filter((J)=>{return typeof Q[Q[J]]!=="number"}).map((J)=>Q[J]),W=Array.from(new Set(Y.map((J)=>typeof J)));return{type:W.length===1?W[0]==="string"?"string":"number":["string","number"],enum:Y}}function u5(X){return X.target==="openAi"?void 0:{not:B0({...X,currentPath:[...X.currentPath,"not"]})}}function l5(X){return X.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var gX={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function c5(X,Q){if(Q.target==="openApi3")return m5(X,Q);let $=X.options instanceof Map?Array.from(X.options.values()):X.options;if($.every((Y)=>(Y._def.typeName in gX)&&(!Y._def.checks||!Y._def.checks.length))){let Y=$.reduce((W,J)=>{let G=gX[J._def.typeName];return G&&!W.includes(G)?[...W,G]:W},[]);return{type:Y.length>1?Y:Y[0]}}else if($.every((Y)=>Y._def.typeName==="ZodLiteral"&&!Y.description)){let Y=$.reduce((W,J)=>{let G=typeof J._def.value;switch(G){case"string":case"number":case"boolean":return[...W,G];case"bigint":return[...W,"integer"];case"object":if(J._def.value===null)return[...W,"null"];case"symbol":case"undefined":case"function":default:return W}},[]);if(Y.length===$.length){let W=Y.filter((J,G,H)=>H.indexOf(J)===G);return{type:W.length>1?W:W[0],enum:$.reduce((J,G)=>{return J.includes(G._def.value)?J:[...J,G._def.value]},[])}}}else if($.every((Y)=>Y._def.typeName==="ZodEnum"))return{type:"string",enum:$.reduce((Y,W)=>[...Y,...W._def.values.filter((J)=>!Y.includes(J))],[])};return m5(X,Q)}var m5=(X,Q)=>{let $=(X.options instanceof Map?Array.from(X.options.values()):X.options).map((Y,W)=>h(Y._def,{...Q,currentPath:[...Q.currentPath,"anyOf",`${W}`]})).filter((Y)=>!!Y&&(!Q.strictUnions||typeof Y==="object"&&Object.keys(Y).length>0));return $.length?{anyOf:$}:void 0};function p5(X,Q){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(X.innerType._def.typeName)&&(!X.innerType._def.checks||!X.innerType._def.checks.length)){if(Q.target==="openApi3")return{type:gX[X.innerType._def.typeName],nullable:!0};return{type:[gX[X.innerType._def.typeName],"null"]}}if(Q.target==="openApi3"){let Y=h(X.innerType._def,{...Q,currentPath:[...Q.currentPath]});if(Y&&"$ref"in Y)return{allOf:[Y],nullable:!0};return Y&&{...Y,nullable:!0}}let $=h(X.innerType._def,{...Q,currentPath:[...Q.currentPath,"anyOf","0"]});return $&&{anyOf:[$,{type:"null"}]}}function d5(X,Q){let $={type:"number"};if(!X.checks)return $;for(let Y of X.checks)switch(Y.kind){case"int":$.type="integer",c$($,"type",Y.message,Q);break;case"min":if(Q.target==="jsonSchema7")if(Y.inclusive)o($,"minimum",Y.value,Y.message,Q);else o($,"exclusiveMinimum",Y.value,Y.message,Q);else{if(!Y.inclusive)$.exclusiveMinimum=!0;o($,"minimum",Y.value,Y.message,Q)}break;case"max":if(Q.target==="jsonSchema7")if(Y.inclusive)o($,"maximum",Y.value,Y.message,Q);else o($,"exclusiveMaximum",Y.value,Y.message,Q);else{if(!Y.inclusive)$.exclusiveMaximum=!0;o($,"maximum",Y.value,Y.message,Q)}break;case"multipleOf":o($,"multipleOf",Y.value,Y.message,Q);break}return $}function i5(X,Q){let $=Q.target==="openAi",Y={type:"object",properties:{}},W=[],J=X.shape();for(let H in J){let B=J[H];if(B===void 0||B._def===void 0)continue;let z=ON(B);if(z&&$){if(B._def.typeName==="ZodOptional")B=B._def.innerType;if(!B.isNullable())B=B.nullable();z=!1}let K=h(B._def,{...Q,currentPath:[...Q.currentPath,"properties",H],propertyPath:[...Q.currentPath,"properties",H]});if(K===void 0)continue;if(Y.properties[H]=K,!z)W.push(H)}if(W.length)Y.required=W;let G=NN(X,Q);if(G!==void 0)Y.additionalProperties=G;return Y}function NN(X,Q){if(X.catchall._def.typeName!=="ZodNever")return h(X.catchall._def,{...Q,currentPath:[...Q.currentPath,"additionalProperties"]});switch(X.unknownKeys){case"passthrough":return Q.allowedAdditionalProperties;case"strict":return Q.rejectedAdditionalProperties;case"strip":return Q.removeAdditionalStrategy==="strict"?Q.allowedAdditionalProperties:Q.rejectedAdditionalProperties}}function ON(X){try{return X.isOptional()}catch{return!0}}var n5=(X,Q)=>{if(Q.currentPath.toString()===Q.propertyPath?.toString())return h(X.innerType._def,Q);let $=h(X.innerType._def,{...Q,currentPath:[...Q.currentPath,"anyOf","1"]});return $?{anyOf:[{not:B0(Q)},$]}:B0(Q)};var r5=(X,Q)=>{if(Q.pipeStrategy==="input")return h(X.in._def,Q);else if(Q.pipeStrategy==="output")return h(X.out._def,Q);let $=h(X.in._def,{...Q,currentPath:[...Q.currentPath,"allOf","0"]}),Y=h(X.out._def,{...Q,currentPath:[...Q.currentPath,"allOf",$?"1":"0"]});return{allOf:[$,Y].filter((W)=>W!==void 0)}};function o5(X,Q){return h(X.type._def,Q)}function t5(X,Q){let Y={type:"array",uniqueItems:!0,items:h(X.valueType._def,{...Q,currentPath:[...Q.currentPath,"items"]})};if(X.minSize)o(Y,"minItems",X.minSize.value,X.minSize.message,Q);if(X.maxSize)o(Y,"maxItems",X.maxSize.value,X.maxSize.message,Q);return Y}function a5(X,Q){if(X.rest)return{type:"array",minItems:X.items.length,items:X.items.map(($,Y)=>h($._def,{...Q,currentPath:[...Q.currentPath,"items",`${Y}`]})).reduce(($,Y)=>Y===void 0?$:[...$,Y],[]),additionalItems:h(X.rest._def,{...Q,currentPath:[...Q.currentPath,"additionalItems"]})};else return{type:"array",minItems:X.items.length,maxItems:X.items.length,items:X.items.map(($,Y)=>h($._def,{...Q,currentPath:[...Q.currentPath,"items",`${Y}`]})).reduce(($,Y)=>Y===void 0?$:[...$,Y],[])}}function s5(X){return{not:B0(X)}}function e5(X){return B0(X)}var XG=(X,Q)=>{return h(X.innerType._def,Q)};var QG=(X,Q,$)=>{switch(Q){case j.ZodString:return O8(X,$);case j.ZodNumber:return d5(X,$);case j.ZodObject:return i5(X,$);case j.ZodBigInt:return Z5(X,$);case j.ZodBoolean:return C5();case j.ZodDate:return p$(X,$);case j.ZodUndefined:return s5($);case j.ZodNull:return l5($);case j.ZodArray:return S5(X,$);case j.ZodUnion:case j.ZodDiscriminatedUnion:return c5(X,$);case j.ZodIntersection:return x5(X,$);case j.ZodTuple:return a5(X,$);case j.ZodRecord:return D8(X,$);case j.ZodLiteral:return y5(X,$);case j.ZodEnum:return T5(X);case j.ZodNativeEnum:return f5(X);case j.ZodNullable:return p5(X,$);case j.ZodOptional:return n5(X,$);case j.ZodMap:return h5(X,$);case j.ZodSet:return t5(X,$);case j.ZodLazy:return()=>X.getter()._def;case j.ZodPromise:return o5(X,$);case j.ZodNaN:case j.ZodNever:return u5($);case j.ZodEffects:return _5(X,$);case j.ZodAny:return B0($);case j.ZodUnknown:return e5($);case j.ZodDefault:return v5(X,$);case j.ZodBranded:return N8(X,$);case j.ZodReadonly:return XG(X,$);case j.ZodCatch:return k5(X,$);case j.ZodPipeline:return r5(X,$);case j.ZodFunction:case j.ZodVoid:case j.ZodSymbol:return;default:return((Y)=>{return})(Q)}};function h(X,Q,$=!1){let Y=Q.seen.get(X);if(Q.override){let H=Q.override?.(X,Q,Y,$);if(H!==E5)return H}if(Y&&!$){let H=DN(Y,Q);if(H!==void 0)return H}let W={def:X,path:Q.currentPath,jsonSchema:void 0};Q.seen.set(X,W);let J=QG(X,X.typeName,Q),G=typeof J==="function"?h(J(),Q):J;if(G)wN(X,Q,G);if(Q.postProcess){let H=Q.postProcess(G,X,Q);return W.jsonSchema=G,H}return W.jsonSchema=G,G}var DN=(X,Q)=>{switch(Q.$refStrategy){case"root":return{$ref:X.path.join("/")};case"relative":return{$ref:F8(Q.currentPath,X.path)};case"none":case"seen":{if(X.path.length<Q.currentPath.length&&X.path.every(($,Y)=>Q.currentPath[Y]===$))return console.warn(`Recursive reference detected at ${Q.currentPath.join("/")}! Defaulting to any`),B0(Q);return Q.$refStrategy==="seen"?B0(Q):void 0}}},wN=(X,Q,$)=>{if(X.description){if($.description=X.description,Q.markdownDescription)$.markdownDescription=X.description}return $};var n$=(X,Q)=>{let $=P5(Q),Y=typeof Q==="object"&&Q.definitions?Object.entries(Q.definitions).reduce((B,[z,K])=>({...B,[z]:h(K._def,{...$,currentPath:[...$.basePath,$.definitionPath,z]},!0)??B0($)}),{}):void 0,W=typeof Q==="string"?Q:Q?.nameStrategy==="title"?void 0:Q?.name,J=h(X._def,W===void 0?$:{...$,currentPath:[...$.basePath,$.definitionPath,W]},!1)??B0($),G=typeof Q==="object"&&Q.name!==void 0&&Q.nameStrategy==="title"?Q.name:void 0;if(G!==void 0)J.title=G;if($.flags.hasReferencedOpenAiAnyType){if(!Y)Y={};if(!Y[$.openAiAnyTypeName])Y[$.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:$.$refStrategy==="relative"?"1":[...$.basePath,$.definitionPath,$.openAiAnyTypeName].join("/")}}}let H=W===void 0?Y?{...J,[$.definitionPath]:Y}:J:{$ref:[...$.$refStrategy==="relative"?[]:$.basePath,$.definitionPath,W].join("/"),[$.definitionPath]:{...Y,[W]:J}};if($.target==="jsonSchema7")H.$schema="http://json-schema.org/draft-07/schema#";else if($.target==="jsonSchema2019-09"||$.target==="openAi")H.$schema="https://json-schema.org/draft/2019-09/schema#";if($.target==="openAi"&&(("anyOf"in H)||("oneOf"in H)||("allOf"in H)||("type"in H)&&Array.isArray(H.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return H};function AN(X){if(!X)return"draft-7";if(X==="jsonSchema7"||X==="draft-7")return"draft-7";if(X==="jsonSchema2019-09"||X==="draft-2020-12")return"draft-2020-12";return"draft-7"}function r$(X,Q){var $,Y,W;if(m0(X))return O$(X,{target:AN(Q===null||Q===void 0?void 0:Q.target),io:($=Q===null||Q===void 0?void 0:Q.pipeStrategy)!==null&&$!==void 0?$:"input"});return n$(X,{strictUnions:(Y=Q===null||Q===void 0?void 0:Q.strictUnions)!==null&&Y!==void 0?Y:!0,pipeStrategy:(W=Q===null||Q===void 0?void 0:Q.pipeStrategy)!==null&&W!==void 0?W:"input"})}function o$(X){let Q=f1(X),$=Q===null||Q===void 0?void 0:Q.method;if(!$)throw Error("Schema is missing a method literal");let Y=d4($);if(typeof Y!=="string")throw Error("Schema method literal must be a string");return Y}function t$(X,Q){let $=h1(X,Q);if(!$.success)throw $.error;return $.data}var MN=60000;class a${constructor(X){if(this._options=X,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(s4,(Q)=>{this._oncancel(Q)}),this.setNotificationHandler(X8,(Q)=>{this._onprogress(Q)}),this.setRequestHandler(e4,(Q)=>({})),this._taskStore=X===null||X===void 0?void 0:X.taskStore,this._taskMessageQueue=X===null||X===void 0?void 0:X.taskMessageQueue,this._taskStore)this.setRequestHandler(Q8,async(Q,$)=>{let Y=await this._taskStore.getTask(Q.params.taskId,$.sessionId);if(!Y)throw new k(x.InvalidParams,"Failed to retrieve task: Task not found");return{...Y}}),this.setRequestHandler(Y8,async(Q,$)=>{let Y=async()=>{var W;let J=Q.params.taskId;if(this._taskMessageQueue){let H;while(H=await this._taskMessageQueue.dequeue(J,$.sessionId)){if(H.type==="response"||H.type==="error"){let B=H.message,z=B.id,K=this._requestResolvers.get(z);if(K)if(this._requestResolvers.delete(z),H.type==="response")K(B);else{let V=B,L=new k(V.error.code,V.error.message,V.error.data);K(L)}else{let V=H.type==="response"?"Response":"Error";this._onerror(Error(`${V} handler missing for request ${z}`))}continue}await((W=this._transport)===null||W===void 0?void 0:W.send(H.message,{relatedRequestId:$.requestId}))}}let G=await this._taskStore.getTask(J,$.sessionId);if(!G)throw new k(x.InvalidParams,`Task not found: ${J}`);if(!u1(G.status))return await this._waitForTaskUpdate(J,$.signal),await Y();if(u1(G.status)){let H=await this._taskStore.getTaskResult(J,$.sessionId);return this._clearTaskQueue(J),{...H,_meta:{...H._meta,[z1]:{taskId:J}}}}return await Y()};return await Y()}),this.setRequestHandler(W8,async(Q,$)=>{var Y;try{let{tasks:W,nextCursor:J}=await this._taskStore.listTasks((Y=Q.params)===null||Y===void 0?void 0:Y.cursor,$.sessionId);return{tasks:W,nextCursor:J,_meta:{}}}catch(W){throw new k(x.InvalidParams,`Failed to list tasks: ${W instanceof Error?W.message:String(W)}`)}}),this.setRequestHandler(q5,async(Q,$)=>{try{let Y=await this._taskStore.getTask(Q.params.taskId,$.sessionId);if(!Y)throw new k(x.InvalidParams,`Task not found: ${Q.params.taskId}`);if(u1(Y.status))throw new k(x.InvalidParams,`Cannot cancel task in terminal status: ${Y.status}`);await this._taskStore.updateTaskStatus(Q.params.taskId,"cancelled","Client cancelled task execution.",$.sessionId),this._clearTaskQueue(Q.params.taskId);let W=await this._taskStore.getTask(Q.params.taskId,$.sessionId);if(!W)throw new k(x.InvalidParams,`Task not found after cancellation: ${Q.params.taskId}`);return{_meta:{},...W}}catch(Y){if(Y instanceof k)throw Y;throw new k(x.InvalidRequest,`Failed to cancel task: ${Y instanceof Error?Y.message:String(Y)}`)}})}async _oncancel(X){let Q=this._requestHandlerAbortControllers.get(X.params.requestId);Q===null||Q===void 0||Q.abort(X.params.reason)}_setupTimeout(X,Q,$,Y,W=!1){this._timeoutInfo.set(X,{timeoutId:setTimeout(Y,Q),startTime:Date.now(),timeout:Q,maxTotalTimeout:$,resetTimeoutOnProgress:W,onTimeout:Y})}_resetTimeout(X){let Q=this._timeoutInfo.get(X);if(!Q)return!1;let $=Date.now()-Q.startTime;if(Q.maxTotalTimeout&&$>=Q.maxTotalTimeout)throw this._timeoutInfo.delete(X),k.fromError(x.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:Q.maxTotalTimeout,totalElapsed:$});return clearTimeout(Q.timeoutId),Q.timeoutId=setTimeout(Q.onTimeout,Q.timeout),!0}_cleanupTimeout(X){let Q=this._timeoutInfo.get(X);if(Q)clearTimeout(Q.timeoutId),this._timeoutInfo.delete(X)}async connect(X){var Q,$,Y;this._transport=X;let W=(Q=this.transport)===null||Q===void 0?void 0:Q.onclose;this._transport.onclose=()=>{W===null||W===void 0||W(),this._onclose()};let J=($=this.transport)===null||$===void 0?void 0:$.onerror;this._transport.onerror=(H)=>{J===null||J===void 0||J(H),this._onerror(H)};let G=(Y=this._transport)===null||Y===void 0?void 0:Y.onmessage;this._transport.onmessage=(H,B)=>{if(G===null||G===void 0||G(H,B),CX(H)||V5(H))this._onresponse(H);else if(C$(H))this._onrequest(H,B);else if(z5(H))this._onnotification(H);else this._onerror(Error(`Unknown message type: ${JSON.stringify(H)}`))},await this._transport.start()}_onclose(){var X;let Q=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let $=k.fromError(x.ConnectionClosed,"Connection closed");this._transport=void 0,(X=this.onclose)===null||X===void 0||X.call(this);for(let Y of Q.values())Y($)}_onerror(X){var Q;(Q=this.onerror)===null||Q===void 0||Q.call(this,X)}_onnotification(X){var Q;let $=(Q=this._notificationHandlers.get(X.method))!==null&&Q!==void 0?Q:this.fallbackNotificationHandler;if($===void 0)return;Promise.resolve().then(()=>$(X)).catch((Y)=>this._onerror(Error(`Uncaught error in notification handler: ${Y}`)))}_onrequest(X,Q){var $,Y,W,J,G,H;let B=($=this._requestHandlers.get(X.method))!==null&&$!==void 0?$:this.fallbackRequestHandler,z=this._transport,K=(J=(W=(Y=X.params)===null||Y===void 0?void 0:Y._meta)===null||W===void 0?void 0:W[z1])===null||J===void 0?void 0:J.taskId;if(B===void 0){let q={jsonrpc:"2.0",id:X.id,error:{code:x.MethodNotFound,message:"Method not found"}};if(K&&this._taskMessageQueue)this._enqueueTaskMessage(K,{type:"error",message:q,timestamp:Date.now()},z===null||z===void 0?void 0:z.sessionId).catch((N)=>this._onerror(Error(`Failed to enqueue error response: ${N}`)));else z===null||z===void 0||z.send(q).catch((N)=>this._onerror(Error(`Failed to send an error response: ${N}`)));return}let V=new AbortController;this._requestHandlerAbortControllers.set(X.id,V);let L=(G=X.params)===null||G===void 0?void 0:G.task,U=this._taskStore?this.requestTaskStore(X,z===null||z===void 0?void 0:z.sessionId):void 0,F={signal:V.signal,sessionId:z===null||z===void 0?void 0:z.sessionId,_meta:(H=X.params)===null||H===void 0?void 0:H._meta,sendNotification:async(q)=>{let N={relatedRequestId:X.id};if(K)N.relatedTask={taskId:K};await this.notification(q,N)},sendRequest:async(q,N,w)=>{var M,R;let S={...w,relatedRequestId:X.id};if(K&&!S.relatedTask)S.relatedTask={taskId:K};let C=(R=(M=S.relatedTask)===null||M===void 0?void 0:M.taskId)!==null&&R!==void 0?R:K;if(C&&U)await U.updateTaskStatus(C,"input_required");return await this.request(q,N,S)},authInfo:Q===null||Q===void 0?void 0:Q.authInfo,requestId:X.id,requestInfo:Q===null||Q===void 0?void 0:Q.requestInfo,taskId:K,taskStore:U,taskRequestedTtl:L===null||L===void 0?void 0:L.ttl,closeSSEStream:Q===null||Q===void 0?void 0:Q.closeSSEStream,closeStandaloneSSEStream:Q===null||Q===void 0?void 0:Q.closeStandaloneSSEStream};Promise.resolve().then(()=>{if(L)this.assertTaskHandlerCapability(X.method)}).then(()=>B(X,F)).then(async(q)=>{if(V.signal.aborted)return;let N={result:q,jsonrpc:"2.0",id:X.id};if(K&&this._taskMessageQueue)await this._enqueueTaskMessage(K,{type:"response",message:N,timestamp:Date.now()},z===null||z===void 0?void 0:z.sessionId);else await(z===null||z===void 0?void 0:z.send(N))},async(q)=>{var N;if(V.signal.aborted)return;let w={jsonrpc:"2.0",id:X.id,error:{code:Number.isSafeInteger(q.code)?q.code:x.InternalError,message:(N=q.message)!==null&&N!==void 0?N:"Internal error",...q.data!==void 0&&{data:q.data}}};if(K&&this._taskMessageQueue)await this._enqueueTaskMessage(K,{type:"error",message:w,timestamp:Date.now()},z===null||z===void 0?void 0:z.sessionId);else await(z===null||z===void 0?void 0:z.send(w))}).catch((q)=>this._onerror(Error(`Failed to send response: ${q}`))).finally(()=>{this._requestHandlerAbortControllers.delete(X.id)})}_onprogress(X){let{progressToken:Q,...$}=X.params,Y=Number(Q),W=this._progressHandlers.get(Y);if(!W){this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(X)}`));return}let J=this._responseHandlers.get(Y),G=this._timeoutInfo.get(Y);if(G&&J&&G.resetTimeoutOnProgress)try{this._resetTimeout(Y)}catch(H){this._responseHandlers.delete(Y),this._progressHandlers.delete(Y),this._cleanupTimeout(Y),J(H);return}W($)}_onresponse(X){let Q=Number(X.id),$=this._requestResolvers.get(Q);if($){if(this._requestResolvers.delete(Q),CX(X))$(X);else{let J=new k(X.error.code,X.error.message,X.error.data);$(J)}return}let Y=this._responseHandlers.get(Q);if(Y===void 0){this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(X)}`));return}this._responseHandlers.delete(Q),this._cleanupTimeout(Q);let W=!1;if(CX(X)&&X.result&&typeof X.result==="object"){let J=X.result;if(J.task&&typeof J.task==="object"){let G=J.task;if(typeof G.taskId==="string")W=!0,this._taskProgressTokens.set(G.taskId,Q)}}if(!W)this._progressHandlers.delete(Q);if(CX(X))Y(X);else{let J=k.fromError(X.error.code,X.error.message,X.error.data);Y(J)}}get transport(){return this._transport}async close(){var X;await((X=this._transport)===null||X===void 0?void 0:X.close())}async*requestStream(X,Q,$){var Y,W,J,G;let{task:H}=$!==null&&$!==void 0?$:{};if(!H){try{yield{type:"result",result:await this.request(X,Q,$)}}catch(z){yield{type:"error",error:z instanceof k?z:new k(x.InternalError,String(z))}}return}let B;try{let z=await this.request(X,y6,$);if(z.task)B=z.task.taskId,yield{type:"taskCreated",task:z.task};else throw new k(x.InternalError,"Task creation did not return a task");while(!0){let K=await this.getTask({taskId:B},$);if(yield{type:"taskStatus",task:K},u1(K.status)){if(K.status==="completed")yield{type:"result",result:await this.getTaskResult({taskId:B},Q,$)};else if(K.status==="failed")yield{type:"error",error:new k(x.InternalError,`Task ${B} failed`)};else if(K.status==="cancelled")yield{type:"error",error:new k(x.InternalError,`Task ${B} was cancelled`)};return}if(K.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:B},Q,$)};return}let V=(J=(Y=K.pollInterval)!==null&&Y!==void 0?Y:(W=this._options)===null||W===void 0?void 0:W.defaultTaskPollInterval)!==null&&J!==void 0?J:1000;await new Promise((L)=>setTimeout(L,V)),(G=$===null||$===void 0?void 0:$.signal)===null||G===void 0||G.throwIfAborted()}}catch(z){yield{type:"error",error:z instanceof k?z:new k(x.InternalError,String(z))}}}request(X,Q,$){let{relatedRequestId:Y,resumptionToken:W,onresumptiontoken:J,task:G,relatedTask:H}=$!==null&&$!==void 0?$:{};return new Promise((B,z)=>{var K,V,L,U,F,q,N;let w=(s)=>{z(s)};if(!this._transport){w(Error("Not connected"));return}if(((K=this._options)===null||K===void 0?void 0:K.enforceStrictCapabilities)===!0)try{if(this.assertCapabilityForMethod(X.method),G)this.assertTaskCapability(X.method)}catch(s){w(s);return}(V=$===null||$===void 0?void 0:$.signal)===null||V===void 0||V.throwIfAborted();let M=this._requestMessageId++,R={...X,jsonrpc:"2.0",id:M};if($===null||$===void 0?void 0:$.onprogress)this._progressHandlers.set(M,$.onprogress),R.params={...X.params,_meta:{...((L=X.params)===null||L===void 0?void 0:L._meta)||{},progressToken:M}};if(G)R.params={...R.params,task:G};if(H)R.params={...R.params,_meta:{...((U=R.params)===null||U===void 0?void 0:U._meta)||{},[z1]:H}};let S=(s)=>{var D0;this._responseHandlers.delete(M),this._progressHandlers.delete(M),this._cleanupTimeout(M),(D0=this._transport)===null||D0===void 0||D0.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:M,reason:String(s)}},{relatedRequestId:Y,resumptionToken:W,onresumptiontoken:J}).catch((L1)=>this._onerror(Error(`Failed to send cancellation: ${L1}`)));let q0=s instanceof k?s:new k(x.RequestTimeout,String(s));z(q0)};this._responseHandlers.set(M,(s)=>{var D0;if((D0=$===null||$===void 0?void 0:$.signal)===null||D0===void 0?void 0:D0.aborted)return;if(s instanceof Error)return z(s);try{let q0=h1(Q,s.result);if(!q0.success)z(q0.error);else B(q0.data)}catch(q0){z(q0)}}),(F=$===null||$===void 0?void 0:$.signal)===null||F===void 0||F.addEventListener("abort",()=>{var s;S((s=$===null||$===void 0?void 0:$.signal)===null||s===void 0?void 0:s.reason)});let C=(q=$===null||$===void 0?void 0:$.timeout)!==null&&q!==void 0?q:MN,K0=()=>S(k.fromError(x.RequestTimeout,"Request timed out",{timeout:C}));this._setupTimeout(M,C,$===null||$===void 0?void 0:$.maxTotalTimeout,K0,(N=$===null||$===void 0?void 0:$.resetTimeoutOnProgress)!==null&&N!==void 0?N:!1);let U0=H===null||H===void 0?void 0:H.taskId;if(U0){let s=(D0)=>{let q0=this._responseHandlers.get(M);if(q0)q0(D0);else this._onerror(Error(`Response handler missing for side-channeled request ${M}`))};this._requestResolvers.set(M,s),this._enqueueTaskMessage(U0,{type:"request",message:R,timestamp:Date.now()}).catch((D0)=>{this._cleanupTimeout(M),z(D0)})}else this._transport.send(R,{relatedRequestId:Y,resumptionToken:W,onresumptiontoken:J}).catch((s)=>{this._cleanupTimeout(M),z(s)})})}async getTask(X,Q){return this.request({method:"tasks/get",params:X},$8,Q)}async getTaskResult(X,Q,$){return this.request({method:"tasks/result",params:X},Q,$)}async listTasks(X,Q){return this.request({method:"tasks/list",params:X},J8,Q)}async cancelTask(X,Q){return this.request({method:"tasks/cancel",params:X},F5,Q)}async notification(X,Q){var $,Y,W,J,G;if(!this._transport)throw Error("Not connected");this.assertNotificationCapability(X.method);let H=($=Q===null||Q===void 0?void 0:Q.relatedTask)===null||$===void 0?void 0:$.taskId;if(H){let V={...X,jsonrpc:"2.0",params:{...X.params,_meta:{...((Y=X.params)===null||Y===void 0?void 0:Y._meta)||{},[z1]:Q.relatedTask}}};await this._enqueueTaskMessage(H,{type:"notification",message:V,timestamp:Date.now()});return}if(((J=(W=this._options)===null||W===void 0?void 0:W.debouncedNotificationMethods)!==null&&J!==void 0?J:[]).includes(X.method)&&!X.params&&!(Q===null||Q===void 0?void 0:Q.relatedRequestId)&&!(Q===null||Q===void 0?void 0:Q.relatedTask)){if(this._pendingDebouncedNotifications.has(X.method))return;this._pendingDebouncedNotifications.add(X.method),Promise.resolve().then(()=>{var V,L;if(this._pendingDebouncedNotifications.delete(X.method),!this._transport)return;let U={...X,jsonrpc:"2.0"};if(Q===null||Q===void 0?void 0:Q.relatedTask)U={...U,params:{...U.params,_meta:{...((V=U.params)===null||V===void 0?void 0:V._meta)||{},[z1]:Q.relatedTask}}};(L=this._transport)===null||L===void 0||L.send(U,Q).catch((F)=>this._onerror(F))});return}let K={...X,jsonrpc:"2.0"};if(Q===null||Q===void 0?void 0:Q.relatedTask)K={...K,params:{...K.params,_meta:{...((G=K.params)===null||G===void 0?void 0:G._meta)||{},[z1]:Q.relatedTask}}};await this._transport.send(K,Q)}setRequestHandler(X,Q){let $=o$(X);this.assertRequestHandlerCapability($),this._requestHandlers.set($,(Y,W)=>{let J=t$(X,Y);return Promise.resolve(Q(J,W))})}removeRequestHandler(X){this._requestHandlers.delete(X)}assertCanSetRequestHandler(X){if(this._requestHandlers.has(X))throw Error(`A request handler for ${X} already exists, which would be overridden`)}setNotificationHandler(X,Q){let $=o$(X);this._notificationHandlers.set($,(Y)=>{let W=t$(X,Y);return Promise.resolve(Q(W))})}removeNotificationHandler(X){this._notificationHandlers.delete(X)}_cleanupTaskProgressHandler(X){let Q=this._taskProgressTokens.get(X);if(Q!==void 0)this._progressHandlers.delete(Q),this._taskProgressTokens.delete(X)}async _enqueueTaskMessage(X,Q,$){var Y;if(!this._taskStore||!this._taskMessageQueue)throw Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let W=(Y=this._options)===null||Y===void 0?void 0:Y.maxTaskQueueSize;await this._taskMessageQueue.enqueue(X,Q,$,W)}async _clearTaskQueue(X,Q){if(this._taskMessageQueue){let $=await this._taskMessageQueue.dequeueAll(X,Q);for(let Y of $)if(Y.type==="request"&&C$(Y.message)){let W=Y.message.id,J=this._requestResolvers.get(W);if(J)J(new k(x.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(W);else this._onerror(Error(`Resolver missing for request ${W} during task ${X} cleanup`))}}}async _waitForTaskUpdate(X,Q){var $,Y,W;let J=(Y=($=this._options)===null||$===void 0?void 0:$.defaultTaskPollInterval)!==null&&Y!==void 0?Y:1000;try{let G=await((W=this._taskStore)===null||W===void 0?void 0:W.getTask(X));if(G===null||G===void 0?void 0:G.pollInterval)J=G.pollInterval}catch(G){}return new Promise((G,H)=>{if(Q.aborted){H(new k(x.InvalidRequest,"Request cancelled"));return}let B=setTimeout(G,J);Q.addEventListener("abort",()=>{clearTimeout(B),H(new k(x.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(X,Q){let $=this._taskStore;if(!$)throw Error("No task store configured");return{createTask:async(Y)=>{if(!X)throw Error("No request provided");return await $.createTask(Y,X.id,{method:X.method,params:X.params},Q)},getTask:async(Y)=>{let W=await $.getTask(Y,Q);if(!W)throw new k(x.InvalidParams,"Failed to retrieve task: Task not found");return W},storeTaskResult:async(Y,W,J)=>{await $.storeTaskResult(Y,W,J,Q);let G=await $.getTask(Y,Q);if(G){let H=xX.parse({method:"notifications/tasks/status",params:G});if(await this.notification(H),u1(G.status))this._cleanupTaskProgressHandler(Y)}},getTaskResult:(Y)=>{return $.getTaskResult(Y,Q)},updateTaskStatus:async(Y,W,J)=>{let G=await $.getTask(Y,Q);if(!G)throw new k(x.InvalidParams,`Task "${Y}" not found - it may have been cleaned up`);if(u1(G.status))throw new k(x.InvalidParams,`Cannot update task "${Y}" from terminal status "${G.status}" to "${W}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await $.updateTaskStatus(Y,W,J,Q);let H=await $.getTask(Y,Q);if(H){let B=xX.parse({method:"notifications/tasks/status",params:H});if(await this.notification(B),u1(H.status))this._cleanupTaskProgressHandler(Y)}},listTasks:(Y)=>{return $.listTasks(Y,Q)}}}}function $G(X){return X!==null&&typeof X==="object"&&!Array.isArray(X)}function YG(X,Q){let $={...X};for(let Y in Q){let W=Y,J=Q[W];if(J===void 0)continue;let G=$[W];if($G(G)&&$G(J))$[W]={...G,...J};else $[W]=J}return $}var uz=U7(pY(),1),lz=U7(fz(),1);function ZI(){let X=new uz.Ajv({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return lz.default(X),X}class X7{constructor(X){this._ajv=X!==null&&X!==void 0?X:ZI()}getValidator(X){var Q;let $="$id"in X&&typeof X.$id==="string"?(Q=this._ajv.getSchema(X.$id))!==null&&Q!==void 0?Q:this._ajv.compile(X):this._ajv.compile(X);return(Y)=>{if($(Y))return{valid:!0,data:Y,errorMessage:void 0};else return{valid:!1,data:void 0,errorMessage:this._ajv.errorsText($.errors)}}}}class Q7{constructor(X){this._server=X}requestStream(X,Q,$){return this._server.requestStream(X,Q,$)}async getTask(X,Q){return this._server.getTask({taskId:X},Q)}async getTaskResult(X,Q,$){return this._server.getTaskResult({taskId:X},Q,$)}async listTasks(X,Q){return this._server.listTasks(X?{cursor:X}:void 0,Q)}async cancelTask(X,Q){return this._server.cancelTask({taskId:X},Q)}}function mz(X,Q,$){var Y;if(!X)throw Error(`${$} does not support task creation (required for ${Q})`);switch(Q){case"tools/call":if(!((Y=X.tools)===null||Y===void 0?void 0:Y.call))throw Error(`${$} does not support task creation for tools/call (required for ${Q})`);break;default:break}}function cz(X,Q,$){var Y,W;if(!X)throw Error(`${$} does not support task creation (required for ${Q})`);switch(Q){case"sampling/createMessage":if(!((Y=X.sampling)===null||Y===void 0?void 0:Y.createMessage))throw Error(`${$} does not support task creation for sampling/createMessage (required for ${Q})`);break;case"elicitation/create":if(!((W=X.elicitation)===null||W===void 0?void 0:W.create))throw Error(`${$} does not support task creation for elicitation/create (required for ${Q})`);break;default:break}}class $7 extends a${constructor(X,Q){var $,Y;super(Q);if(this._serverInfo=X,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(yX.options.map((W,J)=>[W,J])),this.isMessageIgnored=(W,J)=>{let G=this._loggingLevels.get(J);return G?this.LOG_LEVEL_SEVERITY.get(W)<this.LOG_LEVEL_SEVERITY.get(G):!1},this._capabilities=($=Q===null||Q===void 0?void 0:Q.capabilities)!==null&&$!==void 0?$:{},this._instructions=Q===null||Q===void 0?void 0:Q.instructions,this._jsonSchemaValidator=(Y=Q===null||Q===void 0?void 0:Q.jsonSchemaValidator)!==null&&Y!==void 0?Y:new X7,this.setRequestHandler(k$,(W)=>this._oninitialize(W)),this.setNotificationHandler(v$,()=>{var W;return(W=this.oninitialized)===null||W===void 0?void 0:W.call(this)}),this._capabilities.logging)this.setRequestHandler(f$,async(W,J)=>{var G;let H=J.sessionId||((G=J.requestInfo)===null||G===void 0?void 0:G.headers["mcp-session-id"])||void 0,{level:B}=W.params,z=yX.safeParse(B);if(z.success)this._loggingLevels.set(H,z.data);return{}})}get experimental(){if(!this._experimental)this._experimental={tasks:new Q7(this)};return this._experimental}registerCapabilities(X){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=YG(this._capabilities,X)}setRequestHandler(X,Q){var $,Y,W;let J=f1(X),G=J===null||J===void 0?void 0:J.method;if(!G)throw Error("Schema is missing a method literal");let H;if(m0(G)){let z=G,K=($=z._zod)===null||$===void 0?void 0:$.def;H=(Y=K===null||K===void 0?void 0:K.value)!==null&&Y!==void 0?Y:z.value}else{let z=G,K=z._def;H=(W=K===null||K===void 0?void 0:K.value)!==null&&W!==void 0?W:z.value}if(typeof H!=="string")throw Error("Schema method literal must be a string");if(H==="tools/call"){let z=async(K,V)=>{let L=h1(h6,K);if(!L.success){let N=L.error instanceof Error?L.error.message:String(L.error);throw new k(x.InvalidParams,`Invalid tools/call request: ${N}`)}let{params:U}=L.data,F=await Promise.resolve(Q(K,V));if(U.task){let N=h1(y6,F);if(!N.success){let w=N.error instanceof Error?N.error.message:String(N.error);throw new k(x.InvalidParams,`Invalid task creation result: ${w}`)}return N.data}let q=h1(V8,F);if(!q.success){let N=q.error instanceof Error?q.error.message:String(q.error);throw new k(x.InvalidParams,`Invalid tools/call result: ${N}`)}return q.data};return super.setRequestHandler(X,z)}return super.setRequestHandler(X,Q)}assertCapabilityForMethod(X){var Q,$,Y;switch(X){case"sampling/createMessage":if(!((Q=this._clientCapabilities)===null||Q===void 0?void 0:Q.sampling))throw Error(`Client does not support sampling (required for ${X})`);break;case"elicitation/create":if(!(($=this._clientCapabilities)===null||$===void 0?void 0:$.elicitation))throw Error(`Client does not support elicitation (required for ${X})`);break;case"roots/list":if(!((Y=this._clientCapabilities)===null||Y===void 0?void 0:Y.roots))throw Error(`Client does not support listing roots (required for ${X})`);break;case"ping":break}}assertNotificationCapability(X){var Q,$;switch(X){case"notifications/message":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${X})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw Error(`Server does not support notifying about resources (required for ${X})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw Error(`Server does not support notifying of tool list changes (required for ${X})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw Error(`Server does not support notifying of prompt list changes (required for ${X})`);break;case"notifications/elicitation/complete":if(!(($=(Q=this._clientCapabilities)===null||Q===void 0?void 0:Q.elicitation)===null||$===void 0?void 0:$.url))throw Error(`Client does not support URL elicitation (required for ${X})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(X){if(!this._capabilities)return;switch(X){case"completion/complete":if(!this._capabilities.completions)throw Error(`Server does not support completions (required for ${X})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${X})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw Error(`Server does not support prompts (required for ${X})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw Error(`Server does not support resources (required for ${X})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw Error(`Server does not support tools (required for ${X})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw Error(`Server does not support tasks capability (required for ${X})`);break;case"ping":case"initialize":break}}assertTaskCapability(X){var Q,$;cz(($=(Q=this._clientCapabilities)===null||Q===void 0?void 0:Q.tasks)===null||$===void 0?void 0:$.requests,X,"Client")}assertTaskHandlerCapability(X){var Q;if(!this._capabilities)return;mz((Q=this._capabilities.tasks)===null||Q===void 0?void 0:Q.requests,X,"Server")}async _oninitialize(X){let Q=X.params.protocolVersion;return this._clientCapabilities=X.params.capabilities,this._clientVersion=X.params.clientInfo,{protocolVersion:W5.includes(Q)?Q:S$,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},a4)}async createMessage(X,Q){var $,Y;if(X.tools||X.toolChoice){if(!((Y=($=this._clientCapabilities)===null||$===void 0?void 0:$.sampling)===null||Y===void 0?void 0:Y.tools))throw Error("Client does not support sampling tools capability.")}if(X.messages.length>0){let W=X.messages[X.messages.length-1],J=Array.isArray(W.content)?W.content:[W.content],G=J.some((K)=>K.type==="tool_result"),H=X.messages.length>1?X.messages[X.messages.length-2]:void 0,B=H?Array.isArray(H.content)?H.content:[H.content]:[],z=B.some((K)=>K.type==="tool_use");if(G){if(J.some((K)=>K.type!=="tool_result"))throw Error("The last message must contain only tool_result content if any is present");if(!z)throw Error("tool_result blocks are not matching any tool_use from the previous message")}if(z){let K=new Set(B.filter((L)=>L.type==="tool_use").map((L)=>L.id)),V=new Set(J.filter((L)=>L.type==="tool_result").map((L)=>L.toolUseId));if(K.size!==V.size||![...K].every((L)=>V.has(L)))throw Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}if(X.tools)return this.request({method:"sampling/createMessage",params:X},l$,Q);return this.request({method:"sampling/createMessage",params:X},u$,Q)}async elicitInput(X,Q){var $,Y,W,J,G;switch(($=X.mode)!==null&&$!==void 0?$:"form"){case"url":{if(!((W=(Y=this._clientCapabilities)===null||Y===void 0?void 0:Y.elicitation)===null||W===void 0?void 0:W.url))throw Error("Client does not support url elicitation.");let B=X;return this.request({method:"elicitation/create",params:B},L8,Q)}case"form":{if(!((G=(J=this._clientCapabilities)===null||J===void 0?void 0:J.elicitation)===null||G===void 0?void 0:G.form))throw Error("Client does not support form elicitation.");let B=X.mode==="form"?X:{...X,mode:"form"},z=await this.request({method:"elicitation/create",params:B},L8,Q);if(z.action==="accept"&&z.content&&B.requestedSchema)try{let V=this._jsonSchemaValidator.getValidator(B.requestedSchema)(z.content);if(!V.valid)throw new k(x.InvalidParams,`Elicitation response content does not match requested schema: ${V.errorMessage}`)}catch(K){if(K instanceof k)throw K;throw new k(x.InternalError,`Error validating elicitation response: ${K instanceof Error?K.message:String(K)}`)}return z}}}createElicitationCompletionNotifier(X,Q){var $,Y;if(!((Y=($=this._clientCapabilities)===null||$===void 0?void 0:$.elicitation)===null||Y===void 0?void 0:Y.url))throw Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:X}},Q)}async listRoots(X,Q){return this.request({method:"roots/list",params:X},m$,Q)}async sendLoggingMessage(X,Q){if(this._capabilities.logging){if(!this.isMessageIgnored(X.level,Q))return this.notification({method:"notifications/message",params:X})}}async sendResourceUpdated(X){return this.notification({method:"notifications/resources/updated",params:X})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}var dz=Symbol.for("mcp.completable");function iz(X){return!!X&&typeof X==="object"&&dz in X}function nz(X){let Q=X[dz];return Q===null||Q===void 0?void 0:Q.complete}var pz;(function(X){X.Completable="McpCompletable"})(pz||(pz={}));var CI=/^[A-Za-z0-9._-]{1,128}$/;function kI(X){let Q=[];if(X.length===0)return{isValid:!1,warnings:["Tool name cannot be empty"]};if(X.length>128)return{isValid:!1,warnings:[`Tool name exceeds maximum length of 128 characters (current: ${X.length})`]};if(X.includes(" "))Q.push("Tool name contains spaces, which may cause parsing issues");if(X.includes(","))Q.push("Tool name contains commas, which may cause parsing issues");if(X.startsWith("-")||X.endsWith("-"))Q.push("Tool name starts or ends with a dash, which may cause parsing issues in some contexts");if(X.startsWith(".")||X.endsWith("."))Q.push("Tool name starts or ends with a dot, which may cause parsing issues in some contexts");if(!CI.test(X)){let $=X.split("").filter((Y)=>!/[A-Za-z0-9._-]/.test(Y)).filter((Y,W,J)=>J.indexOf(Y)===W);return Q.push(`Tool name contains invalid characters: ${$.map((Y)=>`"${Y}"`).join(", ")}`,"Allowed characters are: A-Z, a-z, 0-9, underscore (_), dash (-), and dot (.)"),{isValid:!1,warnings:Q}}return{isValid:!0,warnings:Q}}function vI(X,Q){if(Q.length>0){console.warn(`Tool name validation warning for "${X}":`);for(let $ of Q)console.warn(`  - ${$}`);console.warn("Tool registration will proceed, but this may cause compatibility issues."),console.warn("Consider updating the tool name to conform to the MCP tool naming standard."),console.warn("See SEP: Specify Format for Tool Names (https://github.com/modelcontextprotocol/modelcontextprotocol/issues/986) for more details.")}}function Y7(X){let Q=kI(X);return vI(X,Q.warnings),Q.isValid}class W7{constructor(X){this._mcpServer=X}registerToolTask(X,Q,$){let Y={taskSupport:"required",...Q.execution};if(Y.taskSupport==="forbidden")throw Error(`Cannot register task-based tool '${X}' with taskSupport 'forbidden'. Use registerTool() instead.`);return this._mcpServer._createRegisteredTool(X,Q.title,Q.description,Q.inputSchema,Q.outputSchema,Q.annotations,Y,Q._meta,$)}}class G7{constructor(X,Q){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new $7(X,Q)}get experimental(){if(!this._experimental)this._experimental={tasks:new W7(this)};return this._experimental}async connect(X){return await this.server.connect(X)}async close(){await this.server.close()}setToolRequestHandlers(){if(this._toolHandlersInitialized)return;this.server.assertCanSetRequestHandler(r1(U8)),this.server.assertCanSetRequestHandler(r1(h6)),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(U8,()=>({tools:Object.entries(this._registeredTools).filter(([,X])=>X.enabled).map(([X,Q])=>{let $={name:X,title:Q.title,description:Q.description,inputSchema:(()=>{let Y=T6(Q.inputSchema);return Y?r$(Y,{strictUnions:!0,pipeStrategy:"input"}):_I})(),annotations:Q.annotations,execution:Q.execution,_meta:Q._meta};if(Q.outputSchema){let Y=T6(Q.outputSchema);if(Y)$.outputSchema=r$(Y,{strictUnions:!0,pipeStrategy:"output"})}return $})})),this.server.setRequestHandler(h6,async(X,Q)=>{var $;try{let Y=this._registeredTools[X.params.name];if(!Y)throw new k(x.InvalidParams,`Tool ${X.params.name} not found`);if(!Y.enabled)throw new k(x.InvalidParams,`Tool ${X.params.name} disabled`);let W=!!X.params.task,J=($=Y.execution)===null||$===void 0?void 0:$.taskSupport,G="createTask"in Y.handler;if((J==="required"||J==="optional")&&!G)throw new k(x.InternalError,`Tool ${X.params.name} has taskSupport '${J}' but was not registered with registerToolTask`);if(J==="required"&&!W)throw new k(x.MethodNotFound,`Tool ${X.params.name} requires task augmentation (taskSupport: 'required')`);if(J==="optional"&&!W&&G)return await this.handleAutomaticTaskPolling(Y,X,Q);let H=await this.validateToolInput(Y,X.params.arguments,X.params.name),B=await this.executeToolHandler(Y,H,Q);if(W)return B;return await this.validateToolOutput(Y,B,X.params.name),B}catch(Y){if(Y instanceof k){if(Y.code===x.UrlElicitationRequired)throw Y}return this.createToolError(Y instanceof Error?Y.message:String(Y))}}),this._toolHandlersInitialized=!0}createToolError(X){return{content:[{type:"text",text:X}],isError:!0}}async validateToolInput(X,Q,$){if(!X.inputSchema)return;let Y=T6(X.inputSchema),W=Y!==null&&Y!==void 0?Y:X.inputSchema,J=await c4(W,Q);if(!J.success){let G="error"in J?J.error:"Unknown error",H=p4(G);throw new k(x.InvalidParams,`Input validation error: Invalid arguments for tool ${$}: ${H}`)}return J.data}async validateToolOutput(X,Q,$){if(!X.outputSchema)return;if(!("content"in Q))return;if(Q.isError)return;if(!Q.structuredContent)throw new k(x.InvalidParams,`Output validation error: Tool ${$} has an output schema but no structured content was provided`);let Y=T6(X.outputSchema),W=await c4(Y,Q.structuredContent);if(!W.success){let J="error"in W?W.error:"Unknown error",G=p4(J);throw new k(x.InvalidParams,`Output validation error: Invalid structured content for tool ${$}: ${G}`)}}async executeToolHandler(X,Q,$){let Y=X.handler;if("createTask"in Y){if(!$.taskStore)throw Error("No task store provided.");let J={...$,taskStore:$.taskStore};if(X.inputSchema)return await Promise.resolve(Y.createTask(Q,J));else return await Promise.resolve(Y.createTask(J))}if(X.inputSchema)return await Promise.resolve(Y(Q,$));else return await Promise.resolve(Y($))}async handleAutomaticTaskPolling(X,Q,$){var Y;if(!$.taskStore)throw Error("No task store provided for task-capable tool.");let W=await this.validateToolInput(X,Q.params.arguments,Q.params.name),J=X.handler,G={...$,taskStore:$.taskStore},H=W?await Promise.resolve(J.createTask(W,G)):await Promise.resolve(J.createTask(G)),B=H.task.taskId,z=H.task,K=(Y=z.pollInterval)!==null&&Y!==void 0?Y:5000;while(z.status!=="completed"&&z.status!=="failed"&&z.status!=="cancelled"){await new Promise((L)=>setTimeout(L,K));let V=await $.taskStore.getTask(B);if(!V)throw new k(x.InternalError,`Task ${B} not found during polling`);z=V}return await $.taskStore.getTaskResult(B)}setCompletionRequestHandler(){if(this._completionHandlerInitialized)return;this.server.assertCanSetRequestHandler(r1(q8)),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(q8,async(X)=>{switch(X.params.ref.type){case"ref/prompt":return M5(X),this.handlePromptCompletion(X,X.params.ref);case"ref/resource":return j5(X),this.handleResourceCompletion(X,X.params.ref);default:throw new k(x.InvalidParams,`Invalid completion reference: ${X.params.ref}`)}}),this._completionHandlerInitialized=!0}async handlePromptCompletion(X,Q){let $=this._registeredPrompts[Q.name];if(!$)throw new k(x.InvalidParams,`Prompt ${Q.name} not found`);if(!$.enabled)throw new k(x.InvalidParams,`Prompt ${Q.name} disabled`);if(!$.argsSchema)return H4;let Y=f1($.argsSchema),W=Y===null||Y===void 0?void 0:Y[X.params.argument.name];if(!iz(W))return H4;let J=nz(W);if(!J)return H4;let G=await J(X.params.argument.value,X.params.context);return oz(G)}async handleResourceCompletion(X,Q){let $=Object.values(this._registeredResourceTemplates).find((J)=>J.resourceTemplate.uriTemplate.toString()===Q.uri);if(!$){if(this._registeredResources[Q.uri])return H4;throw new k(x.InvalidParams,`Resource template ${X.params.ref.uri} not found`)}let Y=$.resourceTemplate.completeCallback(X.params.argument.name);if(!Y)return H4;let W=await Y(X.params.argument.value,X.params.context);return oz(W)}setResourceRequestHandlers(){if(this._resourceHandlersInitialized)return;this.server.assertCanSetRequestHandler(r1(G8)),this.server.assertCanSetRequestHandler(r1(H8)),this.server.assertCanSetRequestHandler(r1(B8)),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(G8,async(X,Q)=>{let $=Object.entries(this._registeredResources).filter(([W,J])=>J.enabled).map(([W,J])=>({uri:W,name:J.name,...J.metadata})),Y=[];for(let W of Object.values(this._registeredResourceTemplates)){if(!W.resourceTemplate.listCallback)continue;let J=await W.resourceTemplate.listCallback(Q);for(let G of J.resources)Y.push({...W.metadata,...G})}return{resources:[...$,...Y]}}),this.server.setRequestHandler(H8,async()=>{return{resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([Q,$])=>({name:Q,uriTemplate:$.resourceTemplate.uriTemplate.toString(),...$.metadata}))}}),this.server.setRequestHandler(B8,async(X,Q)=>{let $=new URL(X.params.uri),Y=this._registeredResources[$.toString()];if(Y){if(!Y.enabled)throw new k(x.InvalidParams,`Resource ${$} disabled`);return Y.readCallback($,Q)}for(let W of Object.values(this._registeredResourceTemplates)){let J=W.resourceTemplate.uriTemplate.match($.toString());if(J)return W.readCallback($,J,Q)}throw new k(x.InvalidParams,`Resource ${$} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0}setPromptRequestHandlers(){if(this._promptHandlersInitialized)return;this.server.assertCanSetRequestHandler(r1(z8)),this.server.assertCanSetRequestHandler(r1(K8)),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(z8,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,X])=>X.enabled).map(([X,Q])=>{return{name:X,title:Q.title,description:Q.description,arguments:Q.argsSchema?xI(Q.argsSchema):void 0}})})),this.server.setRequestHandler(K8,async(X,Q)=>{let $=this._registeredPrompts[X.params.name];if(!$)throw new k(x.InvalidParams,`Prompt ${X.params.name} not found`);if(!$.enabled)throw new k(x.InvalidParams,`Prompt ${X.params.name} disabled`);if($.argsSchema){let Y=T6($.argsSchema),W=await c4(Y,X.params.arguments);if(!W.success){let H="error"in W?W.error:"Unknown error",B=p4(H);throw new k(x.InvalidParams,`Invalid arguments for prompt ${X.params.name}: ${B}`)}let J=W.data,G=$.callback;return await Promise.resolve(G(J,Q))}else{let Y=$.callback;return await Promise.resolve(Y(Q))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0}resource(X,Q,...$){let Y;if(typeof $[0]==="object")Y=$.shift();let W=$[0];if(typeof Q==="string"){if(this._registeredResources[Q])throw Error(`Resource ${Q} is already registered`);let J=this._createRegisteredResource(X,void 0,Q,Y,W);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),J}else{if(this._registeredResourceTemplates[X])throw Error(`Resource template ${X} is already registered`);let J=this._createRegisteredResourceTemplate(X,void 0,Q,Y,W);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),J}}registerResource(X,Q,$,Y){if(typeof Q==="string"){if(this._registeredResources[Q])throw Error(`Resource ${Q} is already registered`);let W=this._createRegisteredResource(X,$.title,Q,$,Y);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),W}else{if(this._registeredResourceTemplates[X])throw Error(`Resource template ${X} is already registered`);let W=this._createRegisteredResourceTemplate(X,$.title,Q,$,Y);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),W}}_createRegisteredResource(X,Q,$,Y,W){let J={name:X,title:Q,metadata:Y,readCallback:W,enabled:!0,disable:()=>J.update({enabled:!1}),enable:()=>J.update({enabled:!0}),remove:()=>J.update({uri:null}),update:(G)=>{if(typeof G.uri<"u"&&G.uri!==$){if(delete this._registeredResources[$],G.uri)this._registeredResources[G.uri]=J}if(typeof G.name<"u")J.name=G.name;if(typeof G.title<"u")J.title=G.title;if(typeof G.metadata<"u")J.metadata=G.metadata;if(typeof G.callback<"u")J.readCallback=G.callback;if(typeof G.enabled<"u")J.enabled=G.enabled;this.sendResourceListChanged()}};return this._registeredResources[$]=J,J}_createRegisteredResourceTemplate(X,Q,$,Y,W){let J={resourceTemplate:$,title:Q,metadata:Y,readCallback:W,enabled:!0,disable:()=>J.update({enabled:!1}),enable:()=>J.update({enabled:!0}),remove:()=>J.update({name:null}),update:(G)=>{if(typeof G.name<"u"&&G.name!==X){if(delete this._registeredResourceTemplates[X],G.name)this._registeredResourceTemplates[G.name]=J}if(typeof G.title<"u")J.title=G.title;if(typeof G.template<"u")J.resourceTemplate=G.template;if(typeof G.metadata<"u")J.metadata=G.metadata;if(typeof G.callback<"u")J.readCallback=G.callback;if(typeof G.enabled<"u")J.enabled=G.enabled;this.sendResourceListChanged()}};return this._registeredResourceTemplates[X]=J,J}_createRegisteredPrompt(X,Q,$,Y,W){let J={title:Q,description:$,argsSchema:Y===void 0?void 0:_6(Y),callback:W,enabled:!0,disable:()=>J.update({enabled:!1}),enable:()=>J.update({enabled:!0}),remove:()=>J.update({name:null}),update:(G)=>{if(typeof G.name<"u"&&G.name!==X){if(delete this._registeredPrompts[X],G.name)this._registeredPrompts[G.name]=J}if(typeof G.title<"u")J.title=G.title;if(typeof G.description<"u")J.description=G.description;if(typeof G.argsSchema<"u")J.argsSchema=_6(G.argsSchema);if(typeof G.callback<"u")J.callback=G.callback;if(typeof G.enabled<"u")J.enabled=G.enabled;this.sendPromptListChanged()}};return this._registeredPrompts[X]=J,J}_createRegisteredTool(X,Q,$,Y,W,J,G,H,B){Y7(X);let z={title:Q,description:$,inputSchema:rz(Y),outputSchema:rz(W),annotations:J,execution:G,_meta:H,handler:B,enabled:!0,disable:()=>z.update({enabled:!1}),enable:()=>z.update({enabled:!0}),remove:()=>z.update({name:null}),update:(K)=>{if(typeof K.name<"u"&&K.name!==X){if(typeof K.name==="string")Y7(K.name);if(delete this._registeredTools[X],K.name)this._registeredTools[K.name]=z}if(typeof K.title<"u")z.title=K.title;if(typeof K.description<"u")z.description=K.description;if(typeof K.paramsSchema<"u")z.inputSchema=_6(K.paramsSchema);if(typeof K.callback<"u")z.handler=K.callback;if(typeof K.annotations<"u")z.annotations=K.annotations;if(typeof K._meta<"u")z._meta=K._meta;if(typeof K.enabled<"u")z.enabled=K.enabled;this.sendToolListChanged()}};return this._registeredTools[X]=z,this.setToolRequestHandlers(),this.sendToolListChanged(),z}tool(X,...Q){if(this._registeredTools[X])throw Error(`Tool ${X} is already registered`);let $,Y,W,J;if(typeof Q[0]==="string")$=Q.shift();if(Q.length>1){let H=Q[0];if(J7(H)){if(Y=Q.shift(),Q.length>1&&typeof Q[0]==="object"&&Q[0]!==null&&!J7(Q[0]))J=Q.shift()}else if(typeof H==="object"&&H!==null)J=Q.shift()}let G=Q[0];return this._createRegisteredTool(X,void 0,$,Y,W,J,{taskSupport:"forbidden"},void 0,G)}registerTool(X,Q,$){if(this._registeredTools[X])throw Error(`Tool ${X} is already registered`);let{title:Y,description:W,inputSchema:J,outputSchema:G,annotations:H,_meta:B}=Q;return this._createRegisteredTool(X,Y,W,J,G,H,{taskSupport:"forbidden"},B,$)}prompt(X,...Q){if(this._registeredPrompts[X])throw Error(`Prompt ${X} is already registered`);let $;if(typeof Q[0]==="string")$=Q.shift();let Y;if(Q.length>1)Y=Q.shift();let W=Q[0],J=this._createRegisteredPrompt(X,void 0,$,Y,W);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),J}registerPrompt(X,Q,$){if(this._registeredPrompts[X])throw Error(`Prompt ${X} is already registered`);let{title:Y,description:W,argsSchema:J}=Q,G=this._createRegisteredPrompt(X,Y,W,J,$);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),G}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(X,Q){return this.server.sendLoggingMessage(X,Q)}sendResourceListChanged(){if(this.isConnected())this.server.sendResourceListChanged()}sendToolListChanged(){if(this.isConnected())this.server.sendToolListChanged()}sendPromptListChanged(){if(this.isConnected())this.server.sendPromptListChanged()}}var _I={type:"object",properties:{}};function tz(X){return X!==null&&typeof X==="object"&&"parse"in X&&typeof X.parse==="function"&&"safeParse"in X&&typeof X.safeParse==="function"}function TI(X){return"_def"in X||"_zod"in X||tz(X)}function J7(X){if(typeof X!=="object"||X===null)return!1;if(TI(X))return!1;if(Object.keys(X).length===0)return!0;return Object.values(X).some(tz)}function rz(X){if(!X)return;if(J7(X))return _6(X);return X}function xI(X){let Q=f1(X);if(!Q)return[];return Object.entries(Q).map(([$,Y])=>{let W=xJ(Y),J=yJ(Y);return{name:$,description:W,required:!J}})}function r1(X){let Q=f1(X),$=Q===null||Q===void 0?void 0:Q.method;if(!$)throw Error("Schema is missing a method literal");let Y=d4($);if(typeof Y==="string")return Y;throw Error("Schema method literal must be a string")}function oz(X){return{completion:{values:X.slice(0,100),total:X.length,hasMore:X.length>100}}}var H4={completion:{values:[],hasMore:!1}};function yI(X,Q,$,Y,W){return{name:X,description:Q,inputSchema:$,handler:Y,annotations:W?.annotations}}function gI(X){let Q=new G7({name:X.name,version:X.version??"1.0.0"},{capabilities:{tools:X.tools?{}:void 0}});if(X.tools)X.tools.forEach(($)=>{Q.registerTool($.name,{description:$.description,inputSchema:$.inputSchema,annotations:$.annotations},$.handler)});return{type:"sdk",name:X.name,instance:Q}}function $x({prompt:X,options:Q}){let{systemPrompt:$,settingSources:Y,sandbox:W,...J}=Q??{},G,H;if($===void 0)G="";else if(typeof $==="string")G=$;else if($.type==="preset")H=$.append;let B=J.pathToClaudeCodeExecutable;if(!B){let F6=hI(import.meta.url),N6=az(F6,"..");B=az(N6,"cli.js")}process.env.CLAUDE_AGENT_SDK_VERSION="0.2.41";let{abortController:z=O6(),additionalDirectories:K=[],agent:V,agents:L,allowedTools:U=[],betas:F,canUseTool:q,continue:N,cwd:w,debug:M,debugFile:R,disallowedTools:S=[],tools:C,env:K0,executable:U0=R6()?"bun":"node",executableArgs:s=[],extraArgs:D0={},fallbackModel:q0,enableFileCheckpointing:L1,forkSession:P1,hooks:o1,includePartialMessages:m,persistSession:$9,thinking:t1,effort:t6,maxThinkingTokens:a6,maxTurns:B4,maxBudgetUsd:z4,mcpServers:E0,model:S1,outputFormat:L6,permissionMode:sz="default",allowDangerouslySkipPermissions:ez=!1,permissionPromptToolName:XK,plugins:QK,resume:$K,resumeSessionAt:YK,sessionId:WK,stderr:JK,strictMcpConfig:GK}=J,H7=L6?.type==="json_schema"?L6.schema:void 0,q6=K0;if(!q6)q6={...process.env};if(!q6.CLAUDE_CODE_ENTRYPOINT)q6.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(L1)q6.CLAUDE_CODE_ENABLE_SDK_FILE_CHECKPOINTING="true";if(!B)throw Error("pathToClaudeCodeExecutable is required");let Y9={},B7=new Map;if(E0)for(let[F6,N6]of Object.entries(E0))if(N6.type==="sdk"&&"instance"in N6)B7.set(F6,N6.instance),Y9[F6]={type:"sdk",name:F6};else Y9[F6]=N6;let HK=typeof X==="string",s6=a6;if(t1)switch(t1.type){case"adaptive":if(!s6)s6=32000;break;case"enabled":s6=t1.budgetTokens;break;case"disabled":s6=0;break}let z7=new XX({abortController:z,additionalDirectories:K,agent:V,betas:F,cwd:w,debug:M,debugFile:R,executable:U0,executableArgs:s,extraArgs:D0,pathToClaudeCodeExecutable:B,env:q6,forkSession:P1,stderr:JK,maxThinkingTokens:s6,effort:t6,maxTurns:B4,maxBudgetUsd:z4,model:S1,fallbackModel:q0,jsonSchema:H7,permissionMode:sz,allowDangerouslySkipPermissions:ez,permissionPromptToolName:XK,continueConversation:N,resume:$K,resumeSessionAt:YK,sessionId:WK,settingSources:Y??[],allowedTools:U,disallowedTools:S,tools:C,mcpServers:Y9,strictMcpConfig:GK,canUseTool:!!q,hooks:!!o1,includePartialMessages:m,persistSession:$9,plugins:QK,sandbox:W,spawnClaudeCodeProcess:J.spawnClaudeCodeProcess}),K7=new $X(z7,HK,q,o1,z,B7,H7,{systemPrompt:G,appendSystemPrompt:H,agents:L});if(typeof X==="string")z7.write(Z0({type:"user",session_id:"",message:{role:"user",content:[{type:"text",text:X}]},parent_tool_use_id:null})+`
`);else K7.streamInput(X);return K7}function Yx(X){return L9(X)}function Wx(X,Q){return VW(X,Q)}async function Jx(X,Q){let Y=[];try{const $=L7(Y,L9(Q),1);await $.send(X);for await(let B of $.stream())if(B.type==="result")return B;throw Error("Session ended without result message")}catch(W){var J=W,G=1}finally{var H=q7(Y,J,G);H&&await H}}export{Wx as unstable_v2_resumeSession,Jx as unstable_v2_prompt,Yx as unstable_v2_createSession,yI as tool,$x as query,gI as createSdkMcpServer,sU as HOOK_EVENTS,eU as EXIT_REASONS,F1 as AbortError};
